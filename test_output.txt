
> rest-express@2.0.1 test
> vitest tests/components/FrameworkSpreadsheet.test.tsx


[1m[44m DEV [49m[22m [34mv3.2.4 [39m[90mC:/software/cyberdocgen[39m

stderr | tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > calls save API when "Save All Changes" is clicked
TypeError: templates.map is not a function
    at C:\software\cyberdocgen\client\src\components\compliance\FrameworkSpreadsheet.tsx:77:52
    at updateMemo (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:16427:19)
    at Object.useMemo (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:17067:16)
    at useMemo (C:\software\cyberdocgen\node_modules\react\cjs\react.development.js:1650:21)
    at FrameworkSpreadsheet (C:\software\cyberdocgen\client\src\components\compliance\FrameworkSpreadsheet.tsx:75:22)
    at renderWithHooks (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at updateFunctionComponent (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:19617:20)
    at beginWork (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:21640:16)
    at HTMLUnknownElement.callCallback (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\software\cyberdocgen\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
TypeError: templates.map is not a function
    at C:\software\cyberdocgen\client\src\components\compliance\FrameworkSpreadsheet.tsx:77:52
    at updateMemo (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:16427:19)
    at Object.useMemo (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:17067:16)
    at useMemo (C:\software\cyberdocgen\node_modules\react\cjs\react.development.js:1650:21)
    at FrameworkSpreadsheet (C:\software\cyberdocgen\client\src\components\compliance\FrameworkSpreadsheet.tsx:75:22)
    at renderWithHooks (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at updateFunctionComponent (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:19617:20)
    at beginWork (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:21640:16)
    at HTMLUnknownElement.callCallback (C:\software\cyberdocgen\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\software\cyberdocgen\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
The above error occurred in the <FrameworkSpreadsheet> component:

    at FrameworkSpreadsheet (C:\software\cyberdocgen\client\src\components\compliance\FrameworkSpreadsheet.tsx:35:33)
    at QueryClientProvider (file:///C:/software/cyberdocgen/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [31mÎ“Â¥Â»[39m [30m[45m components [49m[39m tests/components/FrameworkSpreadsheet.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1754[2mms[22m[39m
   [32mÎ“Â£Ã´[39m FrameworkSpreadsheet Component[2m > [22mrenders the spreadsheet title[32m 222[2mms[22m[39m
   [32mÎ“Â£Ã´[39m FrameworkSpreadsheet Component[2m > [22mrenders templates from API[32m 44[2mms[22m[39m
   [32mÎ“Â£Ã´[39m FrameworkSpreadsheet Component[2m > [22mshows empty state if no templates[32m 15[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mallows searching templates [33m 313[2mms[22m[39m
   [32mÎ“Â£Ã´[39m FrameworkSpreadsheet Component[2m > [22mopens accordion to show fields[32m 59[2mms[22m[39m
   [32mÎ“Â£Ã´[39m FrameworkSpreadsheet Component[2m > [22mallows editing a field[32m 90[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m FrameworkSpreadsheet Component[2m > [22mcalls save API when "Save All Changes" is clicked[39m[33m 1009[2mms[22m[39m
[31m     Î“Ã¥Ã† Unable to find an element with the text: Template 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL   components  tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > calls save API when "Save All Changes" is clicked
TestingLibraryElementError: Unable to find an element with the text: Template 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div />
  </body>
</html>
 Î“Â¥Â» Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Î“Â¥Â» tests/components/FrameworkSpreadsheet.test.tsx:151:15
    149|         
    150|         renderSpreadsheet({ framework: 'iso27001', companyProfileId: 'Î“Ã‡Âª
    151|         await waitFor(() => expect(screen.getByText('Template 1')).toBÎ“Ã‡Âª
       |               ^
    152|         
    153|         // Ensure companyProfileId is recognized

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Errors Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Uncaught Exception Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
TypeError: templates.map is not a function
 Î“Â¥Â» client/src/components/compliance/FrameworkSpreadsheet.tsx:77:52
 Î“Â¥Â» updateMemo node_modules/react-dom/cjs/react-dom.development.js:16427:19
 Î“Â¥Â» Object.useMemo node_modules/react-dom/cjs/react-dom.development.js:17067:16
 Î“Â¥Â» useMemo node_modules/react/cjs/react.development.js:1650:21
 Î“Â¥Â» FrameworkSpreadsheet client/src/components/compliance/FrameworkSpreadsheet.tsx:75:22
 Î“Â¥Â» renderWithHooks node_modules/react-dom/cjs/react-dom.development.js:15486:18
 Î“Â¥Â» updateFunctionComponent node_modules/react-dom/cjs/react-dom.development.js:19617:20
 Î“Â¥Â» beginWork node_modules/react-dom/cjs/react-dom.development.js:21640:16
 Î“Â¥Â» beginWork$1 node_modules/react-dom/cjs/react-dom.development.js:27465:14
 Î“Â¥Â» performUnitOfWork node_modules/react-dom/cjs/react-dom.development.js:26599:12

This error originated in "tests/components/FrameworkSpreadsheet.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "calls save API when "Save All Changes" is clicked". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (7)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 11:55:33
[2m   Duration [22m 4.65s[2m (transform 606ms, setup 153ms, collect 734ms, tests 1.75s, environment 849ms, prepare 647ms)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mtests/components/FrameworkSpreadsheet.test.tsx [22m[34mx1 [34m[39m
       [2m Filename pattern: [22m[34mtests/components/FrameworkSpreadsheet.test.tsx[39m

[90mstdout[2m | tests/components/FrameworkSpreadsheet.test.tsx[2m > [22m[2mFrameworkSpreadsheet Component[2m > [22m[2mcalls save API when "Save All Changes" is clicked
[22m[39mButton HTML: <button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2" data-testid="button-save-all-changes"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save h-4 w-4 mr-2" aria-hidden="true"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path><path d="M7 3v4a1 1 0 0 0 1 1h7"></path></svg>Save All Changes</button>
Button Disabled: [33mfalse[39m

 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/FrameworkSpreadsheet.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1792[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mrenders the spreadsheet title [33m 467[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mallows searching templates [33m 623[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m7 passed[39m[22m[90m (7)[39m
[2m   Start at [22m 11:55:57
[2m   Duration [22m 3.32s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mpackage.json [22m[34mx2 [34m[39m
       [2m Filename pattern: [22m[34mtests/components/FrameworkSpreadsheet.test.tsx[39m

[90mstdout[2m | tests/components/FrameworkSpreadsheet.test.tsx[2m > [22m[2mFrameworkSpreadsheet Component[2m > [22m[2mcalls save API when "Save All Changes" is clicked
[22m[39mButton HTML: <button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2" data-testid="button-save-all-changes"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save h-4 w-4 mr-2" aria-hidden="true"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path><path d="M7 3v4a1 1 0 0 0 1 1h7"></path></svg>Save All Changes</button>
Button Disabled: [33mfalse[39m

 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/FrameworkSpreadsheet.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 11637[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mrenders the spreadsheet title [33m 2900[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mrenders templates from API [33m 1163[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mshows empty state if no templates [33m 474[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mallows searching templates [33m 4285[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mopens accordion to show fields [33m 735[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mallows editing a field [33m 847[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m FrameworkSpreadsheet Component[2m > [22mcalls save API when "Save All Changes" is clicked [33m 1230[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m7 passed[39m[22m[90m (7)[39m
[2m   Start at [22m 12:35:39
[2m   Duration [22m 71.47s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
