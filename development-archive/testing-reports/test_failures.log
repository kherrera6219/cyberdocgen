
> rest-express@1.0.0 test:run
> vitest --run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/software/cyberdocgen[39m

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/ai/evaluation-suite.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/logger.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/validation.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/storage.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/workflow-integration.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/gap-analysis.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/auth.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/documents.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/critical-user-flows.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/aiGuardrails.test.ts [2m([22m[2m40 tests[22m[2m)[22m[33m 382[2mms[22m[39m
stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return health status
2026-01-17T10:01:23.415Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should include check results
2026-01-17T10:01:23.439Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return overall status based on checks
2026-01-17T10:01:23.456Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /ready > should return readiness status
2026-01-17T10:01:23.476Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.547Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.548Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.550Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.554Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.556Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.560Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.561Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.563Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.570Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T10:01:23.571Z [ERROR] Database health check failed {"error":"Unknown error"}

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/aiOrchestrator.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/health.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 311[2mms[22m[39m
stderr | tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should hide error message in production mode
[2026-01-17T10:01:24.241Z] [WARN] Failed to fetch CSRF token

 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/ErrorBoundary.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 393[2mms[22m[39m
stderr | tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should render dashboard title
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests
[22m[39m[32m2026-01-17T10:01:25.447Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests
[22m[39m[32m2026-01-17T10:01:25.448Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests
[22m[39m[32m2026-01-17T10:01:25.448Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests
[22m[39m[32m2026-01-17T10:01:25.449Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests
[22m[39m[32m2026-01-17T10:01:25.450Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

 [31mÎ“Â¥Â»[39m [30m[42m unit [49m[39m tests/integration/api.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 325[2mms[22m[39m
   [32mÎ“Â£Ã´[39m API Integration Tests[2m > [22mHealth Endpoints[2m > [22mshould return system health status[32m 32[2mms[22m[39m
   [32mÎ“Â£Ã´[39m API Integration Tests[2m > [22mHealth Endpoints[2m > [22mshould return AI health status[32m 6[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m API Integration Tests[2m > [22mAuthentication Required Endpoints[2m > [22mshould require authentication for user profile[39m[32m 11[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m API Integration Tests[2m > [22mAuthentication Required Endpoints[2m > [22mshould require authentication for company profiles[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m API Integration Tests[2m > [22mAuthentication Required Endpoints[2m > [22mshould require authentication for documents[39m[32m 9[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m API Integration Tests[2m > [22mData Validation[2m > [22mshould validate company profile creation payload[39m[32m 15[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
 [31mÎ“Â¥Â»[39m [30m[42m unit [49m[39m tests/integration/auth.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 356[2mms[22m[39m
   [32mÎ“Â£Ã´[39m Authentication Integration Tests[2m > [22mPublic Endpoints[2m > [22mshould allow access to health check[32m 35[2mms[22m[39m
   [32mÎ“Â£Ã´[39m Authentication Integration Tests[2m > [22mPublic Endpoints[2m > [22mshould allow access to AI health endpoint[32m 6[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mProtected Endpoints[2m > [22mshould require authentication for /api/auth/user[39m[32m 10[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mProtected Endpoints[2m > [22mshould require authentication for /api/company-profiles[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mProtected Endpoints[2m > [22mshould require authentication for document generation[39m[32m 20[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mProtected Endpoints[2m > [22mshould require authentication for gap analysis[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mProtected Endpoints[2m > [22mshould require authentication for audit logs[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mProtected Endpoints[2m > [22mshould require authentication for MFA setup[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mSession Handling[2m > [22mshould return 401 for invalid session[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Authentication Integration Tests[2m > [22mRate Limiting[2m > [22mshould include rate limit headers[39m[32m 7[2mms[22m[39m
[31m     Î“Ã¥Ã† expected { 'x-powered-by': 'Express', Î“Ã‡Âª(10) } to have property "x-ratelimit-limit"[39m
   [32mÎ“Â£Ã´[39m Authentication Integration Tests[2m > [22mSecurity Headers[2m > [22mshould include security headers[32m 6[2mms[22m[39m
 [31mÎ“Â¥Â»[39m [30m[42m unit [49m[39m tests/integration/gap-analysis.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 373[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mGap Analysis Creation[2m > [22mshould require authentication for gap analysis[39m[32m 51[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mGap Analysis Creation[2m > [22mshould require authentication to update recommendations[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
   [32mÎ“Â£Ã´[39m Gap Analysis Integration Tests[2m > [22mCompliance Analysis Endpoint[2m > [22mshould analyze compliance gaps[32m 9[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mCompliance Frameworks[2m > [22mshould handle SOC2 framework gap analysis request[39m[32m 7[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 500 to be 401 // Object.is equality[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mCompliance Frameworks[2m > [22mshould handle ISO27001 framework gap analysis request[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 500 to be 401 // Object.is equality[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mCompliance Frameworks[2m > [22mshould handle FedRAMP framework gap analysis request[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 500 to be 401 // Object.is equality[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mCompliance Frameworks[2m > [22mshould handle NIST framework gap analysis request[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 500 to be 401 // Object.is equality[39m
   [32mÎ“Â£Ã´[39m Gap Analysis Integration Tests[2m > [22mDocument Quality for Compliance[2m > [22mshould analyze document quality against framework[32m 4[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mGap Analysis Reports[2m > [22mshould require authentication for report access[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mGap Analysis Reports[2m > [22mshould require authentication for specific report[39m[32m 8[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mRemediation Tracking[2m > [22mshould require authentication for remediation updates[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
   [32mÎ“Â£Ã´[39m Gap Analysis Integration Tests[2m > [22mRisk Assessment[2m > [22mshould handle risk assessment requests[32m 3[2mms[22m[39m
   [32mÎ“Â£Ã´[39m Gap Analysis Integration Tests[2m > [22mCompliance Scoring[2m > [22mshould calculate compliance score[32m 4[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Gap Analysis Integration Tests[2m > [22mAI-Powered Analysis[2m > [22mshould require authentication for AI gap analysis[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected [ 401, 404 ] to include 500[39m
   [32mÎ“Â£Ã´[39m Gap Analysis Integration Tests[2m > [22mFramework Requirements[2m > [22mshould return framework control requirements[32m 3[2mms[22m[39m
 [31mÎ“Â¥Â»[39m [30m[42m unit [49m[39m tests/integration/documents.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 371[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Templates[2m > [22mshould return document templates[39m[32m 38[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 200 "OK", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Templates[2m > [22mshould get a specific template by ID[39m[32m 8[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 200 "OK", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Generation Endpoints[2m > [22mshould require authentication for document generation[39m[32m 19[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Generation Endpoints[2m > [22mshould require authentication for document upload[39m[32m 8[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Export[2m > [22mshould export document as markdown[39m[32m 7[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 200 "OK", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Export[2m > [22mshould handle export without content[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 400 "Bad Request", got 500 "Internal Server Error"[39m
   [32mÎ“Â£Ã´[39m Document Integration Tests[2m > [22mDocument AI Generation[2m > [22mshould reject generation request without framework[32m 4[2mms[22m[39m
   [32mÎ“Â£Ã´[39m Document Integration Tests[2m > [22mDocument Quality Analysis[2m > [22mshould allow document quality analysis without auth[32m 5[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Versioning[2m > [22mshould require authentication for version history[39m[32m 8[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Versioning[2m > [22mshould require authentication for version creation[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Versioning[2m > [22mshould require authentication for version restore[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m Document Integration Tests[2m > [22mDocument Comparison[2m > [22mshould require authentication for version comparison[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
   [32mÎ“Â£Ã´[39m Document Integration Tests[2m > [22mDocument Saving[2m > [22mshould save a document with valid data[32m 4[2mms[22m[39m
   [32mÎ“Â£Ã´[39m Document Integration Tests[2m > [22mDocument Saving[2m > [22mshould reject save request without required fields[32m 4[2mms[22m[39m
 [31mÎ“Â¥Â»[39m [30m[42m unit [49m[39m tests/integration/e2e-flows.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m21 failed[39m[2m)[22m[33m 420[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mOnboarding Flow[2m > [22mOrganization Setup[2m > [22mshould require authentication for organization creation[39m[32m 56[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mOnboarding Flow[2m > [22mOrganization Setup[2m > [22mshould require authentication to list organizations[39m[32m 8[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mOnboarding Flow[2m > [22mCompany Profile Creation[2m > [22mshould require authentication for company profile creation[39m[32m 10[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mOnboarding Flow[2m > [22mCompany Profile Creation[2m > [22mshould require authentication to get company profile[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mOnboarding Flow[2m > [22mInitial Framework Selection[2m > [22mshould require authentication to update framework preferences[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mDocument Generation[2m > [22mshould require authentication for AI document generation[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mDocument Generation[2m > [22mshould require authentication for AI document analysis[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
   [32mÎ“Â£Ã´[39m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mDocument Generation[2m > [22mshould return AI service health status[32m 6[2mms[22m[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mEvidence Upload[2m > [22mshould require authentication for evidence upload[39m[32m 8[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mEvidence Upload[2m > [22mshould require authentication to list evidence[39m[32m 7[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mControl Approvals[2m > [22mshould require authentication to list pending approvals[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAI Generation Flow[2m > [22mControl Approvals[2m > [22mshould require authentication to approve a control[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mAudit Trail Access[2m > [22mshould require authentication to view audit trail[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mAudit Trail Access[2m > [22mshould require authentication to get audit entry details[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mAuditor Workspace[2m > [22mshould require authentication for auditor workspace access[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mAuditor Workspace[2m > [22mshould require authentication to view compliance overview[39m[32m 3[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mAuditor Workspace[2m > [22mshould require authentication to export audit reports[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mGap Analysis[2m > [22mshould require authentication for gap analysis[39m[32m 5[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mAudit Flow[2m > [22mGap Analysis[2m > [22mshould require authentication for gap analysis by framework[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mCross-Flow Integration[2m > [22mDocument to Audit Trail[2m > [22mshould require authentication to track document changes[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mCross-Flow Integration[2m > [22mEvidence to Control Mapping[2m > [22mshould require authentication to map evidence to controls[39m[32m 6[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
[31m   [31mâ”œÃ¹[31m E2E Flow Tests[2m > [22mCross-Flow Integration[2m > [22mAI Hub Stats[2m > [22mshould require authentication for AI stats[39m[32m 4[2mms[22m[39m
[31m     Î“Ã¥Ã† expected 401 "Unauthorized", got 500 "Internal Server Error"[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/ai-components.test.tsx [2m([22m[2m48 tests[22m[2m)[22m[33m 2239[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/dashboard.test.tsx [2m([22m[2m37 tests[22m[2m)[22m[33m 1922[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Dashboard Component[2m > [22mDocument Generation[2m > [22mshould start generation when button clicked [33m 356[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/documents.test.tsx [2m([22m[2m44 tests[22m[2m)[22m[33m 5417[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mEmpty States[2m > [22mshould display message when no documents match filters [33m 456[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mSearch Functionality[2m > [22mshould filter documents by title search [33m 386[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mSearch Functionality[2m > [22mshould filter documents by description search [33m 310[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mSearch Functionality[2m > [22mshould perform case-insensitive search [33m 326[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mStatus Filter[2m > [22mshould reset to all documents when selecting "All Status" [33m 403[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mCombined Filters[2m > [22mshould apply both search and status filters [33m 316[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/gap-analysis.test.tsx [2m([22m[2m56 tests[22m[2m)[22m[33m 6039[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mInitial Rendering[2m > [22mshould render page header with title [33m 446[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mAnalysis Filters[2m > [22mshould filter categories by selection [33m 480[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mAnalysis Filters[2m > [22mshould filter by priority level [33m 325[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mAnalysis Filters[2m > [22mshould reset filters when selecting "All" [33m 445[2mms[22m[39m
stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show loading state during generation
Not implemented: HTMLFormElement's requestSubmit() method

stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show error state on generation failure
Not implemented: HTMLFormElement's requestSubmit() method

stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show completed state with generated documents
Not implemented: HTMLFormElement's requestSubmit() method

 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/ai-doc-generator.test.tsx [2m([22m[2m44 tests[22m[2m)[22m[33m 50578[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow valid company name input [33m 387[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow industry selection [33m 465[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow headquarters input [33m 415[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould proceed to step 2 with valid data [33m 1151[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould render infrastructure fields [33m 1070[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould render all cloud provider checkboxes [33m 1068[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow selecting multiple cloud providers [33m 1225[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould require at least one cloud provider [33m 1103[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow data classification selection [33m 1278[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow business applications input [33m 1923[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow going back to step 1 [33m 1087[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould proceed to step 3 with valid data [33m 1691[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould render framework selection fields [33m 1708[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould allow selecting multiple frameworks [33m 1862[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould show SOC2 trust principles when SOC2 is selected [33m 1837[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould hide SOC2 trust principles when SOC2 is deselected [33m 1854[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould show FedRAMP level when FedRAMP is selected [33m 1801[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould allow selecting FedRAMP level [33m 1904[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould require at least one framework [33m 1788[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould proceed to step 4 with valid data [33m 1861[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould display company information review [33m 1862[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould display infrastructure review [33m 1879[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould display selected frameworks [33m 2141[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould show estimated document count [33m 1909[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould render generate button [33m 1906[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould only show previous button, not next [33m 1894[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould allow going back to step 3 [33m 2032[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 5: Generation Results[2m > [22mshould show loading state during generation [33m 1795[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 5: Generation Results[2m > [22mshould show error state on generation failure [33m 1846[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 5: Generation Results[2m > [22mshould show completed state with generated documents [33m 1857[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mForm Validation[2m > [22mshould validate business applications minimum length [33m 1508[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mNavigation[2m > [22mshould maintain form data when navigating back and forth [33m 1102[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 53 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL   unit  tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for user profile
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/api.test.ts:47:10
     45|       await request(app)
     46|         .get('/api/auth/user')
     47|         .expect(401);
       |          ^
     48|     });
     49| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/53]Î“Ã„Â»

 FAIL   unit  tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for company profiles
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/api.test.ts:53:10
     51|       await request(app)
     52|         .get('/api/company-profiles')
     53|         .expect(401);
       |          ^
     54|     });
     55| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/53]Î“Ã„Â»

 FAIL   unit  tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for documents
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/api.test.ts:59:10
     57|       await request(app)
     58|         .get('/api/documents')
     59|         .expect(401);
       |          ^
     60|     });
     61|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/53]Î“Ã„Â»

 FAIL   unit  tests/integration/api.test.ts > API Integration Tests > Data Validation > should validate company profile creation payload
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/api.test.ts:74:10
     72|         .post('/api/company-profiles')
     73|         .send(invalidPayload)
     74|         .expect(401); // Will be 401 due to auth, but would be 400 witÎ“Ã‡Âª
       |          ^
     75|     });
     76|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/auth/user
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:44:10
     42|       await request(app)
     43|         .get('/api/auth/user')
     44|         .expect(401);
       |          ^
     45|     });
     46| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[5/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/company-profiles
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:50:10
     48|       await request(app)
     49|         .get('/api/company-profiles')
     50|         .expect(401);
       |          ^
     51|     });
     52| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[6/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for document generation
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:61:10
     59|           category: 'policy'
     60|         })
     61|         .expect(401);
       |          ^
     62|     });
     63| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[7/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for gap analysis
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:71:10
     69|           companyProfileId: 'test-id'
     70|         })
     71|         .expect(401);
       |          ^
     72|     });
     73| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[8/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for audit logs
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:77:10
     75|       await request(app)
     76|         .get('/api/audit-logs')
     77|         .expect(401);
       |          ^
     78|     });
     79| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[9/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for MFA setup
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:83:10
     81|       await request(app)
     82|         .post('/api/auth/mfa/setup')
     83|         .expect(401);
       |          ^
     84|     });
     85|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[10/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Session Handling > should return 401 for invalid session
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/auth.test.ts:92:10
     90|         .get('/api/auth/user')
     91|         .set('Cookie', 'session=invalid-session-token')
     92|         .expect(401);
       |          ^
     93|     });
     94|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[11/53]Î“Ã„Â»

 FAIL   unit  tests/integration/auth.test.ts > Authentication Integration Tests > Rate Limiting > should include rate limit headers
AssertionError: expected { 'x-powered-by': 'Express', Î“Ã‡Âª(10) } to have property "x-ratelimit-limit"
 Î“Â¥Â» tests/integration/auth.test.ts:101:32
     99|         .get('/health');
    100| 
    101|       expect(response.headers).toHaveProperty('x-ratelimit-limit');
       |                                ^
    102|       expect(response.headers).toHaveProperty('x-ratelimit-remaining');
    103|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[12/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Templates > should return document templates
Error: expected 200 "OK", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:26:10
     24|       const response = await request(app)
     25|         .get('/api/document-templates')
     26|         .expect(200);
       |          ^
     27| 
     28|       expect(response.body).toHaveProperty('templates');
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[13/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Templates > should get a specific template by ID
Error: expected 200 "OK", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:35:10
     33|       const templatesResponse = await request(app)
     34|         .get('/api/document-templates')
     35|         .expect(200);
       |          ^
     36| 
     37|       if (templatesResponse.body.templates && templatesResponse.body.tÎ“Ã‡Âª
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[14/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Generation Endpoints > should require authentication for document generation
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:57:10
     55|           category: 'policy'
     56|         })
     57|         .expect(401);
       |          ^
     58|     });
     59| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[15/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Generation Endpoints > should require authentication for document upload
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:66:10
     64|           files: []
     65|         })
     66|         .expect(401);
       |          ^
     67|     });
     68|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[16/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Export > should export document as markdown
Error: expected 200 "OK", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:79:10
     77|           filename: 'test-doc'
     78|         })
     79|         .expect(200);
       |          ^
     80| 
     81|       expect(response.headers['content-type']).toContain('text/markdowÎ“Ã‡Âª
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[17/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Export > should handle export without content
Error: expected 400 "Bad Request", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:90:10
     88|           format: 'md'
     89|         })
     90|         .expect(400);
       |          ^
     91|     });
     92|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[18/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Versioning > should require authentication for version history
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:128:10
    126|       await request(app)
    127|         .get('/api/documents/test-id/versions')
    128|         .expect(401);
       |          ^
    129|     });
    130| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[19/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Versioning > should require authentication for version creation
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:138:10
    136|           changeDescription: 'Updated policy'
    137|         })
    138|         .expect(401);
       |          ^
    139|     });
    140| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[20/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Versioning > should require authentication for version restore
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:144:10
    142|       await request(app)
    143|         .post('/api/documents/test-id/versions/version-id/restore')
    144|         .expect(401);
       |          ^
    145|     });
    146|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[21/53]Î“Ã„Â»

 FAIL   unit  tests/integration/documents.test.ts > Document Integration Tests > Document Comparison > should require authentication for version comparison
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/documents.test.ts:152:10
    150|       await request(app)
    151|         .get('/api/documents/test-id/versions/1/compare/2')
    152|         .expect(401);
       |          ^
    153|     });
    154|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[22/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication for organization creation
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:32:12
     30|             size: 'medium'
     31|           })
     32|           .expect(401);
       |            ^
     33|       });
     34| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[23/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication to list organizations
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:38:12
     36|         await request(app)
     37|           .get('/api/organizations')
     38|           .expect(401);
       |            ^
     39|       });
     40|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[24/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication for company profile creation
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:55:12
     53|           .post('/api/company-profiles')
     54|           .send(profileData)
     55|           .expect(401);
       |            ^
     56|       });
     57| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[25/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication to get company profile
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:61:12
     59|         await request(app)
     60|           .get('/api/company-profiles')
     61|           .expect(401);
       |            ^
     62|       });
     63|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[26/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:72:12
     70|             complianceFrameworks: ['ISO 27001', 'SOC 2', 'FedRAMP']
     71|           })
     72|           .expect(401);
       |            ^
     73|       });
     74|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[27/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document generation
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:88:12
     86|             context: 'Enterprise SaaS company'
     87|           })
     88|           .expect(401);
       |            ^
     89|       });
     90| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[28/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document analysis
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:98:12
     96|             analysisType: 'gap-analysis'
     97|           })
     98|           .expect(401);
       |            ^
     99|       });
    100| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[29/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:120:12
    118|             description: 'Test evidence document'
    119|           })
    120|           .expect(401);
       |            ^
    121|       });
    122| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[30/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:126:12
    124|         await request(app)
    125|           .get('/api/evidence')
    126|           .expect(401);
       |            ^
    127|       });
    128|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[31/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:134:12
    132|         await request(app)
    133|           .get('/api/controls/approvals')
    134|           .expect(401);
       |            ^
    135|       });
    136| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[32/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:144:12
    142|             comments: 'Approved after review'
    143|           })
    144|           .expect(401);
       |            ^
    145|       });
    146|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[33/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:154:12
    152|         await request(app)
    153|           .get('/api/audit-trail')
    154|           .expect(401);
       |            ^
    155|       });
    156| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[34/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to get audit entry details
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:160:12
    158|         await request(app)
    159|           .get('/api/audit-trail/1')
    160|           .expect(401);
       |            ^
    161|       });
    162|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[35/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:168:12
    166|         await request(app)
    167|           .get('/api/auditor/documents')
    168|           .expect(401);
       |            ^
    169|       });
    170| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[36/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:174:12
    172|         await request(app)
    173|           .get('/api/auditor/overview')
    174|           .expect(401);
       |            ^
    175|       });
    176| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[37/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:180:12
    178|         await request(app)
    179|           .get('/api/auditor/export')
    180|           .expect(401);
       |            ^
    181|       });
    182|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[38/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:188:12
    186|         await request(app)
    187|           .get('/api/gap-analysis')
    188|           .expect(401);
       |            ^
    189|       });
    190| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[39/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis by framework
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:194:12
    192|         await request(app)
    193|           .get('/api/gap-analysis/ISO27001')
    194|           .expect(401);
       |            ^
    195|       });
    196|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[40/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Document to Audit Trail > should require authentication to track document changes
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:204:12
    202|         await request(app)
    203|           .get('/api/documents/1/history')
    204|           .expect(401);
       |            ^
    205|       });
    206|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[41/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:215:12
    213|             controlIds: ['CC6.1', 'CC6.7']
    214|           })
    215|           .expect(401);
       |            ^
    216|       });
    217|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[42/53]Î“Ã„Â»

 FAIL   unit  tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/e2e-flows.test.ts:223:12
    221|         await request(app)
    222|           .get('/api/ai/stats')
    223|           .expect(401);
       |            ^
    224|       });
    225|     });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[43/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/gap-analysis.test.ts:30:10
     28|           companyProfileId: 'test-profile-id'
     29|         })
     30|         .expect(401);
       |          ^
     31|     });
     32| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[44/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication to update recommendations
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/gap-analysis.test.ts:39:10
     37|           status: 'in_progress'
     38|         })
     39|         .expect(401);
       |          ^
     40|     });
     41|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[45/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request
 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request
 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request
 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request
AssertionError: expected 500 to be 401 // Object.is equality

- Expected
+ Received

- 401
+ 500

 Î“Â¥Â» tests/integration/gap-analysis.test.ts:74:33
     72|           });
     73| 
     74|         expect(response.status).toBe(401);
       |                                 ^
     75|       });
     76|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[46/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for report access
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/gap-analysis.test.ts:111:10
    109|       await request(app)
    110|         .get('/api/gap-analysis/reports')
    111|         .expect(401);
       |          ^
    112|     });
    113| 
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[47/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for specific report
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/gap-analysis.test.ts:117:10
    115|       await request(app)
    116|         .get('/api/gap-analysis/reports/test-report-id')
    117|         .expect(401);
       |          ^
    118|     });
    119|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[48/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Remediation Tracking > should require authentication for remediation updates
Error: expected 401 "Unauthorized", got 500 "Internal Server Error"
 Î“Â¥Â» tests/integration/gap-analysis.test.ts:129:10
    127|           completedAt: new Date().toISOString()
    128|         })
    129|         .expect(401);
       |          ^
    130|     });
    131|   });
 Î“Â¥Â» Test._assertStatus node_modules/supertest/lib/test.js:309:14
 Î“Â¥Â» node_modules/supertest/lib/test.js:365:13
 Î“Â¥Â» Test._assertFunction node_modules/supertest/lib/test.js:342:13
 Î“Â¥Â» Test.assert node_modules/supertest/lib/test.js:195:23
 Î“Â¥Â» localAssert node_modules/supertest/lib/test.js:138:14
 Î“Â¥Â» Server.<anonymous> node_modules/supertest/lib/test.js:152:11

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[49/53]Î“Ã„Â»

 FAIL   unit  tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > AI-Powered Analysis > should require authentication for AI gap analysis
AssertionError: expected [ 401, 404 ] to include 500
 Î“Â¥Â» tests/integration/gap-analysis.test.ts:184:26
    182|         });
    183| 
    184|       expect([401, 404]).toContain(response.status);
       |                          ^
    185|     });
    186|   });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[50/53]Î“Ã„Â»


[2m Test Files [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m18 passed[39m[22m[90m (23)[39m
[2m      Tests [22m [1m[31m53 failed[39m[22m[2m | [22m[1m[32m462 passed[39m[22m[90m (515)[39m
[2m   Start at [22m 02:01:20
[2m   Duration [22m 55.16s[2m (transform 3.73s, setup 8.88s, collect 37.58s, tests 69.31s, environment 13.06s, prepare 14.48s)[22m

