
> rest-express@1.0.0 test
> vitest


[1m[44m DEV [49m[22m [34mv3.2.4 [39m[90mC:/software/cyberdocgen[39m

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/aiGuardrails.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 183[2mms[22m[39m
stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return health status
2026-01-17T16:18:34.964Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should include check results
2026-01-17T16:18:34.989Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return overall status based on checks
2026-01-17T16:18:35.008Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /ready > should return readiness status
2026-01-17T16:18:35.018Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.091Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.093Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.094Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.095Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.096Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.097Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.098Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.099Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.099Z [ERROR] Database health check failed {"error":"Unknown error"}

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
2026-01-17T16:18:35.102Z [ERROR] Database health check failed {"error":"Unknown error"}

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/health.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 304[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/aiOrchestrator.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 27[2mms[22m[39m
stderr | tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should hide error message in production mode
[2026-01-17T16:18:35.899Z] [WARN] Failed to fetch CSRF token

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/logger.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/ErrorBoundary.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 348[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/critical-user-flows.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 19[2mms[22m[39m
stderr | tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should render dashboard title
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/workflow-integration.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/validation.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/ai/evaluation-suite.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/auth.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/gap-analysis.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests
[22m[39m[32m2026-01-17T16:18:37.776Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests
[22m[39m[32m2026-01-17T16:18:37.782Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests
[22m[39m[32m2026-01-17T16:18:37.782Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests
[22m[39m[32m2026-01-17T16:18:37.783Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests
[22m[39m[32m2026-01-17T16:18:37.788Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mHealth Endpoints[2m > [22m[2mshould return system health status
[22m[39m[32m2026-01-17T16:18:38.121Z [INFO] GET /health {"method":"GET","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.121Z"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould return document templates
[22m[39m{"type":"request_start","traceId":"a14f2aec-e55f-4641-bc1a-aa26d93f68c8","spanId":"7596dfa4","method":"GET","path":"/api/document-templates","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.124Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mPublic Endpoints[2m > [22m[2mshould allow access to health check
[22m[39m[32m2026-01-17T16:18:38.122Z [INFO] GET /health {"method":"GET","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.122Z"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould return document templates
[22m[39m[32m2026-01-17T16:18:38.126Z [INFO] GET /api/document-templates {"method":"GET","url":"/api/document-templates","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.126Z"}[0m
[32m2026-01-17T16:18:38.131Z [INFO] API route accessed {"path":"/api/document-templates","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mOrganization Setup[2m > [22m[2mshould require authentication for organization creation
[22m[39m{"type":"request_start","traceId":"d3b8a6ae-6068-44f9-a51c-053cb82f944e","spanId":"19a6dc4a","method":"POST","path":"/api/organizations","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.146Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Creation[2m > [22m[2mshould require authentication for gap analysis
[22m[39m{"type":"request_start","traceId":"1ec67cbd-c9fb-430a-a3e9-75e16c316905","spanId":"6655dfda","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.147Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould return document templates
[22m[39m{"type":"request_end","traceId":"a14f2aec-e55f-4641-bc1a-aa26d93f68c8","spanId":"7596dfa4","method":"GET","path":"/","statusCode":200,"duration":26,"timestamp":"2026-01-17T16:18:38.149Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mOrganization Setup[2m > [22m[2mshould require authentication for organization creation
[22m[39m[32m2026-01-17T16:18:38.148Z [INFO] POST /api/organizations {"method":"POST","url":"/api/organizations","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.148Z"}[0m
[32m2026-01-17T16:18:38.150Z [INFO] API route accessed {"path":"/api/organizations","method":"POST","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/documents.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mOrganization Setup[2m > [22m[2mshould require authentication for organization creation
[22m[39m{"type":"request_end","traceId":"d3b8a6ae-6068-44f9-a51c-053cb82f944e","spanId":"19a6dc4a","method":"POST","path":"/api/organizations","statusCode":401,"duration":16,"timestamp":"2026-01-17T16:18:38.158Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis
2026-01-17T16:18:38.156Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Creation[2m > [22m[2mshould require authentication for gap analysis
[22m[39m[32m2026-01-17T16:18:38.150Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.150Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Creation[2m > [22m[2mshould require authentication for gap analysis
[22m[39m{"type":"request_end","traceId":"1ec67cbd-c9fb-430a-a3e9-75e16c316905","spanId":"6655dfda","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":24,"timestamp":"2026-01-17T16:18:38.171Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mOrganization Setup[2m > [22m[2mshould require authentication to list organizations
[22m[39m{"type":"request_start","traceId":"dd703295-abb2-4b5c-8c24-6e6971f928e7","spanId":"09f528c2","method":"GET","path":"/api/organizations","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.177Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould get a specific template by ID
[22m[39m{"type":"request_start","traceId":"8fe480d1-0d75-4c4e-b463-8094e9bf8ec1","spanId":"3fd910f3","method":"GET","path":"/api/document-templates","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.180Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mOrganization Setup[2m > [22m[2mshould require authentication to list organizations
[22m[39m[32m2026-01-17T16:18:38.178Z [INFO] GET /api/organizations {"method":"GET","url":"/api/organizations","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.178Z"}[0m
[32m2026-01-17T16:18:38.179Z [INFO] API route accessed {"path":"/api/organizations","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould get a specific template by ID
[22m[39m[32m2026-01-17T16:18:38.181Z [INFO] GET /api/document-templates {"method":"GET","url":"/api/document-templates","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.181Z"}[0m
[32m2026-01-17T16:18:38.181Z [INFO] API route accessed {"path":"/api/document-templates","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mOrganization Setup[2m > [22m[2mshould require authentication to list organizations
[22m[39m{"type":"request_end","traceId":"dd703295-abb2-4b5c-8c24-6e6971f928e7","spanId":"09f528c2","method":"GET","path":"/api/organizations","statusCode":401,"duration":6,"timestamp":"2026-01-17T16:18:38.183Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Creation[2m > [22m[2mshould require authentication to update recommendations
[22m[39m{"type":"request_start","traceId":"3d44efce-3c2f-44a7-bd05-69266c22588c","spanId":"268eeef8","method":"PATCH","path":"/api/gap-analysis/recommendations/test-id","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.186Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mCompany Profile Creation[2m > [22m[2mshould require authentication for company profile creation
[22m[39m{"type":"request_start","traceId":"321467c6-c7cb-417e-a8a3-d7ce2214dda6","spanId":"993d8788","method":"POST","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.191Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould get a specific template by ID
[22m[39m{"type":"request_end","traceId":"8fe480d1-0d75-4c4e-b463-8094e9bf8ec1","spanId":"3fd910f3","method":"GET","path":"/","statusCode":200,"duration":17,"timestamp":"2026-01-17T16:18:38.197Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Creation[2m > [22m[2mshould require authentication to update recommendations
[22m[39m[32m2026-01-17T16:18:38.187Z [INFO] PATCH /api/gap-analysis/recommendations/test-id {"method":"PATCH","url":"/api/gap-analysis/recommendations/test-id","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.187Z"}[0m
[32m2026-01-17T16:18:38.188Z [INFO] API route accessed {"path":"/api/gap-analysis/recommendations/test-id","method":"PATCH","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mCompany Profile Creation[2m > [22m[2mshould require authentication for company profile creation
[22m[39m[32m2026-01-17T16:18:38.196Z [INFO] POST /api/company-profiles {"method":"POST","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.196Z"}[0m
[32m2026-01-17T16:18:38.197Z [INFO] API route accessed {"path":"/api/company-profiles","method":"POST","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Creation[2m > [22m[2mshould require authentication to update recommendations
[22m[39m{"type":"request_end","traceId":"3d44efce-3c2f-44a7-bd05-69266c22588c","spanId":"268eeef8","method":"PATCH","path":"/api/gap-analysis/recommendations/test-id","statusCode":401,"duration":10,"timestamp":"2026-01-17T16:18:38.196Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mCompany Profile Creation[2m > [22m[2mshould require authentication for company profile creation
[22m[39m{"type":"request_end","traceId":"321467c6-c7cb-417e-a8a3-d7ce2214dda6","spanId":"993d8788","method":"POST","path":"/api/company-profiles","statusCode":401,"duration":9,"timestamp":"2026-01-17T16:18:38.199Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Analysis Endpoint[2m > [22m[2mshould analyze compliance gaps
[22m[39m{"type":"request_start","traceId":"30d22788-eaf0-470e-8dc1-3ce222654d0e","spanId":"3c045a26","method":"POST","path":"/api/analyze-compliance-gaps","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.204Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mCompany Profile Creation[2m > [22m[2mshould require authentication to get company profile
[22m[39m{"type":"request_start","traceId":"46cd1321-2bfe-452e-b0fd-da4abc9ef9cc","spanId":"77fa5828","method":"GET","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.208Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Analysis Endpoint > should analyze compliance gaps
2026-01-17T16:18:38.205Z [WARN] Unknown API route accessed {"path":"/api/analyze-compliance-gaps","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Analysis Endpoint[2m > [22m[2mshould analyze compliance gaps
[22m[39m[32m2026-01-17T16:18:38.205Z [INFO] POST /api/analyze-compliance-gaps {"method":"POST","url":"/api/analyze-compliance-gaps","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.205Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Analysis Endpoint[2m > [22m[2mshould analyze compliance gaps
[22m[39m{"type":"request_end","traceId":"30d22788-eaf0-470e-8dc1-3ce222654d0e","spanId":"3c045a26","method":"POST","path":"/api/analyze-compliance-gaps","statusCode":401,"duration":5,"timestamp":"2026-01-17T16:18:38.209Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mCompany Profile Creation[2m > [22m[2mshould require authentication to get company profile
[22m[39m[32m2026-01-17T16:18:38.209Z [INFO] GET /api/company-profiles {"method":"GET","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.209Z"}[0m
[32m2026-01-17T16:18:38.210Z [INFO] API route accessed {"path":"/api/company-profiles","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stderr | tests/integration/api.test.ts > API Integration Tests > Health Endpoints > should return system health status
2026-01-17T16:18:38.213Z [ERROR] Database health check failed {"error":"Unknown error"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mCompany Profile Creation[2m > [22m[2mshould require authentication to get company profile
[22m[39m{"type":"request_end","traceId":"46cd1321-2bfe-452e-b0fd-da4abc9ef9cc","spanId":"77fa5828","method":"GET","path":"/api/company-profiles","statusCode":401,"duration":5,"timestamp":"2026-01-17T16:18:38.213Z"}

stderr | tests/integration/auth.test.ts > Authentication Integration Tests > Public Endpoints > should allow access to health check
2026-01-17T16:18:38.215Z [ERROR] Database health check failed {"error":"Unknown error"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle SOC2 framework gap analysis request
[22m[39m{"type":"request_start","traceId":"d0828e03-729a-4955-a6c6-da77e7303bf5","spanId":"35bc7ed3","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.218Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle SOC2 framework gap analysis request
[22m[39m[32m2026-01-17T16:18:38.218Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.218Z"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request
2026-01-17T16:18:38.219Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}
[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle SOC2 framework gap analysis request
[22m[39m{"type":"request_end","traceId":"d0828e03-729a-4955-a6c6-da77e7303bf5","spanId":"35bc7ed3","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":14,"timestamp":"2026-01-17T16:18:38.232Z"}


[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mInitial Framework Selection[2m > [22m[2mshould require authentication to update framework preferences
[22m[39m{"type":"request_start","traceId":"0bcf715f-64bf-4a82-ba37-e793e48936f0","spanId":"74bca3eb","method":"PATCH","path":"/api/company-profiles/1","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.232Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould get a specific template by ID
[22m[39m{"type":"request_start","traceId":"0b28a0ef-8279-452f-b805-a041a1b2b470","spanId":"db12b6ab","method":"GET","path":"/api/document-templates/iso-001","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.233Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences
2026-01-17T16:18:38.233Z [WARN] Unknown API route accessed {"path":"/api/company-profiles/1","method":"PATCH","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mInitial Framework Selection[2m > [22m[2mshould require authentication to update framework preferences
[22m[39m[32m2026-01-17T16:18:38.232Z [INFO] PATCH /api/company-profiles/1 {"method":"PATCH","url":"/api/company-profiles/1","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.232Z"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mOnboarding Flow[2m > [22m[2mInitial Framework Selection[2m > [22m[2mshould require authentication to update framework preferences
[22m[39m{"type":"request_end","traceId":"0bcf715f-64bf-4a82-ba37-e793e48936f0","spanId":"74bca3eb","method":"PATCH","path":"/api/company-profiles/1","statusCode":401,"duration":15,"timestamp":"2026-01-17T16:18:38.235Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould get a specific template by ID
[22m[39m[32m2026-01-17T16:18:38.234Z [INFO] GET /api/document-templates/iso-001 {"method":"GET","url":"/api/document-templates/iso-001","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.234Z"}[0m
[32m2026-01-17T16:18:38.235Z [INFO] API route accessed {"path":"/api/document-templates/iso-001","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Templates[2m > [22m[2mshould get a specific template by ID
[22m[39m{"type":"request_end","traceId":"0b28a0ef-8279-452f-b805-a041a1b2b470","spanId":"db12b6ab","method":"GET","path":"/iso-001","statusCode":200,"duration":4,"timestamp":"2026-01-17T16:18:38.237Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle ISO27001 framework gap analysis request
[22m[39m{"type":"request_start","traceId":"7f00d673-31bc-4024-a7ae-107fa88bc5d2","spanId":"9f11edcb","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.238Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request
2026-01-17T16:18:38.239Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould require authentication for AI document generation
[22m[39m{"type":"request_start","traceId":"448c3655-298b-40c3-9dd3-a63aed6910b2","spanId":"1fc3b621","method":"POST","path":"/api/ai/generate-compliance-docs","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.240Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle ISO27001 framework gap analysis request
[22m[39m[32m2026-01-17T16:18:38.239Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.239Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle ISO27001 framework gap analysis request
[22m[39m{"type":"request_end","traceId":"7f00d673-31bc-4024-a7ae-107fa88bc5d2","spanId":"9f11edcb","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.241Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould require authentication for AI document generation
[22m[39m[32m2026-01-17T16:18:38.241Z [INFO] POST /api/ai/generate-compliance-docs {"method":"POST","url":"/api/ai/generate-compliance-docs","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.241Z"}[0m
[32m2026-01-17T16:18:38.241Z [INFO] API route accessed {"path":"/api/ai/generate-compliance-docs","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould require authentication for AI document generation
[22m[39m{"type":"request_end","traceId":"448c3655-298b-40c3-9dd3-a63aed6910b2","spanId":"1fc3b621","method":"POST","path":"/api/ai/generate-compliance-docs","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.243Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mHealth Endpoints[2m > [22m[2mshould return AI health status
[22m[39m[32m2026-01-17T16:18:38.242Z [INFO] GET /api/ai/health {"method":"GET","url":"/api/ai/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.242Z"}[0m
[32m2026-01-17T16:18:38.244Z [INFO] API route accessed {"path":"/api/ai/health","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould require authentication for AI document analysis
[22m[39m{"type":"request_start","traceId":"a97676ff-0690-4b26-9286-09990abe3065","spanId":"f6697338","method":"POST","path":"/api/ai/analyze-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.247Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould require authentication for AI document analysis
[22m[39m[32m2026-01-17T16:18:38.248Z [INFO] POST /api/ai/analyze-document {"method":"POST","url":"/api/ai/analyze-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.248Z"}[0m
[32m2026-01-17T16:18:38.249Z [INFO] API route accessed {"path":"/api/ai/analyze-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle FedRAMP framework gap analysis request
[22m[39m{"type":"request_start","traceId":"58592b41-8367-4609-8b5f-2decd4ebd35f","spanId":"e65ec4bc","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.250Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould require authentication for AI document analysis
[22m[39m{"type":"request_end","traceId":"a97676ff-0690-4b26-9286-09990abe3065","spanId":"f6697338","method":"POST","path":"/api/ai/analyze-document","statusCode":401,"duration":4,"timestamp":"2026-01-17T16:18:38.251Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mPublic Endpoints[2m > [22m[2mshould allow access to AI health endpoint
[22m[39m[32m2026-01-17T16:18:38.244Z [INFO] GET /api/ai/health {"method":"GET","url":"/api/ai/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.244Z"}[0m
[32m2026-01-17T16:18:38.249Z [INFO] API route accessed {"path":"/api/ai/health","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request
2026-01-17T16:18:38.252Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle FedRAMP framework gap analysis request
[22m[39m[32m2026-01-17T16:18:38.251Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.251Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle FedRAMP framework gap analysis request
[22m[39m{"type":"request_end","traceId":"58592b41-8367-4609-8b5f-2decd4ebd35f","spanId":"e65ec4bc","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":4,"timestamp":"2026-01-17T16:18:38.254Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Generation Endpoints[2m > [22m[2mshould require authentication for document generation
[22m[39m{"type":"request_start","traceId":"e7d676ee-0db8-4c4c-9c1e-0d1571c31858","spanId":"8dc5e6e0","method":"POST","path":"/api/documents/generate","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.257Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for user profile
[22m[39m{"type":"request_start","traceId":"c7e3e22b-fe70-472f-ac1b-36d24f6c41b7","spanId":"f21de73e","method":"GET","path":"/api/auth/user","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.258Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mDocument Generation[2m > [22m[2mshould return AI service health status
[22m[39m[32m2026-01-17T16:18:38.259Z [INFO] GET /api/ai/health {"method":"GET","url":"/api/ai/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.259Z"}[0m
[32m2026-01-17T16:18:38.259Z [INFO] API route accessed {"path":"/api/ai/health","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle NIST framework gap analysis request
[22m[39m{"type":"request_start","traceId":"9a84e695-cab1-43ba-9869-a2fb22c60334","spanId":"733d1342","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.260Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle NIST framework gap analysis request
[22m[39m[32m2026-01-17T16:18:38.260Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.260Z"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request
2026-01-17T16:18:38.261Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Frameworks[2m > [22m[2mshould handle NIST framework gap analysis request
[22m[39m{"type":"request_end","traceId":"9a84e695-cab1-43ba-9869-a2fb22c60334","spanId":"733d1342","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.262Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for /api/auth/user
[22m[39m{"type":"request_start","traceId":"3965fbc7-423f-4dcd-b2dd-d7009805438b","spanId":"3e07e769","method":"GET","path":"/api/auth/user","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.263Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Generation Endpoints[2m > [22m[2mshould require authentication for document generation
[22m[39m[32m2026-01-17T16:18:38.258Z [INFO] POST /api/documents/generate {"method":"POST","url":"/api/documents/generate","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.258Z"}[0m
[32m2026-01-17T16:18:38.259Z [INFO] API route accessed {"path":"/api/documents/generate","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Generation Endpoints[2m > [22m[2mshould require authentication for document generation
[22m[39m{"type":"request_end","traceId":"e7d676ee-0db8-4c4c-9c1e-0d1571c31858","spanId":"8dc5e6e0","method":"POST","path":"/api/documents/generate","statusCode":401,"duration":9,"timestamp":"2026-01-17T16:18:38.266Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for user profile
[22m[39m[32m2026-01-17T16:18:38.259Z [INFO] GET /api/auth/user {"method":"GET","url":"/api/auth/user","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.259Z"}[0m
[32m2026-01-17T16:18:38.259Z [INFO] API route accessed {"path":"/api/auth/user","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mDocument Quality for Compliance[2m > [22m[2mshould analyze document quality against framework
[22m[39m{"type":"request_start","traceId":"84591479-3fc9-4485-a1ea-c8764bb87223","spanId":"b9a3c442","method":"POST","path":"/api/analyze-document-quality","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.267Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for user profile
[22m[39m{"type":"request_end","traceId":"c7e3e22b-fe70-472f-ac1b-36d24f6c41b7","spanId":"f21de73e","method":"GET","path":"/api/auth/user","statusCode":401,"duration":10,"timestamp":"2026-01-17T16:18:38.268Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mDocument Quality for Compliance[2m > [22m[2mshould analyze document quality against framework
[22m[39m[32m2026-01-17T16:18:38.268Z [INFO] POST /api/analyze-document-quality {"method":"POST","url":"/api/analyze-document-quality","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.268Z"}[0m
[32m2026-01-17T16:18:38.268Z [INFO] API route accessed {"path":"/api/analyze-document-quality","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mEvidence Upload[2m > [22m[2mshould require authentication for evidence upload
[22m[39m{"type":"request_start","traceId":"72cc9ac8-c058-47c8-82c9-ec65111f08cc","spanId":"caaff940","method":"POST","path":"/api/evidence","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.270Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mDocument Quality for Compliance[2m > [22m[2mshould analyze document quality against framework
[22m[39m{"type":"request_end","traceId":"84591479-3fc9-4485-a1ea-c8764bb87223","spanId":"b9a3c442","method":"POST","path":"/api/analyze-document-quality","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.269Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Generation Endpoints[2m > [22m[2mshould require authentication for document upload
[22m[39m{"type":"request_start","traceId":"4cfcf935-b786-4e68-baa9-799adf1c4636","spanId":"133c2211","method":"POST","path":"/api/documents/upload-and-extract","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.272Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload
2026-01-17T16:18:38.271Z [WARN] Unknown API route accessed {"path":"/api/evidence","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mEvidence Upload[2m > [22m[2mshould require authentication for evidence upload
[22m[39m[32m2026-01-17T16:18:38.271Z [INFO] POST /api/evidence {"method":"POST","url":"/api/evidence","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.271Z"}[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for company profiles
[22m[39m{"type":"request_start","traceId":"9eb6d438-92e5-409b-933a-f8701cea8430","spanId":"ebf2fd1b","method":"GET","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.273Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mEvidence Upload[2m > [22m[2mshould require authentication for evidence upload
[22m[39m{"type":"request_end","traceId":"72cc9ac8-c058-47c8-82c9-ec65111f08cc","spanId":"caaff940","method":"POST","path":"/api/evidence","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.273Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for /api/auth/user
[22m[39m[32m2026-01-17T16:18:38.264Z [INFO] GET /api/auth/user {"method":"GET","url":"/api/auth/user","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.264Z"}[0m
[32m2026-01-17T16:18:38.264Z [INFO] API route accessed {"path":"/api/auth/user","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for /api/auth/user
[22m[39m{"type":"request_end","traceId":"3965fbc7-423f-4dcd-b2dd-d7009805438b","spanId":"3e07e769","method":"GET","path":"/api/auth/user","statusCode":401,"duration":12,"timestamp":"2026-01-17T16:18:38.275Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Generation Endpoints[2m > [22m[2mshould require authentication for document upload
[22m[39m[32m2026-01-17T16:18:38.273Z [INFO] POST /api/documents/upload-and-extract {"method":"POST","url":"/api/documents/upload-and-extract","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.273Z"}[0m
[32m2026-01-17T16:18:38.273Z [INFO] API route accessed {"path":"/api/documents/upload-and-extract","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for company profiles
[22m[39m[32m2026-01-17T16:18:38.274Z [INFO] GET /api/company-profiles {"method":"GET","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.274Z"}[0m
[32m2026-01-17T16:18:38.274Z [INFO] API route accessed {"path":"/api/company-profiles","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Generation Endpoints[2m > [22m[2mshould require authentication for document upload
[22m[39m{"type":"request_end","traceId":"4cfcf935-b786-4e68-baa9-799adf1c4636","spanId":"133c2211","method":"POST","path":"/api/documents/upload-and-extract","statusCode":401,"duration":4,"timestamp":"2026-01-17T16:18:38.276Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for company profiles
[22m[39m{"type":"request_end","traceId":"9eb6d438-92e5-409b-933a-f8701cea8430","spanId":"ebf2fd1b","method":"GET","path":"/api/company-profiles","statusCode":401,"duration":4,"timestamp":"2026-01-17T16:18:38.277Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Reports[2m > [22m[2mshould require authentication for report access
[22m[39m{"type":"request_start","traceId":"471611a5-ecba-43a1-a96c-b4b5be84b6d4","spanId":"b6ccfb5b","method":"GET","path":"/api/gap-analysis/reports","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.277Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mEvidence Upload[2m > [22m[2mshould require authentication to list evidence
[22m[39m{"type":"request_start","traceId":"90553dce-8f3a-4da6-8355-2d3b055e5718","spanId":"f83c88a1","method":"GET","path":"/api/evidence","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.278Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Reports[2m > [22m[2mshould require authentication for report access
[22m[39m[32m2026-01-17T16:18:38.278Z [INFO] GET /api/gap-analysis/reports {"method":"GET","url":"/api/gap-analysis/reports","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.278Z"}[0m
[32m2026-01-17T16:18:38.279Z [INFO] API route accessed {"path":"/api/gap-analysis/reports","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for /api/company-profiles
[22m[39m{"type":"request_start","traceId":"87b78e32-0492-4c5d-b8dc-4892db5d936c","spanId":"999116ac","method":"GET","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.282Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Export[2m > [22m[2mshould export document as markdown
[22m[39m{"type":"request_start","traceId":"815036a7-fd84-46cd-8c20-4aa7de3bdf2a","spanId":"d1c66ed2","method":"POST","path":"/api/export-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.282Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mEvidence Upload[2m > [22m[2mshould require authentication to list evidence
[22m[39m[32m2026-01-17T16:18:38.279Z [INFO] GET /api/evidence {"method":"GET","url":"/api/evidence","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.279Z"}[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for documents
[22m[39m{"type":"request_start","traceId":"94496ffe-e109-4e1a-8f8a-e0427e0f84af","spanId":"aa6e6d83","method":"GET","path":"/api/documents","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.282Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence
2026-01-17T16:18:38.281Z [WARN] Unknown API route accessed {"path":"/api/evidence","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mEvidence Upload[2m > [22m[2mshould require authentication to list evidence
[22m[39m{"type":"request_end","traceId":"90553dce-8f3a-4da6-8355-2d3b055e5718","spanId":"f83c88a1","method":"GET","path":"/api/evidence","statusCode":401,"duration":5,"timestamp":"2026-01-17T16:18:38.283Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Reports[2m > [22m[2mshould require authentication for report access
[22m[39m{"type":"request_end","traceId":"471611a5-ecba-43a1-a96c-b4b5be84b6d4","spanId":"b6ccfb5b","method":"GET","path":"/api/gap-analysis/reports","statusCode":401,"duration":6,"timestamp":"2026-01-17T16:18:38.283Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for documents
[22m[39m[32m2026-01-17T16:18:38.283Z [INFO] GET /api/documents {"method":"GET","url":"/api/documents","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.283Z"}[0m
[32m2026-01-17T16:18:38.283Z [INFO] API route accessed {"path":"/api/documents","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for /api/company-profiles
[22m[39m[32m2026-01-17T16:18:38.282Z [INFO] GET /api/company-profiles {"method":"GET","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.282Z"}[0m
[32m2026-01-17T16:18:38.283Z [INFO] API route accessed {"path":"/api/company-profiles","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Export[2m > [22m[2mshould export document as markdown
[22m[39m[32m2026-01-17T16:18:38.283Z [INFO] POST /api/export-document {"method":"POST","url":"/api/export-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.283Z"}[0m
[32m2026-01-17T16:18:38.283Z [INFO] API route accessed {"path":"/api/export-document","method":"POST","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mAuthentication Required Endpoints[2m > [22m[2mshould require authentication for documents
[22m[39m{"type":"request_end","traceId":"94496ffe-e109-4e1a-8f8a-e0427e0f84af","spanId":"aa6e6d83","method":"GET","path":"/api/documents","statusCode":401,"duration":5,"timestamp":"2026-01-17T16:18:38.287Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Export[2m > [22m[2mshould export document as markdown
[22m[39m{"type":"request_end","traceId":"815036a7-fd84-46cd-8c20-4aa7de3bdf2a","spanId":"d1c66ed2","method":"POST","path":"/export-document","statusCode":200,"duration":5,"timestamp":"2026-01-17T16:18:38.287Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for /api/company-profiles
[22m[39m{"type":"request_end","traceId":"87b78e32-0492-4c5d-b8dc-4892db5d936c","spanId":"999116ac","method":"GET","path":"/api/company-profiles","statusCode":401,"duration":6,"timestamp":"2026-01-17T16:18:38.288Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mControl Approvals[2m > [22m[2mshould require authentication to list pending approvals
[22m[39m{"type":"request_start","traceId":"7ba7bdca-dc85-4c9e-8b89-f3b5147fb69f","spanId":"045fd91c","method":"GET","path":"/api/controls/approvals","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.289Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Reports[2m > [22m[2mshould require authentication for specific report
[22m[39m{"type":"request_start","traceId":"f1cf3a55-f39f-4603-8456-5d04cdf79738","spanId":"26f90d7e","method":"GET","path":"/api/gap-analysis/reports/test-report-id","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.291Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mControl Approvals[2m > [22m[2mshould require authentication to list pending approvals
[22m[39m[32m2026-01-17T16:18:38.290Z [INFO] GET /api/controls/approvals {"method":"GET","url":"/api/controls/approvals","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.290Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals
2026-01-17T16:18:38.291Z [WARN] Unknown API route accessed {"path":"/api/controls/approvals","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mControl Approvals[2m > [22m[2mshould require authentication to list pending approvals
[22m[39m{"type":"request_end","traceId":"7ba7bdca-dc85-4c9e-8b89-f3b5147fb69f","spanId":"045fd91c","method":"GET","path":"/api/controls/approvals","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.292Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Export[2m > [22m[2mshould handle export without content
[22m[39m{"type":"request_start","traceId":"184b9df5-f8ab-4b1f-af6c-132623b1da1b","spanId":"09946fdc","method":"POST","path":"/api/export-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.292Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Reports[2m > [22m[2mshould require authentication for specific report
[22m[39m[32m2026-01-17T16:18:38.292Z [INFO] GET /api/gap-analysis/reports/test-report-id {"method":"GET","url":"/api/gap-analysis/reports/test-report-id","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.292Z"}[0m
[32m2026-01-17T16:18:38.292Z [INFO] API route accessed {"path":"/api/gap-analysis/reports/test-report-id","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mGap Analysis Reports[2m > [22m[2mshould require authentication for specific report
[22m[39m{"type":"request_end","traceId":"f1cf3a55-f39f-4603-8456-5d04cdf79738","spanId":"26f90d7e","method":"GET","path":"/api/gap-analysis/reports/test-report-id","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.294Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Export[2m > [22m[2mshould handle export without content
[22m[39m[32m2026-01-17T16:18:38.293Z [INFO] POST /api/export-document {"method":"POST","url":"/api/export-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.293Z"}[0m
[32m2026-01-17T16:18:38.293Z [INFO] API route accessed {"path":"/api/export-document","method":"POST","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Export[2m > [22m[2mshould handle export without content
[22m[39m{"type":"request_end","traceId":"184b9df5-f8ab-4b1f-af6c-132623b1da1b","spanId":"09946fdc","method":"POST","path":"/export-document","statusCode":400,"duration":4,"timestamp":"2026-01-17T16:18:38.296Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mControl Approvals[2m > [22m[2mshould require authentication to approve a control
[22m[39m{"type":"request_start","traceId":"52f96530-4e1b-438d-94a7-b673652f84f0","spanId":"e0a9693f","method":"POST","path":"/api/controls/1/approve","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.297Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mControl Approvals[2m > [22m[2mshould require authentication to approve a control
[22m[39m[32m2026-01-17T16:18:38.297Z [INFO] POST /api/controls/1/approve {"method":"POST","url":"/api/controls/1/approve","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.297Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control
2026-01-17T16:18:38.298Z [WARN] Unknown API route accessed {"path":"/api/controls/1/approve","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAI Generation Flow[2m > [22m[2mControl Approvals[2m > [22m[2mshould require authentication to approve a control
[22m[39m{"type":"request_end","traceId":"52f96530-4e1b-438d-94a7-b673652f84f0","spanId":"e0a9693f","method":"POST","path":"/api/controls/1/approve","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.299Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument AI Generation[2m > [22m[2mshould reject generation request without framework
[22m[39m{"type":"request_start","traceId":"f40dd8b9-b881-4dcb-87fd-38b9bc9daf69","spanId":"1f404ac5","method":"POST","path":"/api/generate-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.307Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mRemediation Tracking[2m > [22m[2mshould require authentication for remediation updates
[22m[39m{"type":"request_start","traceId":"f88636f9-0d5e-4ad1-97ce-b19a58ee1034","spanId":"8ca38194","method":"PATCH","path":"/api/gap-analysis/recommendations/test-rec-id","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.309Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument AI Generation[2m > [22m[2mshould reject generation request without framework
[22m[39m[32m2026-01-17T16:18:38.308Z [INFO] POST /api/generate-document {"method":"POST","url":"/api/generate-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.308Z"}[0m
[32m2026-01-17T16:18:38.308Z [INFO] API route accessed {"path":"/api/generate-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/ai-components.test.tsx [2m([22m[2m48 tests[22m[2m)[22m[33m 2410[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AIInsightsDashboard[2m > [22mshould call onViewDetails when View All button is clicked [33m 306[2mms[22m[39m
[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument AI Generation[2m > [22m[2mshould reject generation request without framework
[22m[39m{"type":"request_end","traceId":"f40dd8b9-b881-4dcb-87fd-38b9bc9daf69","spanId":"1f404ac5","method":"POST","path":"/api/generate-document","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.310Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mData Validation[2m > [22m[2mshould validate company profile creation payload
[22m[39m{"type":"request_start","traceId":"25535213-94ba-4e7f-8feb-a4ed313ca929","spanId":"d790ba1f","method":"POST","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.311Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mRemediation Tracking[2m > [22m[2mshould require authentication for remediation updates
[22m[39m[32m2026-01-17T16:18:38.309Z [INFO] PATCH /api/gap-analysis/recommendations/test-rec-id {"method":"PATCH","url":"/api/gap-analysis/recommendations/test-rec-id","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.309Z"}[0m
[32m2026-01-17T16:18:38.310Z [INFO] API route accessed {"path":"/api/gap-analysis/recommendations/test-rec-id","method":"PATCH","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mRemediation Tracking[2m > [22m[2mshould require authentication for remediation updates
[22m[39m{"type":"request_end","traceId":"f88636f9-0d5e-4ad1-97ce-b19a58ee1034","spanId":"8ca38194","method":"PATCH","path":"/api/gap-analysis/recommendations/test-rec-id","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.311Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAudit Trail Access[2m > [22m[2mshould require authentication to view audit trail
[22m[39m{"type":"request_start","traceId":"1690fa46-949f-46ad-88e2-8c4e05f810cb","spanId":"86fafe37","method":"GET","path":"/api/audit-trail","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.312Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for document generation
[22m[39m{"type":"request_start","traceId":"6b82badf-50a4-4665-b809-50c527958b6f","spanId":"368999d2","method":"POST","path":"/api/documents/generate","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.312Z"}

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mData Validation[2m > [22m[2mshould validate company profile creation payload
[22m[39m[32m2026-01-17T16:18:38.312Z [INFO] POST /api/company-profiles {"method":"POST","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.311Z"}[0m
[32m2026-01-17T16:18:38.312Z [INFO] API route accessed {"path":"/api/company-profiles","method":"POST","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/api.test.ts[2m > [22m[2mAPI Integration Tests[2m > [22m[2mData Validation[2m > [22m[2mshould validate company profile creation payload
[22m[39m{"type":"request_end","traceId":"25535213-94ba-4e7f-8feb-a4ed313ca929","spanId":"d790ba1f","method":"POST","path":"/api/company-profiles","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.314Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail
2026-01-17T16:18:38.313Z [WARN] Unknown API route accessed {"path":"/api/audit-trail","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAudit Trail Access[2m > [22m[2mshould require authentication to view audit trail
[22m[39m[32m2026-01-17T16:18:38.313Z [INFO] GET /api/audit-trail {"method":"GET","url":"/api/audit-trail","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.313Z"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAudit Trail Access[2m > [22m[2mshould require authentication to view audit trail
[22m[39m{"type":"request_end","traceId":"1690fa46-949f-46ad-88e2-8c4e05f810cb","spanId":"86fafe37","method":"GET","path":"/api/audit-trail","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.314Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for document generation
[22m[39m[32m2026-01-17T16:18:38.313Z [INFO] POST /api/documents/generate {"method":"POST","url":"/api/documents/generate","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.313Z"}[0m
[32m2026-01-17T16:18:38.314Z [INFO] API route accessed {"path":"/api/documents/generate","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/api.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 594[2mms[22m[39m
[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for document generation
[22m[39m{"type":"request_end","traceId":"6b82badf-50a4-4665-b809-50c527958b6f","spanId":"368999d2","method":"POST","path":"/api/documents/generate","statusCode":401,"duration":4,"timestamp":"2026-01-17T16:18:38.316Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mRisk Assessment[2m > [22m[2mshould handle risk assessment requests
[22m[39m{"type":"request_start","traceId":"8f0118e2-1a35-4ca7-a33f-20fa7189dfe9","spanId":"5675ceb0","method":"POST","path":"/api/risk-assessment","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.317Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Quality Analysis[2m > [22m[2mshould require authentication for document quality analysis
[22m[39m{"type":"request_start","traceId":"e6500540-ce84-4a3b-b6ee-f6578f7636ec","spanId":"9ad0a66d","method":"POST","path":"/api/analyze-document-quality","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.318Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Risk Assessment > should handle risk assessment requests
2026-01-17T16:18:38.318Z [WARN] Unknown API route accessed {"path":"/api/risk-assessment","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mRisk Assessment[2m > [22m[2mshould handle risk assessment requests
[22m[39m[32m2026-01-17T16:18:38.318Z [INFO] POST /api/risk-assessment {"method":"POST","url":"/api/risk-assessment","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.318Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mRisk Assessment[2m > [22m[2mshould handle risk assessment requests
[22m[39m{"type":"request_end","traceId":"8f0118e2-1a35-4ca7-a33f-20fa7189dfe9","spanId":"5675ceb0","method":"POST","path":"/api/risk-assessment","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.319Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAudit Trail Access[2m > [22m[2mshould require authentication to get audit entry details
[22m[39m{"type":"request_start","traceId":"ccdea647-9244-4746-af9d-c7a8d5beafac","spanId":"baf6da80","method":"GET","path":"/api/audit-trail/1","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.319Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Quality Analysis[2m > [22m[2mshould require authentication for document quality analysis
[22m[39m[32m2026-01-17T16:18:38.318Z [INFO] POST /api/analyze-document-quality {"method":"POST","url":"/api/analyze-document-quality","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.318Z"}[0m
[32m2026-01-17T16:18:38.319Z [INFO] API route accessed {"path":"/api/analyze-document-quality","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Quality Analysis[2m > [22m[2mshould require authentication for document quality analysis
[22m[39m{"type":"request_end","traceId":"e6500540-ce84-4a3b-b6ee-f6578f7636ec","spanId":"9ad0a66d","method":"POST","path":"/api/analyze-document-quality","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.321Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAudit Trail Access[2m > [22m[2mshould require authentication to get audit entry details
[22m[39m[32m2026-01-17T16:18:38.320Z [INFO] GET /api/audit-trail/1 {"method":"GET","url":"/api/audit-trail/1","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.320Z"}[0m
[32m2026-01-17T16:18:38.320Z [INFO] API route accessed {"path":"/api/audit-trail/1","method":"GET","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for gap analysis
[22m[39m{"type":"request_start","traceId":"6dc0fe66-cef1-4be2-b79e-7d6cdf8b6b85","spanId":"575fda97","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.321Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAudit Trail Access[2m > [22m[2mshould require authentication to get audit entry details
[22m[39m{"type":"request_end","traceId":"ccdea647-9244-4746-af9d-c7a8d5beafac","spanId":"baf6da80","method":"GET","path":"/api/audit-trail/1","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.322Z"}

stderr | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for gap analysis
2026-01-17T16:18:38.322Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Scoring[2m > [22m[2mshould calculate compliance score
[22m[39m{"type":"request_start","traceId":"579d6191-9dbd-40c8-889f-165a2f4e7421","spanId":"90389d18","method":"POST","path":"/api/analyze-compliance-gaps","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.323Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for gap analysis
[22m[39m[32m2026-01-17T16:18:38.322Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.322Z"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for gap analysis
[22m[39m{"type":"request_end","traceId":"6dc0fe66-cef1-4be2-b79e-7d6cdf8b6b85","spanId":"575fda97","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.323Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Scoring > should calculate compliance score
2026-01-17T16:18:38.324Z [WARN] Unknown API route accessed {"path":"/api/analyze-compliance-gaps","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Scoring[2m > [22m[2mshould calculate compliance score
[22m[39m[32m2026-01-17T16:18:38.324Z [INFO] POST /api/analyze-compliance-gaps {"method":"POST","url":"/api/analyze-compliance-gaps","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.323Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mCompliance Scoring[2m > [22m[2mshould calculate compliance score
[22m[39m{"type":"request_end","traceId":"579d6191-9dbd-40c8-889f-165a2f4e7421","spanId":"90389d18","method":"POST","path":"/api/analyze-compliance-gaps","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.325Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication for auditor workspace access
[22m[39m{"type":"request_start","traceId":"3cae9b58-dc4a-4814-819f-fddec60da440","spanId":"33a43fc1","method":"GET","path":"/api/auditor/documents","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.326Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access
2026-01-17T16:18:38.327Z [WARN] Unknown API route accessed {"path":"/api/auditor/documents","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication for auditor workspace access
[22m[39m[32m2026-01-17T16:18:38.327Z [INFO] GET /api/auditor/documents {"method":"GET","url":"/api/auditor/documents","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.326Z"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication for auditor workspace access
[22m[39m{"type":"request_end","traceId":"3cae9b58-dc4a-4814-819f-fddec60da440","spanId":"33a43fc1","method":"GET","path":"/api/auditor/documents","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.328Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for audit logs
[22m[39m{"type":"request_start","traceId":"2e6d3f51-2c9d-4006-a139-07c793bf1bed","spanId":"ca7e94b7","method":"GET","path":"/api/audit-logs","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.328Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version history
[22m[39m{"type":"request_start","traceId":"ba5dbb3d-0604-43c5-83e9-35d66f191216","spanId":"acd73168","method":"GET","path":"/api/documents/test-id/versions","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.329Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mAI-Powered Analysis[2m > [22m[2mshould require authentication for AI gap analysis
[22m[39m{"type":"request_start","traceId":"455e6b9e-6476-4d8d-86ce-0399cce6fed1","spanId":"003fbcd4","method":"POST","path":"/api/ai/analyze-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.331Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mAI-Powered Analysis[2m > [22m[2mshould require authentication for AI gap analysis
[22m[39m[32m2026-01-17T16:18:38.337Z [INFO] POST /api/ai/analyze-document {"method":"POST","url":"/api/ai/analyze-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.337Z"}[0m
[32m2026-01-17T16:18:38.337Z [INFO] API route accessed {"path":"/api/ai/analyze-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version history
[22m[39m[32m2026-01-17T16:18:38.330Z [INFO] GET /api/documents/test-id/versions {"method":"GET","url":"/api/documents/test-id/versions","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.330Z"}[0m
[32m2026-01-17T16:18:38.331Z [INFO] API route accessed {"path":"/api/documents/test-id/versions","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stderr | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for audit logs
2026-01-17T16:18:38.337Z [WARN] Unknown API route accessed {"path":"/api/audit-logs","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for audit logs
[22m[39m[32m2026-01-17T16:18:38.329Z [INFO] GET /api/audit-logs {"method":"GET","url":"/api/audit-logs","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.329Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mAI-Powered Analysis[2m > [22m[2mshould require authentication for AI gap analysis
[22m[39m{"type":"request_end","traceId":"455e6b9e-6476-4d8d-86ce-0399cce6fed1","spanId":"003fbcd4","method":"POST","path":"/api/ai/analyze-document","statusCode":401,"duration":8,"timestamp":"2026-01-17T16:18:38.339Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version history
[22m[39m{"type":"request_end","traceId":"ba5dbb3d-0604-43c5-83e9-35d66f191216","spanId":"acd73168","method":"GET","path":"/api/documents/test-id/versions","statusCode":401,"duration":10,"timestamp":"2026-01-17T16:18:38.339Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for audit logs
[22m[39m{"type":"request_end","traceId":"2e6d3f51-2c9d-4006-a139-07c793bf1bed","spanId":"ca7e94b7","method":"GET","path":"/api/audit-logs","statusCode":401,"duration":11,"timestamp":"2026-01-17T16:18:38.340Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication to view compliance overview
[22m[39m{"type":"request_start","traceId":"76a01b48-3b27-4b55-a558-094b60e64a38","spanId":"3fea4d6f","method":"GET","path":"/api/auditor/overview","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.343Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication to view compliance overview
[22m[39m[32m2026-01-17T16:18:38.343Z [INFO] GET /api/auditor/overview {"method":"GET","url":"/api/auditor/overview","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.343Z"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mFramework Requirements[2m > [22m[2mshould return framework control requirements
[22m[39m{"type":"request_start","traceId":"25a67e15-d4dc-40ea-ae67-f88816a2a063","spanId":"f1c8f258","method":"GET","path":"/api/frameworks/SOC2/required-templates","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.345Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview
2026-01-17T16:18:38.343Z [WARN] Unknown API route accessed {"path":"/api/auditor/overview","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication to view compliance overview
[22m[39m{"type":"request_end","traceId":"76a01b48-3b27-4b55-a558-094b60e64a38","spanId":"3fea4d6f","method":"GET","path":"/api/auditor/overview","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.345Z"}

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mFramework Requirements[2m > [22m[2mshould return framework control requirements
[22m[39m[32m2026-01-17T16:18:38.345Z [INFO] GET /api/frameworks/SOC2/required-templates {"method":"GET","url":"/api/frameworks/SOC2/required-templates","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.345Z"}[0m
[32m2026-01-17T16:18:38.345Z [INFO] API route accessed {"path":"/api/frameworks/SOC2/required-templates","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/gap-analysis.test.ts[2m > [22m[2mGap Analysis Integration Tests[2m > [22m[2mFramework Requirements[2m > [22m[2mshould return framework control requirements
[22m[39m{"type":"request_end","traceId":"25a67e15-d4dc-40ea-ae67-f88816a2a063","spanId":"f1c8f258","method":"GET","path":"/api/frameworks/SOC2/required-templates","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.347Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for MFA setup
[22m[39m{"type":"request_start","traceId":"7fee5aa2-0b00-4ada-ae8e-769aa29614df","spanId":"db382019","method":"POST","path":"/api/auth/mfa/setup","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.348Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication to export audit reports
[22m[39m{"type":"request_start","traceId":"990c5349-6d19-4e21-beea-528ce0868724","spanId":"da76b197","method":"GET","path":"/api/auditor/export","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.349Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for MFA setup
[22m[39m[32m2026-01-17T16:18:38.348Z [INFO] POST /api/auth/mfa/setup {"method":"POST","url":"/api/auth/mfa/setup","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.348Z"}[0m
[32m2026-01-17T16:18:38.349Z [INFO] API route accessed {"path":"/api/auth/mfa/setup","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication to export audit reports
[22m[39m[32m2026-01-17T16:18:38.349Z [INFO] GET /api/auditor/export {"method":"GET","url":"/api/auditor/export","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.349Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports
2026-01-17T16:18:38.349Z [WARN] Unknown API route accessed {"path":"/api/auditor/export","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version creation
[22m[39m{"type":"request_start","traceId":"27c3cab3-c734-4e99-ab93-bcf95ff3d873","spanId":"a6b16699","method":"POST","path":"/api/documents/test-id/versions","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.350Z"}

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/gap-analysis.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 621[2mms[22m[39m
[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mAuditor Workspace[2m > [22m[2mshould require authentication to export audit reports
[22m[39m{"type":"request_end","traceId":"990c5349-6d19-4e21-beea-528ce0868724","spanId":"da76b197","method":"GET","path":"/api/auditor/export","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.351Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version creation
[22m[39m[32m2026-01-17T16:18:38.350Z [INFO] POST /api/documents/test-id/versions {"method":"POST","url":"/api/documents/test-id/versions","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.350Z"}[0m
[32m2026-01-17T16:18:38.351Z [INFO] API route accessed {"path":"/api/documents/test-id/versions","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mProtected Endpoints[2m > [22m[2mshould require authentication for MFA setup
[22m[39m{"type":"request_end","traceId":"7fee5aa2-0b00-4ada-ae8e-769aa29614df","spanId":"db382019","method":"POST","path":"/setup","statusCode":401,"duration":4,"timestamp":"2026-01-17T16:18:38.352Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version creation
[22m[39m{"type":"request_end","traceId":"27c3cab3-c734-4e99-ab93-bcf95ff3d873","spanId":"a6b16699","method":"POST","path":"/api/documents/test-id/versions","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.352Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mGap Analysis[2m > [22m[2mshould require authentication for gap analysis
[22m[39m{"type":"request_start","traceId":"ab7fa031-a277-4a1c-8278-fcbace8436f2","spanId":"dde8c822","method":"GET","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.355Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mGap Analysis[2m > [22m[2mshould require authentication for gap analysis
[22m[39m[32m2026-01-17T16:18:38.355Z [INFO] GET /api/gap-analysis {"method":"GET","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.355Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis
2026-01-17T16:18:38.356Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mGap Analysis[2m > [22m[2mshould require authentication for gap analysis
[22m[39m{"type":"request_end","traceId":"ab7fa031-a277-4a1c-8278-fcbace8436f2","spanId":"dde8c822","method":"GET","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.357Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version restore
[22m[39m{"type":"request_start","traceId":"c010b81d-984c-4ca0-b5ea-0a1b975af843","spanId":"b821e1bf","method":"POST","path":"/api/documents/123/versions/1/restore","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.358Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mSession Handling[2m > [22m[2mshould return 401 for invalid session
[22m[39m{"type":"request_start","traceId":"05583e7a-74b1-440d-8b9e-b1795bd315a8","spanId":"5f7a20af","method":"GET","path":"/api/auth/user","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.359Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mGap Analysis[2m > [22m[2mshould require authentication for gap analysis by framework
[22m[39m{"type":"request_start","traceId":"38c851fe-b44f-457d-be0a-94c6561bf05d","spanId":"d4a10924","method":"GET","path":"/api/gap-analysis/ISO27001","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.372Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version restore
[22m[39m[32m2026-01-17T16:18:38.358Z [INFO] POST /api/documents/123/versions/1/restore {"method":"POST","url":"/api/documents/123/versions/1/restore","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.358Z"}[0m
[32m2026-01-17T16:18:38.359Z [INFO] API route accessed {"path":"/api/documents/123/versions/1/restore","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mSession Handling[2m > [22m[2mshould return 401 for invalid session
[22m[39m[32m2026-01-17T16:18:38.366Z [INFO] GET /api/auth/user {"method":"GET","url":"/api/auth/user","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.366Z"}[0m
[32m2026-01-17T16:18:38.367Z [INFO] API route accessed {"path":"/api/auth/user","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mGap Analysis[2m > [22m[2mshould require authentication for gap analysis by framework
[22m[39m[32m2026-01-17T16:18:38.372Z [INFO] GET /api/gap-analysis/ISO27001 {"method":"GET","url":"/api/gap-analysis/ISO27001","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.372Z"}[0m
[32m2026-01-17T16:18:38.372Z [INFO] API route accessed {"path":"/api/gap-analysis/ISO27001","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Versioning[2m > [22m[2mshould require authentication for version restore
[22m[39m{"type":"request_end","traceId":"c010b81d-984c-4ca0-b5ea-0a1b975af843","spanId":"b821e1bf","method":"POST","path":"/api/documents/123/versions/1/restore","statusCode":401,"duration":9,"timestamp":"2026-01-17T16:18:38.367Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mSession Handling[2m > [22m[2mshould return 401 for invalid session
[22m[39m{"type":"request_end","traceId":"05583e7a-74b1-440d-8b9e-b1795bd315a8","spanId":"5f7a20af","method":"GET","path":"/api/auth/user","statusCode":401,"duration":10,"timestamp":"2026-01-17T16:18:38.369Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mAudit Flow[2m > [22m[2mGap Analysis[2m > [22m[2mshould require authentication for gap analysis by framework
[22m[39m{"type":"request_end","traceId":"38c851fe-b44f-457d-be0a-94c6561bf05d","spanId":"d4a10924","method":"GET","path":"/api/gap-analysis/ISO27001","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.374Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Comparison[2m > [22m[2mshould require authentication for version comparison
[22m[39m{"type":"request_start","traceId":"3fab9438-d4a1-494c-9695-e0bd72202449","spanId":"c0c4b7af","method":"GET","path":"/api/documents/test-id/versions/1/compare/2","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.372Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mRate Limiting[2m > [22m[2mshould include rate limit headers
[22m[39m[32m2026-01-17T16:18:38.374Z [INFO] GET /health {"method":"GET","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.374Z"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mDocument to Audit Trail[2m > [22m[2mshould require authentication to track document changes
[22m[39m{"type":"request_start","traceId":"cc4f02c2-6d9f-4c72-be77-1d85bbcd6587","spanId":"a667b9bc","method":"GET","path":"/api/documents/1/history","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.377Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Comparison[2m > [22m[2mshould require authentication for version comparison
[22m[39m[32m2026-01-17T16:18:38.372Z [INFO] GET /api/documents/test-id/versions/1/compare/2 {"method":"GET","url":"/api/documents/test-id/versions/1/compare/2","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.372Z"}[0m
[32m2026-01-17T16:18:38.373Z [INFO] API route accessed {"path":"/api/documents/test-id/versions/1/compare/2","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stderr | tests/integration/auth.test.ts > Authentication Integration Tests > Rate Limiting > should include rate limit headers
2026-01-17T16:18:38.377Z [ERROR] Database health check failed {"error":"Unknown error"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mDocument to Audit Trail[2m > [22m[2mshould require authentication to track document changes
[22m[39m[32m2026-01-17T16:18:38.378Z [INFO] GET /api/documents/1/history {"method":"GET","url":"/api/documents/1/history","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.378Z"}[0m
[32m2026-01-17T16:18:38.378Z [INFO] API route accessed {"path":"/api/documents/1/history","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Comparison[2m > [22m[2mshould require authentication for version comparison
[22m[39m{"type":"request_end","traceId":"3fab9438-d4a1-494c-9695-e0bd72202449","spanId":"c0c4b7af","method":"GET","path":"/api/documents/test-id/versions/1/compare/2","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.375Z"}

[90mstdout[2m | tests/integration/auth.test.ts[2m > [22m[2mAuthentication Integration Tests[2m > [22m[2mSecurity Headers[2m > [22m[2mshould include security headers
[22m[39m[32m2026-01-17T16:18:38.383Z [INFO] GET /health {"method":"GET","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.383Z"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mDocument to Audit Trail[2m > [22m[2mshould require authentication to track document changes
[22m[39m{"type":"request_end","traceId":"cc4f02c2-6d9f-4c72-be77-1d85bbcd6587","spanId":"a667b9bc","method":"GET","path":"/api/documents/1/history","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.379Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Saving[2m > [22m[2mshould save a document with valid data
[22m[39m{"type":"request_start","traceId":"42f8c02e-dcd9-41b3-bac3-4cbbcaeb500f","spanId":"80bbc8dd","method":"POST","path":"/api/save-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.383Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mEvidence to Control Mapping[2m > [22m[2mshould require authentication to map evidence to controls
[22m[39m{"type":"request_start","traceId":"0dbaa247-b0d2-4303-b6f2-336ce5a789c5","spanId":"43c36790","method":"POST","path":"/api/evidence/1/controls","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.383Z"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Saving[2m > [22m[2mshould save a document with valid data
[22m[39m[32m2026-01-17T16:18:38.383Z [INFO] POST /api/save-document {"method":"POST","url":"/api/save-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.383Z"}[0m
[32m2026-01-17T16:18:38.384Z [INFO] API route accessed {"path":"/api/save-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mEvidence to Control Mapping[2m > [22m[2mshould require authentication to map evidence to controls
[22m[39m[32m2026-01-17T16:18:38.383Z [INFO] POST /api/evidence/1/controls {"method":"POST","url":"/api/evidence/1/controls","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.383Z"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Saving[2m > [22m[2mshould save a document with valid data
[22m[39m{"type":"request_end","traceId":"42f8c02e-dcd9-41b3-bac3-4cbbcaeb500f","spanId":"80bbc8dd","method":"POST","path":"/api/save-document","statusCode":401,"duration":3,"timestamp":"2026-01-17T16:18:38.386Z"}

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls
2026-01-17T16:18:38.384Z [WARN] Unknown API route accessed {"path":"/api/evidence/1/controls","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Saving[2m > [22m[2mshould reject save request without required fields
[22m[39m{"type":"request_start","traceId":"06399e80-8f73-42f4-8bb7-1df0e23acd4f","spanId":"1d7d57f5","method":"POST","path":"/api/save-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.391Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mEvidence to Control Mapping[2m > [22m[2mshould require authentication to map evidence to controls
[22m[39m{"type":"request_end","traceId":"0dbaa247-b0d2-4303-b6f2-336ce5a789c5","spanId":"43c36790","method":"POST","path":"/api/evidence/1/controls","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.385Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mAI Hub Stats[2m > [22m[2mshould require authentication for AI stats
[22m[39m{"type":"request_start","traceId":"3ad9c205-77ad-4dac-8200-c02da92c535c","spanId":"b444bf65","method":"GET","path":"/api/ai/stats","ip":"::ffff:127.0.0.1","timestamp":"2026-01-17T16:18:38.389Z"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mAI Hub Stats[2m > [22m[2mshould require authentication for AI stats
[22m[39m[32m2026-01-17T16:18:38.389Z [INFO] GET /api/ai/stats {"method":"GET","url":"/api/ai/stats","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.389Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats
2026-01-17T16:18:38.390Z [WARN] Unknown API route accessed {"path":"/api/ai/stats","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}

[90mstdout[2m | tests/integration/e2e-flows.test.ts[2m > [22m[2mE2E Flow Tests[2m > [22m[2mCross-Flow Integration[2m > [22m[2mAI Hub Stats[2m > [22m[2mshould require authentication for AI stats
[22m[39m{"type":"request_end","traceId":"3ad9c205-77ad-4dac-8200-c02da92c535c","spanId":"b444bf65","method":"GET","path":"/api/ai/stats","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.391Z"}

stderr | tests/integration/auth.test.ts > Authentication Integration Tests > Security Headers > should include security headers
2026-01-17T16:18:38.392Z [ERROR] Database health check failed {"error":"Unknown error"}

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Saving[2m > [22m[2mshould reject save request without required fields
[22m[39m[32m2026-01-17T16:18:38.391Z [INFO] POST /api/save-document {"method":"POST","url":"/api/save-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-17T16:18:38.391Z"}[0m
[32m2026-01-17T16:18:38.391Z [INFO] API route accessed {"path":"/api/save-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

[90mstdout[2m | tests/integration/documents.test.ts[2m > [22m[2mDocument Integration Tests[2m > [22m[2mDocument Saving[2m > [22m[2mshould reject save request without required fields
[22m[39m{"type":"request_end","traceId":"06399e80-8f73-42f4-8bb7-1df0e23acd4f","spanId":"1d7d57f5","method":"POST","path":"/api/save-document","statusCode":401,"duration":2,"timestamp":"2026-01-17T16:18:38.393Z"}

 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/e2e-flows.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 665[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/documents.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 674[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/integration/auth.test.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 673[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/dashboard.test.tsx [2m([22m[2m37 tests[22m[2m)[22m[33m 2361[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Dashboard Component[2m > [22mDocument Generation[2m > [22mshould start generation when button clicked [33m 417[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[42m unit [49m[39m tests/unit/storage.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/documents.test.tsx [2m([22m[2m44 tests[22m[2m)[22m[33m 5596[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mEmpty States[2m > [22mshould display message when no documents match filters [33m 439[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mSearch Functionality[2m > [22mshould filter documents by title search [33m 390[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mSearch Functionality[2m > [22mshould filter documents by description search [33m 452[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mSearch Functionality[2m > [22mshould perform case-insensitive search [33m 388[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mStatus Filter[2m > [22mshould reset to all documents when selecting "All Status" [33m 480[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Documents Page[2m > [22mCombined Filters[2m > [22mshould apply both search and status filters [33m 327[2mms[22m[39m
 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/gap-analysis.test.tsx [2m([22m[2m56 tests[22m[2m)[22m[33m 6164[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mInitial Rendering[2m > [22mshould render page header with title [33m 419[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mInitial Rendering[2m > [22mshould render export and analyze buttons [33m 398[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mAnalysis Filters[2m > [22mshould filter categories by selection [33m 556[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mAnalysis Filters[2m > [22mshould filter by priority level [33m 432[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Gap Analysis Page[2m > [22mAnalysis Filters[2m > [22mshould reset filters when selecting "All" [33m 499[2mms[22m[39m
stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show loading state during generation
Not implemented: HTMLFormElement's requestSubmit() method

stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show error state on generation failure
Not implemented: HTMLFormElement's requestSubmit() method

stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show completed state with generated documents
Not implemented: HTMLFormElement's requestSubmit() method

 [32mÎ“Â£Ã´[39m [30m[45m components [49m[39m tests/components/ai-doc-generator.test.tsx [2m([22m[2m44 tests[22m[2m)[22m[33m 49586[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould require all fields to proceed [33m 343[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow valid company name input [33m 393[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow industry selection [33m 387[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow company size selection [33m 395[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould allow headquarters input [33m 451[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 1: Company Basics[2m > [22mshould proceed to step 2 with valid data [33m 1095[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould render infrastructure fields [33m 1051[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould render all cloud provider checkboxes [33m 1057[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow selecting multiple cloud providers [33m 1142[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould require at least one cloud provider [33m 1051[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow data classification selection [33m 1192[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow business applications input [33m 1886[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould allow going back to step 1 [33m 1099[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 2: Infrastructure & Security[2m > [22mshould proceed to step 3 with valid data [33m 1702[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould render framework selection fields [33m 1783[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould allow selecting multiple frameworks [33m 1774[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould show SOC2 trust principles when SOC2 is selected [33m 1813[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould hide SOC2 trust principles when SOC2 is deselected [33m 1859[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould show FedRAMP level when FedRAMP is selected [33m 1836[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould allow selecting FedRAMP level [33m 1970[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould require at least one framework [33m 1859[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 3: Framework Selection[2m > [22mshould proceed to step 4 with valid data [33m 1834[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould display company information review [33m 1840[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould display infrastructure review [33m 1826[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould display selected frameworks [33m 1737[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould show estimated document count [33m 1828[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould render generate button [33m 1858[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould only show previous button, not next [33m 1727[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 4: Review & Generate[2m > [22mshould allow going back to step 3 [33m 1882[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 5: Generation Results[2m > [22mshould show loading state during generation [33m 1771[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 5: Generation Results[2m > [22mshould show error state on generation failure [33m 1929[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mStep 5: Generation Results[2m > [22mshould show completed state with generated documents [33m 1926[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mForm Validation[2m > [22mshould validate business applications minimum length [33m 1349[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m AI Document Generator Page[2m > [22mNavigation[2m > [22mshould maintain form data when navigating back and forth [33m 995[2mms[22m[39m

[2m Test Files [22m [1m[32m23 passed[39m[22m[90m (23)[39m
[2m      Tests [22m [1m[32m515 passed[39m[22m[90m (515)[39m
[2m   Start at [22m 08:18:32
[2m   Duration [22m 53.40s[2m (transform 3.66s, setup 6.46s, collect 35.47s, tests 70.37s, environment 8.98s, prepare 10.48s)[22m

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
