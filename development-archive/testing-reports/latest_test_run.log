
> rest-express@2.0.1 test
> vitest --run --coverage --reporter=verbose


 RUN  v3.2.4 /home/user/cyberdocgen
      Coverage enabled with v8

 âœ“ |components| tests/components/PWAInstallPrompt.test.tsx > PWAInstallPrompt > does not render if isStandalone is true 24ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Button > renders with correct label and classes 206ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Button > renders secondary button 27ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Button > handles clicks 26ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Button > applies custom background color 24ms
 âœ“ |components| tests/components/PWAInstallPrompt.test.tsx > PWAInstallPrompt > renders desktop/android prompt when triggered 272ms
 âœ“ |components| tests/components/PWAInstallPrompt.test.tsx > PWAInstallPrompt > renders IOS prompt when isIOS is true 9ms
 âœ“ |components| tests/components/PWAInstallPrompt.test.tsx > PWAInstallPrompt > dismisses prompt when close button clicked 20ms
 âœ“ |components| tests/components/PWAInstallPrompt.test.tsx > PWAInstallPrompt > calls showInstallPrompt when install button clicked 73ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Button > renders different sizes 22ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Header > renders logged out state correctly 14ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Header > renders logged in state correctly 6ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Page > manages login state 25ms
 âœ“ |components| tests/components/stories/storybook.test.tsx > Storybook Components > Page > renders page content 6ms
 âœ“ |components| tests/components/CloudIntegrationsPage.test.tsx > CloudIntegrations Page > renders correctly 94ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should render with correct initial state 123ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should render AI Powered badge 70ms
 âœ“ |components| tests/components/CloudIntegrationsPage.test.tsx > CloudIntegrations Page > shows no integrations state 29ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should render children when there is no error 45ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should render error UI when there is an error 45ms
stderr | tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should hide error message in production mode
[2026-01-18T03:58:55.324Z] [WARN] Failed to fetch CSRF token

 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should display correct compliance score based on props 52ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should animate compliance score over time 67ms
 âœ“ |components| tests/components/profile/ProfileForm.test.tsx > ProfileForm > renders with default empty values when no profile provided 89ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should show low risk level when score is above 70 67ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should show medium risk level when score is between 40-70 48ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should display error message in development mode 10ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should hide error message in production mode 27ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should call onError callback when error occurs 12ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should render custom fallback when provided 5ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should show high risk level when score is below 40 61ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should display all recommendations correctly 31ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should reset error state when Try Again is clicked 225ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should display error ID 13ms
 âœ“ |components| tests/components/ErrorBoundary.test.tsx > ErrorBoundary > should have Reload Page button 13ms
 âœ“ |components| tests/components/profile/ProfileForm.test.tsx > ProfileForm > renders with profile values 21ms
 âœ“ |components| tests/components/profile/ProfileForm.test.tsx > ProfileForm > disables submit button when loading 24ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should display recommendation priorities 77ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should display recommendation frameworks 47ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should display expected impact for recommendations 73ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have correct aria-labels on Generate Documents button 20ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have correct aria-labels on Ask AI Assistant button 17ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have correct aria-label on View All button 43ms
 âœ“ |components| tests/components/profile/ProfileForm.test.tsx > ProfileForm > submits form data 397ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have correct aria-labels on Fix buttons 18ms
 âœ“ |components| tests/components/TemporaryLoginDialog.test.tsx > TemporaryLoginDialog > opens dialog when trigger clicked 406ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should call onViewDetails when View All button is clicked 206ms
 âœ“ |components| tests/components/TemporaryLoginDialog.test.tsx > TemporaryLoginDialog > validates form inputs 166ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Initial Rendering > should render loading state initially 220ms
stdout | tests/components/ObjectStorageManager.test.tsx > ObjectStorageManager > renders loading state and then stats
Mock called with: /api/storage/stats
Mock called with: /api/storage/list
Mock called with: /api/storage/list?folder=documents
Mock called with: /api/storage/list?folder=profiles
Mock called with: /api/storage/list?folder=backups

 âœ“ |components| tests/components/admin/UserRoleManager.test.tsx > UserRoleManager > renders empty state when no org selected 110ms
 âœ“ |components| tests/components/admin/UserRoleManager.test.tsx > UserRoleManager > renders roles and assignments when org selected 50ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have correct region and role attributes 126ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have metrics overview with proper grouping 85ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Initial Rendering > should render page header with correct title 211ms
stdout | tests/components/ObjectStorageManager.test.tsx > ObjectStorageManager > allows tab switching
Mock called with: /api/storage/stats
Mock called with: /api/storage/list
Mock called with: /api/storage/list?folder=documents
Mock called with: /api/storage/list?folder=profiles
Mock called with: /api/storage/list?folder=backups

 âœ“ |components| tests/components/ObjectStorageManager.test.tsx > ObjectStorageManager > renders loading state and then stats 366ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Initial Rendering > should render framework-specific title when framework filter is present 100ms
 âœ“ |components| tests/components/admin/UserRoleManager.test.tsx > UserRoleManager > calls onRemoveAssignment when delete button clicked 282ms
 âœ“ |components| tests/components/admin/UserRoleManager.test.tsx > UserRoleManager > shows loading states 34ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Initial Rendering > should render search and filter controls 104ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Initial Rendering > should render page title and description 288ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Initial Rendering > should render step indicators 93ms
 âœ“ |components| tests/components/ObjectStorageManager.test.tsx > ObjectStorageManager > allows tab switching 229ms
 âœ“ |components| tests/components/ai-components.test.tsx > AIInsightsDashboard > should have recommendations list with proper role 83ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should render the heatmap card with title 72ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > renders the spreadsheet title 442ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Initial Rendering > should start on step 1 99ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Initial Rendering > should display document count 102ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should render page header with title 480ms
 âœ“ |components| tests/components/profile/PreferencesForm.test.tsx > PreferencesForm > renders with default values 378ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display all documents in the list 143ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > renders templates from API 127ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > shows empty state if no templates 9ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Initial Rendering > should show correct navigation buttons for step 1 107ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should render all company basic fields 57ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display document descriptions 98ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should render export and analyze buttons 410ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should render grid with correct framework headers 252ms
 âœ“ |components| tests/components/profile/PreferencesForm.test.tsx > PreferencesForm > renders with profile values 253ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display framework badges with correct colors 123ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should render executive summary cards 186ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should render grid with correct category row headers 349ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should have grid role on the table 48ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > allows searching templates 340ms
stderr | tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should render dashboard title
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act

 âœ“ |components| tests/components/TemporaryLoginDialog.test.tsx > TemporaryLoginDialog > submits valid form 926ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display status badges with correct text 110ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display status icons 90ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should display overall score 171ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should render dashboard title 159ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should show loading skeleton while fetching data 43ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should require all fields to proceed 382ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > opens accordion to show fields 116ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display formatted dates 89ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should display correct risk counts in badges 70ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > allows editing a field 139ms
stdout | tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > calls save API when "Save All Changes" is clicked
Button HTML: <button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2" data-testid="button-save-all-changes"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save h-4 w-4 mr-2" aria-hidden="true"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path><path d="M7 3v4a1 1 0 0 0 1 1h7"></path></svg>Save All Changes</button>
Button Disabled: [33mfalse[39m

 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Display > should display document categories in desktop view 107ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Empty States > should display message when no documents exist 26ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should display total gaps count 143ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should render 20 risk cells (5 categories x 4 frameworks) 232ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should have accessible risk cells with aria-labels 59ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should render document statistics cards 104ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should display framework breakdown 56ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should allow valid company name input 284ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should display control implementation counts in cells 43ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should render risk cells with correct background colors 63ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should apply custom className when provided 33ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Initial Rendering > should show status distribution 134ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Statistics > should calculate total documents correctly 44ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should display critical issues count 196ms
 âœ“ |components| tests/components/FrameworkSpreadsheet.test.tsx > FrameworkSpreadsheet Component > calls save API when "Save All Changes" is clicked 194ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Statistics > should count documents by framework 69ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Statistics > should count documents by status 36ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Initial Rendering > should display estimated timeline 156ms
 âœ“ |components| tests/components/ai-components.test.tsx > RiskHeatmap > should have focusable cells with proper focus styles 53ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should render the control prioritizer card with title 30ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should render all 5 controls 67ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Empty States > should display message when no documents match filters 416ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display controls in priority order 62ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should calculate and display correct implementation progress 46ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should have progress bar with correct value 40ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should render filter section 136ms
 âœ“ |components| tests/components/profile/PreferencesForm.test.tsx > PreferencesForm > submits form data 1062ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display status badges correctly 25ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display effort badges with correct colors 42ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display impact badges 23ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Statistics > should handle empty document list 80ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should show generation button for each framework 37ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should render category filter dropdown 155ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should allow industry selection 510ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display estimated time for each control 65ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display framework badges for each control 35ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Search Functionality > should filter documents by title search 331ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should call onImplementControl callback when implement button is clicked 66ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should have correct aria-labels on implement buttons 18ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should have properly structured control items 26ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should have aria-labels on control list items 45ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should render priority filter dropdown 145ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should render View Full Gap Analysis button 20ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should apply custom className when provided 28ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should display reason for prioritization 21ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should start generation when button clicked 471ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should render search button 204ms
 âœ“ |components| tests/components/ai-components.test.tsx > ControlPrioritizer > should show correct category badges 59ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should allow company size selection 421ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Search Functionality > should filter documents by description search 274ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should show progress indicator during generation 230ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should allow headquarters input 240ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should disable generate button during generation 196ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should show success message when generation completes 38ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should handle generation errors gracefully 34ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Search Functionality > should perform case-insensitive search 326ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Generation > should timeout if generation takes too long 29ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Error Handling > should show error message when document fetch fails 42ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Error Handling > should show retry button on error 31ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should filter categories by selection 576ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Error Handling > should refetch data when retry clicked 43ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Error Handling > should handle company profile fetch errors 47ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Preview > should open preview dialog when document clicked 32ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Preview > should close preview dialog when close button clicked 47ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Document Preview > should show document content in preview 32ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > AI Insights Integration > should render AI insights dashboard 26ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > AI Insights Integration > should render risk heatmap 39ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Search Functionality > should clear filters when search is cleared 184ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > AI Insights Integration > should render control prioritizer 24ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > AI Insights Integration > should lazy load AI components 22ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Responsive Behavior > should render mobile-friendly layout on small screens 48ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Responsive Behavior > should render desktop layout on large screens 25ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Accessibility > should have proper heading hierarchy 30ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Accessibility > should have accessible buttons 26ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Accessibility > should announce generation progress to screen readers 43ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Accessibility > should have proper ARIA labels for stats 28ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should filter by priority level 446ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Performance > should not re-render unnecessarily 33ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Performance > should cleanup timers on unmount 39ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Data Refresh > should refetch documents after successful generation 32ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Status Filter > should filter documents by complete status 403ms
 âœ“ |components| tests/components/dashboard.test.tsx > Dashboard Component > Data Refresh > should update statistics in real-time 44ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 1: Company Basics > should proceed to step 2 with valid data 967ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Status Filter > should filter documents by in_progress status 348ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Status Filter > should filter documents by draft status 309ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Analysis Filters > should reset filters when selecting "All" 744ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Tab Navigation > should render all tab triggers 234ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should render infrastructure fields 878ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Tab Navigation > should default to Gap Analysis tab 152ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Status Filter > should reset to all documents when selecting "All Status" 548ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Framework Filter > should filter documents by framework from URL 40ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Tab Navigation > should switch to Framework Coverage tab 194ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Tab Navigation > should switch to Implementation Roadmap tab 175ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Combined Filters > should apply both search and status filters 378ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Tab Navigation > should switch to Priority Actions tab 189ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Combined Filters > should apply search, status, and framework filters 120ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Actions > should render edit buttons for each document 51ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Actions > should render download buttons for each document 44ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Actions > should render delete buttons for each document in desktop view 54ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should display all gap categories 102ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should display status badges for each category 97ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Document Actions > should have accessible labels for action buttons 63ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should render all cloud provider checkboxes 839ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should display implementation scores for each category 122ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should display gap counts for each category 85ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > New Document Dialog > should open new document dialog when button is clicked 151ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Export All Button > should render export all button 48ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Export All Button > should have accessible label for export button 56ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Accessibility > should have proper ARIA labels for search input 49ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should display category descriptions 98ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should display recommendations for each category 88ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Accessibility > should have proper ARIA labels for status filter 50ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Accessibility > should have proper table ARIA attributes 64ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Accessibility > should have proper loading state ARIA attributes 18ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Gap Analysis Tab Content > should show truncated recommendations with count 80ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Accessibility > should hide decorative icons from screen readers 53ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Responsive Behavior > should render table headers in desktop view 63ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Responsive Behavior > should display document count in card header 47ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Error Handling > should handle API errors gracefully 27ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Error Handling > should handle empty document array 23ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Error Handling > should handle documents without descriptions 39ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Query Integration > should use correct query key for fetching documents 5ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Framework Coverage Tab > should display all compliance frameworks 199ms
 âœ“ |components| tests/components/documents.test.tsx > Documents Page > Query Integration > should refetch documents on query invalidation 50ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Framework Coverage Tab > should display framework coverage percentages 169ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should allow selecting multiple cloud providers 893ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Framework Coverage Tab > should display control counts 168ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Framework Coverage Tab > should display Total Controls, Implemented, and Missing labels 165ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Framework Coverage Tab > should display framework status badges 161ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Implementation Roadmap Tab > should display timeline alert 163ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Implementation Roadmap Tab > should display all four phases 184ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should require at least one cloud provider 801ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Implementation Roadmap Tab > should display phase timelines 178ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Implementation Roadmap Tab > should display phase items 173ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Implementation Roadmap Tab > should display priority badges for each phase 162ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Priority Actions Tab > should display priority recommendations 180ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Priority Actions Tab > should display timeframes for each recommendation 164ms
 âœ“ |components| tests/components/dashboard/FrameworkGenerationCards.test.tsx > FrameworkGenerationCards > renders progress and frameworks 67ms
 âœ“ |components| tests/components/dashboard/FrameworkGenerationCards.test.tsx > FrameworkGenerationCards > disables buttons when generating 20ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Priority Actions Tab > should display effort levels 154ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should allow data classification selection 959ms
 âœ“ |components| tests/components/DocumentUploader.test.tsx > DocumentUploader > renders correctly 70ms
 â†“ |components| tests/components/DocumentUploader.test.tsx > DocumentUploader > handles file drop (simulation)
 â†“ |components| tests/components/DocumentUploader.test.tsx > DocumentUploader > uploads files
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Priority Actions Tab > should display impact descriptions 185ms
 âœ“ |components| tests/components/admin/OAuthSettings.test.tsx > OAuthSettings > renders form fields 90ms
 âœ“ |components| tests/components/dashboard/FrameworkGenerationCards.test.tsx > FrameworkGenerationCards > calls triggers when clicked 246ms
 âœ“ |components| tests/components/profile/SecuritySettings.test.tsx > SecuritySettings > renders security status correctly 83ms
 âœ“ |components| tests/components/profile/SecuritySettings.test.tsx > SecuritySettings > renders manage button when 2FA enabled 16ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Priority Actions Tab > should display priority badges 174ms
 âœ“ |components| tests/components/profile/SecuritySettings.test.tsx > SecuritySettings > renders enable button when 2FA disabled 14ms
 âœ“ |components| tests/components/admin/OAuthSettings.test.tsx > OAuthSettings > toggles secret visibility 20ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Immediate Action Section > should display immediate action card 82ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Immediate Action Section > should display critical priority alert 90ms
 âœ“ |components| tests/components/admin/OAuthSettings.test.tsx > OAuthSettings > submits form with data 326ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Immediate Action Section > should display action buttons 207ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > UI Components > should display progress bars 86ms
 âœ“ |components| tests/components/profile/NotificationSettingsForm.test.tsx > NotificationSettingsForm > renders with profile values 130ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > UI Components > should display icons throughout the page 89ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > UI Components > should use proper card components 91ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should allow business applications input 1014ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Responsive Behavior > should render mobile-friendly text alternatives 92ms
 âœ“ |components| tests/components/profile/NotificationSettingsForm.test.tsx > NotificationSettingsForm > toggles switch and submits 340ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Responsive Behavior > should render tab labels with responsive text 146ms
 âœ“ |components| tests/components/dashboard/QuickStats.test.tsx > QuickStats > renders stats correctly 55ms
 âœ“ |components| tests/components/dashboard/QuickStats.test.tsx > QuickStats > renders zero/empty states 9ms
 âœ“ |components| tests/components/admin/CloudIntegrationList.test.tsx > CloudIntegrationList > renders empty state 44ms
 âœ“ |components| tests/components/admin/CloudIntegrationList.test.tsx > CloudIntegrationList > renders integrations list 28ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Accessibility > should have proper heading hierarchy 106ms
 âœ“ |components| tests/components/admin/CloudIntegrationList.test.tsx > CloudIntegrationList > calls onDelete when delete button clicked 213ms
 âœ“ |components| tests/components/upload/FileListItem.test.tsx > FileListItem > renders pending file correctly 53ms
 âœ“ |components| tests/components/upload/FileListItem.test.tsx > FileListItem > renders completed file with metadata 8ms
 âœ“ |components| tests/components/upload/FileListItem.test.tsx > FileListItem > does not show remove button when processing 21ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Accessibility > should have accessible button labels 123ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Accessibility > should have proper ARIA roles 137ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Accessibility > should have progress bars with proper ARIA attributes 100ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Data Calculations > should correctly calculate overall score 93ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Data Calculations > should correctly sum total gaps 87ms
 âœ“ |components| tests/components/gap-analysis.test.tsx > Gap Analysis Page > Data Calculations > should correctly count critical gaps 97ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should allow going back to step 1 958ms
 âœ“ |components| tests/components/admin/PDFSecuritySettings.test.tsx > PDFSecuritySettings > renders security options 79ms
 âœ“ |components| tests/components/storage/FileListView.test.tsx > FileListView > renders file list 60ms
 âœ“ |components| tests/components/storage/FileListView.test.tsx > FileListView > renders empty state 4ms
 âœ“ |components| tests/components/storage/FileListView.test.tsx > FileListView > calls delete handler 12ms
 âœ“ |components| tests/components/dashboard/CompanyProfileSummary.test.tsx > CompanyProfileSummary > renders profile information 49ms
 âœ“ |components| tests/components/dashboard/CompanyProfileSummary.test.tsx > CompanyProfileSummary > does not render if profile is missing 2ms
 âœ“ |components| tests/components/dashboard/CompanyProfileSummary.test.tsx > CompanyProfileSummary > calls onEdit when edit button clicked 213ms
 âœ“ |components| tests/components/admin/PDFSecuritySettings.test.tsx > PDFSecuritySettings > submits form changes 299ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > Prompt Injection Detection > should block: 'Prompt injection attempt - ignore insâ€¦' 1ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > Prompt Injection Detection > should block: 'Prompt injection attempt - system oveâ€¦' 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > Prompt Injection Detection > should allow safe compliance questions 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > PII Detection and Redaction > should redact PII: 'PII in input - SSN' 1ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > PII Detection and Redaction > should redact PII: 'PII in input - Credit Card' 1ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > PII Detection and Redaction > should not redact non-PII content 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > Output Moderation > should pass safe AI output 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Safety Guardrails > Output Moderation > should flag harmful content in output 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Quality Metrics > Document Generation Quality > should include expected sections: 'Document generation - policy' 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Quality Metrics > Document Generation Quality > should generate properly formatted markdown 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Quality Metrics > Response Latency > should respond within SLO (30s for AI) 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Quality Metrics > Token Usage > should report token usage accurately 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Quality Metrics > Token Usage > should not exceed token limits 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Model Fallback > should fallback to secondary model on primary failure 1ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > AI Model Fallback > should report error when all models fail 1ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > Compliance-Specific Tests > Framework Accuracy > should reference correct SOC 2 trust principles 0ms
 âœ“ |unit| tests/ai/evaluation-suite.test.ts > Compliance-Specific Tests > Framework Accuracy > should provide accurate ISO 27001 control references 0ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 2: Infrastructure & Security > should proceed to step 3 with valid data 1292ms
stderr | tests/integration/workflow-integration.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stderr | tests/integration/critical-user-flows.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Complete Document Generation Workflow > should complete full document generation from profile to export 3ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Complete Document Generation Workflow > should handle document lifecycle with multiple versions 1ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Gap Analysis Workflow > should perform gap analysis after document generation 1ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Gap Analysis Workflow > should identify gaps in document coverage 1ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Multi-Framework Document Workflow > should generate and manage documents across multiple frameworks 1ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Multi-Framework Document Workflow > should filter documents by multiple criteria 0ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > AI-Generated Document Tracking > should track AI-generated documents separately 0ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Organization Multi-User Workflow > should handle multiple users in same organization 0ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Document Search and Filtering Workflow > should support filtering by status 1ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Document Search and Filtering Workflow > should support filtering by framework 0ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Document Search and Filtering Workflow > should support filtering by category 0ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Document Search and Filtering Workflow > should return all documents when no filters applied 0ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Bulk Document Operations Workflow > should handle bulk document creation 1ms
 âœ“ |unit| tests/integration/workflow-integration.test.ts > Workflow Integration Tests > Bulk Document Operations Workflow > should handle bulk status updates 0ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 1: New User Onboarding to First Document > should complete full onboarding flow from registration to document generation 4ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 2: Bulk AI Document Generation > should generate multiple documents for selected frameworks 1ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 3: Document Review and Approval Workflow > should complete document review lifecycle from draft to approved 0ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 3: Document Review and Approval Workflow > should handle document rejection and revision flow 0ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 4: Gap Analysis and Remediation > should identify gaps and track remediation progress 1ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 5: Multi-User Collaboration > should support multiple users working on same framework 1ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 6: Framework Migration > should support adding new frameworks and generating documents 1ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 7: Document Export and Reporting > should prepare documents for export and audit 0ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 8: Real-time Dashboard Updates > should track compliance metrics as documents are created 1ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 9: Error Recovery and Data Integrity > should handle errors gracefully and maintain data integrity 0ms
 âœ“ |unit| tests/integration/critical-user-flows.test.ts > Critical User Flows E2E Tests > Flow 10: Complete Compliance Journey > should track complete journey from onboarding to audit-ready 1ms
stderr | tests/unit/aiGuardrails.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > encryptSensitiveField > encrypts data using AES-256-GCM 6ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > encryptSensitiveField > produces unique IVs for each encryption 1ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > encryptSensitiveField > handles empty strings 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > decryptSensitiveField > successfully decrypts encrypted data 1ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > decryptSensitiveField > throws error on tampered data (auth tag validation) 2ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > decryptSensitiveField > throws error on invalid auth tag 1ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > legacy v1 support > identifies data needing migration 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > legacy v1 support > identifies v2 data as not needing migration 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > key rotation detection > detects data needing re-encryption based on age 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > key rotation detection > does not flag recent data for re-encryption 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > generateEncryptionKey > generates a valid 64-character hex key 1ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > generateEncryptionKey > generates unique keys 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > hashForIndexing > produces consistent hashes for same input 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > hashForIndexing > produces different hashes for different inputs 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > hashForIndexing > outputs SHA-256 hex format 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > helper functions > encrypt/decrypt wrappers > encrypt wrapper works with sensitive field encryption 1ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > helper functions > shouldEncryptField > encrypts sensitive field names 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > helper functions > shouldEncryptField > does not encrypt non-sensitive fields 0ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > field-level encryption > encrypts company profile sensitive fields 1ms
 âœ“ |unit| tests/unit/encryption.test.ts > EncryptionService > data classification > supports all classification levels 2ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Prompt Injection Detection > should block obvious injection attempts 13ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Prompt Injection Detection > should block jailbreak attempts 7ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Prompt Injection Detection > should flag system command attempts 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Prompt Injection Detection > should allow safe prompts 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > PII Detection and Redaction > should detect and redact email addresses 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > PII Detection and Redaction > should detect and redact phone numbers 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > PII Detection and Redaction > should detect and redact SSN 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > PII Detection and Redaction > should detect and redact credit card numbers 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > PII Detection and Redaction > should detect multiple PII types 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > PII Detection and Redaction > should not flag non-PII data 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Response Analysis > should analyze response content for harmful material 19ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Response Analysis > should detect PII in responses 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Response Analysis > should allow safe responses 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Risk Scoring > should assign low risk to safe prompts 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Risk Scoring > should assign medium risk to moderately concerning prompts 5ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupTOTP > generates TOTP secret and backup codes 17ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupTOTP > generates unique secrets for different users 3ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupTOTP > generates base32 encoded secret 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupTOTP > generates QR code URL with correct format 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateBackupCodes > generates 10 backup codes 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateBackupCodes > generates codes of correct length 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateBackupCodes > generates unique codes 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateBackupCodes > generates alphanumeric codes 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateBase32Secret > generates base32 secret of correct length 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateBase32Secret > generates unique secrets 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateNumericCode > generates numeric code of specified length 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateNumericCode > handles different lengths 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateQRCodeUrl > creates valid otpauth URL 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > validateTOTPToken > validates correct TOTP token 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > validateTOTPToken > accepts tokens within time window 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > validateTOTPToken > rejects invalid tokens 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateTOTPToken > generates 6-digit token 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateTOTPToken > generates consistent tokens for same time slice 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > generateTOTPToken > generates different tokens for different time slices 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupSMS > generates SMS verification code 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupSMS > generates unique verification codes 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > setupSMS > sets expiration time in future 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifySMS > accepts valid unexpired code 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifySMS > rejects expired code 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifySMS > rejects incorrect code 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > getAllMFASettings > retrieves all MFA settings for a user 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > getPasskeyCount > returns passkey count for user 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > storeTOTPSettings > stores TOTP settings for a user 3ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > getTOTPSettings > retrieves TOTP settings for a user 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > updateBackupCodes > updates backup codes for a user 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > markTOTPVerified > marks TOTP as verified for a user 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifyTOTP > verifies valid TOTP token 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifyTOTP > rejects invalid TOTP token 0ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifyBackupCode > verifies valid backup code 1ms
 âœ“ |unit| tests/unit/mfaService.test.ts > MFAService > verifyBackupCode > rejects invalid backup code 0ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Risk Scoring > should assign high risk to dangerous prompts 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Risk Scoring > should combine prompt and response risk scores 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Action Determination > should allow when risk is low 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Action Determination > should block when risk is critical 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Action Determination > should flag for human review when appropriate 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Action Determination > should redact PII but allow request 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Moderation Flags > should flag hate speech content 4ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Moderation Flags > should flag violent content 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Moderation Flags > should not flag safe business content 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Logging and Audit Trail > should log all guardrail checks 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Logging and Audit Trail > should include request context in logs 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Logging and Audit Trail > should return log ID in result 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Logging and Audit Trail > should log blocked requests 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Edge Cases > should handle empty prompts 23ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Edge Cases > should handle very long prompts 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Edge Cases > should handle null response 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Edge Cases > should handle special characters in prompts 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Edge Cases > should handle unicode characters 5ms
stderr | tests/unit/gap-analysis.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Performance > should complete guardrail check quickly 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Performance > should handle concurrent checks 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Context Validation > should require requestId in context 6ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Context Validation > should work without optional context fields 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Severity Classification > should correctly classify low severity 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Severity Classification > should correctly classify critical severity 5ms
 âœ“ |unit| tests/unit/aiGuardrails.test.ts > AIGuardrailsService > checkGuardrails > Severity Classification > should escalate severity with multiple risk factors 4ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Report Operations > should create a gap analysis report 3ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Report Operations > should retrieve gap analysis reports by organization 1ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Report Operations > should get a single gap analysis report 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Report Operations > should update gap analysis report status 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Findings > should create a gap analysis finding 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Findings > should get findings for a report 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Gap Analysis Findings > should handle different risk levels 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Remediation Recommendations > should create a remediation recommendation 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Remediation Recommendations > should get recommendations for a finding 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Remediation Recommendations > should update recommendation status 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Remediation Recommendations > should handle different timeframes 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Compliance Maturity Assessment > should create compliance maturity assessment 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Compliance Maturity Assessment > should get compliance maturity assessment by org and framework 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Framework-Specific Gap Analysis > should create gap analysis for soc2 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Framework-Specific Gap Analysis > should create gap analysis for iso27001 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Framework-Specific Gap Analysis > should create gap analysis for fedramp 0ms
 âœ“ |unit| tests/unit/gap-analysis.test.ts > Gap Analysis Unit Tests > Framework-Specific Gap Analysis > should create gap analysis for nist 0ms
stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > configuration > sets and gets policies
[32m2026-01-18T03:59:08.350Z [INFO] Data retention policies updated {"policyCount":1}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > schedules deletion request
[32m2026-01-18T03:59:08.356Z [INFO] Deletion request scheduled {"requestId":"del_1768708748356_jv83ctc7z","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR)
[32m2026-01-18T03:59:08.358Z [INFO] Data retention policies updated {"policyCount":5}[0m
[32m2026-01-18T03:59:08.358Z [INFO] Deletion request scheduled {"requestId":"del_1768708748358_8d6v7vmnn","dataType":"user_profile","scheduledAt":"2026-01-18T03:59:08.358Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR)
[32m2026-01-18T03:59:08.358Z [INFO] Deletion request scheduled {"requestId":"del_1768708748358_deetxr8mw","dataType":"ai_chat_history","scheduledAt":"2026-01-18T03:59:08.358Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR)
[32m2026-01-18T03:59:08.359Z [INFO] Deletion request scheduled {"requestId":"del_1768708748359_j975nitw4","dataType":"generated_documents","scheduledAt":"2026-01-18T03:59:08.359Z","status":"approved"}[0m

stderr | tests/unit/documents.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR)
[32m2026-01-18T03:59:08.359Z [INFO] Deletion request scheduled {"requestId":"del_1768708748359_uuugrk4g5","dataType":"session_logs","scheduledAt":"2026-01-18T03:59:08.359Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR)
[32m2026-01-18T03:59:08.359Z [INFO] Deletion request scheduled {"requestId":"del_1768708748359_066pph2c0","dataType":"preferences","scheduledAt":"2026-01-18T03:59:08.359Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR)
[32m2026-01-18T03:59:08.359Z [INFO] User deletion request processed {"userId":"user-123","requestCount":5,"immediate":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.361Z [INFO] Deletion request scheduled {"requestId":"del_1768708748361_24qjxph9o","dataType":"generated_documents","scheduledAt":"2026-01-18T03:59:08.361Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.363Z [INFO] Executing deletion {"requestId":"del_1768708748358_8d6v7vmnn","dataType":"user_profile","hardDelete":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.364Z [INFO] User profile deletion executed {"userId":"user-123"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.364Z [INFO] Deletion completed {"requestId":"del_1768708748358_8d6v7vmnn","dataType":"user_profile"}[0m
[32m2026-01-18T03:59:08.364Z [INFO] Executing deletion {"requestId":"del_1768708748358_deetxr8mw","dataType":"ai_chat_history","hardDelete":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.365Z [INFO] AI chat history deletion executed {"userId":"user-123"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.365Z [INFO] Deletion completed {"requestId":"del_1768708748358_deetxr8mw","dataType":"ai_chat_history"}[0m
[32m2026-01-18T03:59:08.365Z [INFO] Executing deletion {"requestId":"del_1768708748359_j975nitw4","dataType":"generated_documents","hardDelete":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.366Z [INFO] Generated documents deletion executed {"userId":"user-123","count":0}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.367Z [INFO] Deletion completed {"requestId":"del_1768708748359_j975nitw4","dataType":"generated_documents"}[0m
[32m2026-01-18T03:59:08.367Z [INFO] Executing deletion {"requestId":"del_1768708748359_uuugrk4g5","dataType":"session_logs","hardDelete":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.367Z [INFO] Session logs deletion executed {"userId":"user-123"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.368Z [INFO] Deletion completed {"requestId":"del_1768708748359_uuugrk4g5","dataType":"session_logs"}[0m
[32m2026-01-18T03:59:08.368Z [INFO] Executing deletion {"requestId":"del_1768708748359_066pph2c0","dataType":"preferences","hardDelete":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.368Z [INFO] User preferences deletion executed {"userId":"user-123"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.369Z [INFO] Deletion completed {"requestId":"del_1768708748359_066pph2c0","dataType":"preferences"}[0m
[32m2026-01-18T03:59:08.369Z [INFO] Executing deletion {"requestId":"del_1768708748361_24qjxph9o","dataType":"generated_documents","hardDelete":true}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.370Z [INFO] Generated documents deletion executed {"userId":"user-delete-exec","count":1}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions
[32m2026-01-18T03:59:08.370Z [INFO] Deletion completed {"requestId":"del_1768708748361_24qjxph9o","dataType":"generated_documents"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > gets request status by ID
[32m2026-01-18T03:59:08.372Z [INFO] Deletion request scheduled {"requestId":"del_1768708748372_ihgsub9sz","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with userId filter
[32m2026-01-18T03:59:08.373Z [INFO] Deletion request scheduled {"requestId":"del_1768708748373_z22uwps4g","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with userId filter
[32m2026-01-18T03:59:08.373Z [INFO] Deletion request scheduled {"requestId":"del_1768708748373_to99mu8ex","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with organizationId filter
[32m2026-01-18T03:59:08.373Z [INFO] Deletion request scheduled {"requestId":"del_1768708748373_dlm2jfpp1","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with status filter
[32m2026-01-18T03:59:08.374Z [INFO] Deletion request scheduled {"requestId":"del_1768708748374_ikfpps5kd","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

stdout | tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with multiple filters
[32m2026-01-18T03:59:08.374Z [INFO] Deletion request scheduled {"requestId":"del_1768708748374_vpvnpz816","dataType":"test_type","scheduledAt":"2026-01-19T02:00:00.000Z","status":"approved"}[0m

 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > configuration > sets and gets policies 6ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > calculates deletion date correctly 0ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > schedules deletion request 1ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > scheduling > processes user deletion request (GDPR) 3ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > execution > executes pending deletions 11ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > reporting > generates retention report 0ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > gets request status by ID 1ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with userId filter 1ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with organizationId filter 1ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with status filter 1ms
 âœ“ |unit| tests/unit/dataRetentionAutomation.test.ts > DataRetentionService > request management > lists pending requests with multiple filters 1ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document CRUD Operations > should create a document with valid data 3ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document CRUD Operations > should retrieve a document by ID 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document CRUD Operations > should return undefined for non-existent document 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document CRUD Operations > should update a document 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document CRUD Operations > should delete a document 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Filtering > should get all documents 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Filtering > should filter documents by framework 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Filtering > should filter documents by company profile 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Filtering > should return empty array for non-existent company profile 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Status Management > should create document with draft status 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Status Management > should update document status to published 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Status Management > should update document status to archived 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Version Management > should create document with version 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Version Management > should increment document version on update 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Frameworks > should create document for SOC2 framework 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Frameworks > should create document for ISO27001 framework 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Frameworks > should create document for FedRAMP framework 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Frameworks > should create document for NIST framework 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Categories > should create document with policy category 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Categories > should create document with procedure category 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Categories > should create document with guideline category 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Categories > should create document with standard category 0ms
 âœ“ |unit| tests/unit/documents.test.ts > Document Unit Tests > Document Categories > should create document with control category 0ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should render framework selection fields 1249ms
 âœ“ |components| tests/components/dashboard/GenerationProgressDialog.test.tsx > GenerationProgressDialog > renders progress correctly 318ms
 âœ“ |components| tests/components/dashboard/GenerationProgressDialog.test.tsx > GenerationProgressDialog > calls onCancel when button clicked 123ms
stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > successfully performs gap analysis with maturity assessment
[32m2026-01-18T03:59:09.412Z [INFO] Starting compliance gap analysis {"organizationId":"org-1","framework":"iso27001"}[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > successfully performs gap analysis with maturity assessment
[32m2026-01-18T03:59:09.418Z [INFO] Compliance gap analysis completed {"organizationId":"org-1","overallScore":65,"findingsCount":2,"recommendationsCount":1}[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles unsupported frameworks gracefully
[32m2026-01-18T03:59:09.421Z [INFO] Starting compliance gap analysis {"organizationId":"org-1","framework":"invalid-framework"}[0m

stderr | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles unsupported frameworks gracefully
[31m2026-01-18T03:59:09.421Z [ERROR] Error in compliance gap analysis {"organizationId":"org-1","framework":"invalid-framework","error":"Framework invalid-framework not supported"}[0m

stderr | tests/unit/riskAssessment.test.ts > RiskAssessmentService > generateMitigationRoadmap > handles AI service errors when generating roadmap
[31m2026-01-18T03:59:09.420Z [ERROR] Roadmap generation failed:[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles AI service errors
[32m2026-01-18T03:59:09.423Z [INFO] Starting compliance gap analysis {"organizationId":"org-1","framework":"soc2"}[0m

stderr | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles AI service errors
[31m2026-01-18T03:59:09.424Z [ERROR] Error in compliance gap analysis {"organizationId":"org-1","framework":"soc2","error":"AI Service Down"}[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles malformed AI response
[32m2026-01-18T03:59:09.424Z [INFO] Starting compliance gap analysis {"organizationId":"org-1","framework":"iso27001"}[0m

stderr | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles malformed AI response
[31m2026-01-18T03:59:09.424Z [ERROR] Error parsing AI analysis results {"error":"No valid JSON found in AI response"}[0m

stderr | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles malformed AI response
[31m2026-01-18T03:59:09.425Z [ERROR] Error in compliance gap analysis {"organizationId":"org-1","framework":"iso27001","error":"Failed to parse gap analysis results"}[0m

stderr | tests/unit/riskAssessment.test.ts > RiskAssessmentService > calculateComplianceReadiness - Error Handling > throws error when calculation fails
[31m2026-01-18T03:59:09.425Z [ERROR] Readiness calculation failed:[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > calculates executive summary correctly
[32m2026-01-18T03:59:09.425Z [INFO] Starting compliance gap analysis {"organizationId":"org-1","framework":"iso27001"}[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > calculates executive summary correctly
[32m2026-01-18T03:59:09.426Z [INFO] Compliance gap analysis completed {"organizationId":"org-1","overallScore":65,"findingsCount":2,"recommendationsCount":1}[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles remediation generation errors gracefully
[32m2026-01-18T03:59:09.426Z [INFO] Starting compliance gap analysis {"organizationId":"org-1","framework":"iso27001"}[0m

stderr | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles remediation generation errors gracefully
[33m2026-01-18T03:59:09.427Z [WARN] Failed to generate remediation for finding {"controlId":"A.5.1","error":"Remediation generation failed"}[0m

stdout | tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles remediation generation errors gracefully
[32m2026-01-18T03:59:09.427Z [INFO] Compliance gap analysis completed {"organizationId":"org-1","overallScore":65,"findingsCount":2,"recommendationsCount":0}[0m

 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > assessOrganizationalRisk > parses JSON response correctly 2ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > assessOrganizationalRisk > falls back to text parsing on JSON error 1ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > analyzeThreatLandscape > returns structured threat assessment 0ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > calculateComplianceReadiness > calculates readiness score 0ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > generateMitigationRoadmap > generates roadmap phases 2ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > generateMitigationRoadmap > handles AI service errors when generating roadmap 5ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > calculateComplianceReadiness - Error Handling > throws error when calculation fails 1ms
 âœ“ |unit| tests/unit/riskAssessment.test.ts > RiskAssessmentService > parseRiskAssessmentText - Medium Risk Level > correctly identifies medium risk level 0ms
 âœ“ |unit| tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > successfully performs gap analysis with maturity assessment 9ms
 âœ“ |unit| tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles unsupported frameworks gracefully 2ms
 âœ“ |unit| tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles AI service errors 1ms
 âœ“ |unit| tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles malformed AI response 1ms
 âœ“ |unit| tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > calculates executive summary correctly 1ms
 âœ“ |unit| tests/unit/complianceGapAnalysis.test.ts > ComplianceGapAnalysisService > analyzeComplianceGaps > handles remediation generation errors gracefully 2ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeString > should remove script tags 2ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeString > should remove iframe tags 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeString > should remove javascript: protocols 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeString > should remove event handlers 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeString > should trim whitespace 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeString > should limit string length 1ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeEmail > should convert to lowercase 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeEmail > should trim whitespace 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeFilename > should replace invalid characters with underscores 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeFilename > should collapse multiple underscores 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > sanitizeFilename > should limit filename length 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > paginationSchema > should validate valid pagination params 2ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > paginationSchema > should use defaults for missing params 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > paginationSchema > should reject invalid page numbers 1ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > idParamSchema > should validate valid UUIDs 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > idParamSchema > should reject invalid UUIDs 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > searchSchema > should validate valid search params 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > searchSchema > should reject invalid framework 1ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > searchSchema > should reject invalid status 0ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > validateSchema middleware > should pass validation with valid data 2ms
 âœ“ |unit| tests/unit/validation.test.ts > Validation Utils > validateSchema middleware > should fail validation with invalid data 2ms
stderr | tests/unit/chatbot.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > processMessage > blocks disallowed input 3ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > processMessage > sanitizes input before processing 5ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > processMessage > returns parsed structured response 1ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > processMessage > falls back to text analysis if JSON parsing fails 1ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > processMessage > falls back to OpenAI if Anthropic fails 1ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > processMessage > handles output guardrails blocking 1ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > generateConversationTitle > generates title using OpenAI 1ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > generateConversationTitle > returns default title on failure 0ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > getSuggestedQuestions > returns framework specific questions 1ms
 âœ“ |unit| tests/unit/chatbot.test.ts > ComplianceChatbot > getSuggestedQuestions > returns default questions for unknown framework 0ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should allow selecting multiple frameworks 1396ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > OpenAI Service > generateDocument > generates content successfully 2ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > OpenAI Service > generateDocument > handles errors 2ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > Industry Configuration > retrieves all configurations 2ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > Industry Configuration > retrieves specific configuration 0ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > Industry Configuration > returns null for invalid industry 0ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > createCustomConfiguration > creates configuration successfully 1ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > createCustomConfiguration > throws error for invalid industry 2ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > generateOptimizedDocument > generates using Anthropic (preferred) 1ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > generateOptimizedDocument > generates using OpenAI (preferred) 0ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > generateOptimizedDocument > handles unknown industry defaulting to technology (OpenAI) 0ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > assessIndustryRisks > generates risk assessment successfully 2ms
 âœ“ |unit| tests/unit/aiFineTuningService.test.ts > AIFineTuningService > assessIndustryRisks > throws on invalid industry 0ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > error logging > should log error messages 8ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > error logging > should include context in error logs 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > error logging > should include request information when provided 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > warn logging > should log warning messages 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > info logging > should log info messages 0ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > debug logging > should log debug messages in development 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > debug logging > should not log debug messages in production 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > audit logging > should format audit logs correctly 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > security logging > should log high severity security events as errors 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > security logging > should log medium severity security events as warnings 0ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > security logging > should log low severity security events as info 0ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > log formatting > should include timestamp in logs 1ms
 âœ“ |unit| tests/unit/logger.test.ts > Logger > log formatting > should format log levels consistently 1ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > GET /api/documents > returns all documents for an organization 41ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > GET /api/documents > filters by companyProfileId with check 9ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > GET /api/documents > returns 404 if company profile is not authorized 7ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > GET /api/documents/:id > returns document if authorized 8ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > GET /api/documents/:id > returns 404 if not authorized 10ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > POST /api/documents > creates a new document 52ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > POST /api/documents/generate > generates a document content 6ms
 âœ“ |unit| tests/integration/documents.test.ts > Documents Routes > GET /api/documents/:id/versions > returns versions if authorized 7ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > analyzeDocumentQuality > analyzes quality and checks Anthropic call 3ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > analyzeDocumentQuality > handles parsing errors gracefully 1ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > analyzeContentStructure > analyzes structure using OpenAI 0ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > analyzeContentStructure > returns defaults on error 0ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > checkFrameworkAlignment > checks alignment 0ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > benchmarkDocument > calculates benchmarks 0ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > trackQualityTrends > identifies improving trend 0ms
 âœ“ |unit| tests/unit/qualityScoring.test.ts > QualityScoringService > trackQualityTrends > handles insufficient data 0ms
 âœ“ |components| tests/components/storage/StorageStatsView.test.tsx > StorageStatsView > renders loading state 25ms
 âœ“ |components| tests/components/storage/StorageStatsView.test.tsx > StorageStatsView > renders stats correctly 26ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > OpenAI Service > generateComplianceDocuments > generates multiple documents 1002ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > Anthropic Service > generateDocumentWithClaude > generates content successfully 1ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > Anthropic Service > analyzeDocumentQuality > analyzes quality successfully 0ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > Anthropic Service > analyzeDocumentQuality > handles parsing errors gracefully 0ms
 âœ“ |unit| tests/unit/ai-services.test.ts > AI Services > Anthropic Service > generateComplianceInsights > generates insights successfully 0ms
stderr | tests/integration/e2e-flows.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stderr | tests/unit/auth.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should show SOC2 trust principles when SOC2 is selected 1326ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > User Creation and Authentication > should create a user with valid data 3ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > User Creation and Authentication > should upsert user on login 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > User Creation and Authentication > should find user by email for login 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > User Creation and Authentication > should return undefined for non-existent email 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Role-Based Access Control > should create user with default role 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Role-Based Access Control > should create admin user 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Role-Based Access Control > should update user role 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Organization Membership > should add user to organization 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Organization Membership > should get user organizations 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Organization Membership > should update user organization role 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Organization Membership > should remove user from organization 0ms
 âœ“ |unit| tests/unit/auth.test.ts > Authentication Unit Tests > Session Management > should create user sessions 0ms
 âœ“ |unit| tests/unit/complianceDeadlineService.test.ts > ComplianceDeadlineService > createDeadline > creates and stores a deadline 5ms
 âœ“ |unit| tests/unit/complianceDeadlineService.test.ts > ComplianceDeadlineService > checkOverdueDeadlines > marks pending deadlines as overdue if past due date 1ms
 âœ“ |unit| tests/unit/complianceDeadlineService.test.ts > ComplianceDeadlineService > processReminders > sends reminders when due 1ms
 âœ“ |unit| tests/integration/frameworkControlStatuses.test.ts > FrameworkControlStatuses Routes > GET /api/framework-control-statuses > returns statuses for a framework 39ms
 âœ“ |unit| tests/integration/frameworkControlStatuses.test.ts > FrameworkControlStatuses Routes > GET /api/framework-control-statuses > returns 400 if framework is missing 6ms
 âœ“ |unit| tests/integration/frameworkControlStatuses.test.ts > FrameworkControlStatuses Routes > PUT /api/framework-control-statuses/:controlId > updates existing status 47ms
 âœ“ |unit| tests/integration/frameworkControlStatuses.test.ts > FrameworkControlStatuses Routes > GET /api/framework-control-statuses/summary > returns summary statistics 5ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeImage > analyzes image successfully 4ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeImage > handles compliance analysis 2ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeImage > handles diagram analysis 0ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeImage > handles document analysis 0ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeImage > throws on invalid image format 1ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeImage > handles raw base64 without prefix 0ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeMultipleImages > processes multiple images 1ms
 âœ“ |unit| tests/unit/geminiVision.test.ts > geminiVision > analyzeMultipleImages > handles errors gracefully in batch 0ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should hide SOC2 trust principles when SOC2 is deselected 1315ms
 âœ“ |components| tests/components/dashboard/RecentDocuments.test.tsx > RecentDocuments > renders list of documents 75ms
 âœ“ |components| tests/components/dashboard/RecentDocuments.test.tsx > RecentDocuments > renders nothing when empty 2ms
stderr | tests/unit/aiOrchestrator.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > checkGuardrails > allows safe prompt 4ms
 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > checkGuardrails > blocks high risk keywords (injection) 1ms
 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > checkGuardrails > flags PII 1ms
 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > checkGuardrails > logs check results to DB 3ms
 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > checkGuardrails > throws error if missing requestId 2ms
 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > getGuardrailLogs > builds query with options 1ms
 âœ“ |unit| tests/unit/aiGuardrailsService.test.ts > AIGuardrailsService > submitHumanReview > updates log entry 2ms
 âœ“ |unit| tests/unit/enterpriseAuthService.test.ts > EnterpriseAuthService > createAccount > should create a new account successfully 3ms
 âœ“ |unit| tests/unit/enterpriseAuthService.test.ts > EnterpriseAuthService > createAccount > should throw ConflictError if email exists 2ms
 âœ“ |unit| tests/unit/enterpriseAuthService.test.ts > EnterpriseAuthService > authenticateUser > should authenticate valid credentials 3ms
 âœ“ |unit| tests/unit/enterpriseAuthService.test.ts > EnterpriseAuthService > authenticateUser > should lock account after max attempts 3ms
stderr | tests/integration/gap-analysis.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stdout | tests/unit/pdfSecurityService.test.ts > PDFSecurityService > securePDF > secures a PDF successfully
[32m2026-01-18T03:59:13.411Z [INFO] Watermark applied to PDF {"pages":0,"text":"CONFIDENTIAL","position":"center","opacity":0.5}[0m

stdout | tests/unit/pdfSecurityService.test.ts > PDFSecurityService > securePDF > secures a PDF successfully
[32m2026-01-18T03:59:13.417Z [INFO] PDF security settings saved {"fileId":"file-123","securedFilePath":"uploads/secured-pdfs/file-123-secured.pdf"}[0m

stdout | tests/unit/pdfSecurityService.test.ts > PDFSecurityService > securePDF > secures a PDF successfully
[32m2026-01-18T03:59:13.418Z [INFO] PDF security applied {"fileId":"file-123","originalSize":11,"securedSize":3}[0m

stderr | tests/unit/pdfSecurityService.test.ts > PDFSecurityService > securePDF > throws if file metadata not found
[31m2026-01-18T03:59:13.420Z [ERROR] Failed to secure PDF {"fileId":"file-123","error":"Original file metadata not found"}[0m

stdout | tests/unit/pdfSecurityService.test.ts > PDFSecurityService > removePDFSecurity > removes security settings
[32m2026-01-18T03:59:13.422Z [INFO] PDF security settings removed {"fileId":"file-123","userId":"user-1"}[0m

 âœ“ |unit| tests/unit/pdfSecurityService.test.ts > PDFSecurityService > securePDF > secures a PDF successfully 10ms
 âœ“ |unit| tests/unit/pdfSecurityService.test.ts > PDFSecurityService > securePDF > throws if file metadata not found 2ms
 âœ“ |unit| tests/unit/pdfSecurityService.test.ts > PDFSecurityService > removePDFSecurity > removes security settings 1ms
 âœ“ |unit| tests/unit/pdfSecurityService.test.ts > PDFSecurityService > removePDFSecurity > returns false if settings do not exist 1ms
 âœ“ |unit| tests/unit/dataResidencyService.test.ts > DataResidencyService > createPolicy > should create a new policy 5ms
 âœ“ |unit| tests/unit/dataResidencyService.test.ts > DataResidencyService > createPolicy > should throw error on creation failure 1ms
 âœ“ |unit| tests/unit/dataResidencyService.test.ts > DataResidencyService > validateRegion > should allow if no policies match data type 1ms
 âœ“ |unit| tests/unit/dataResidencyService.test.ts > DataResidencyService > validateRegion > should block if region is in blockedRegions 0ms
 âœ“ |unit| tests/unit/dataResidencyService.test.ts > DataResidencyService > validateRegion > should block if strict enforcement and region not in allowedRegions 0ms
 âœ“ |unit| tests/unit/dataResidencyService.test.ts > DataResidencyService > validateRegion > should allow if region is in allowedRegions 0ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > getSpreadsheetTemplates > returns mapped templates for ISO27001 2ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > getSpreadsheetTemplates > returns empty fields if profile is missing data 0ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > getSpreadsheetTemplates > throws error for invalid framework 1ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > autofillTemplateFields > uses AI to fill fields 1ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > autofillTemplateFields > handles invalid JSON from AI 2ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > autofillTemplateFields > returns empty array if field list is empty 1ms
 âœ“ |unit| tests/unit/frameworkSpreadsheetService.test.ts > FrameworkSpreadsheetService > saveTemplateData > persists data in memory 1ms
 âœ“ |unit| tests/unit/threatDetectionService.test.ts > ThreatDetectionService > SQL Injection Detection > detects basic SQL injection patterns 5ms
 âœ“ |unit| tests/unit/threatDetectionService.test.ts > ThreatDetectionService > XSS Detection > detects script tags 1ms
 âœ“ |unit| tests/unit/threatDetectionService.test.ts > ThreatDetectionService > Command Injection Detection > detects system command attempts 1ms
 âœ“ |unit| tests/unit/threatDetectionService.test.ts > ThreatDetectionService > Brute Force Detection > detects brute force after threshold 1ms
 âœ“ |unit| tests/unit/threatDetectionService.test.ts > ThreatDetectionService > Brute Force Detection > clears suspicious IPs after timeout 3ms
 âœ“ |unit| tests/unit/threatDetectionService.test.ts > ThreatDetectionService > Metrics > returns correct metrics structure 0ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should show FedRAMP level when FedRAMP is selected 1339ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > getTemplatesByFramework > returns templates for valid framework 2ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > getTemplatesByFramework > returns empty array for invalid framework 1ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > getTemplateById > finds existing template 0ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > getTemplateById > returns null for non-existent template 0ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > validateTemplateVariables > validates required variables 2ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > generateDocument > replaces variables in content 1ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > generateDocument > handles missing variables placeholders 0ms
 âœ“ |unit| tests/unit/documentTemplates.test.ts > DocumentTemplateService > queryTemplates > filters by framework 2ms
 âœ“ |unit| tests/unit/aiOrchestrator.test.ts > AIOrchestrator > generateDocument > generates document using optimal model (Claude for Policy) 3ms
 âœ“ |unit| tests/unit/aiOrchestrator.test.ts > AIOrchestrator > generateDocument > fails gracefully if guardrails block input 1ms
 âœ“ |unit| tests/unit/aiOrchestrator.test.ts > AIOrchestrator > generateDocument > falls back to OpenAI if Claude fails 0ms
 âœ“ |unit| tests/unit/aiOrchestrator.test.ts > AIOrchestrator > generateDocument > sanitizes output if guardrails require it 0ms
 âœ“ |unit| tests/unit/aiOrchestrator.test.ts > AIOrchestrator > generateContent > generates content successfully 1ms
 âœ“ |unit| tests/unit/aiOrchestrator.test.ts > AIOrchestrator > generateContent > reports blocked content 0ms
 âœ“ |unit| tests/unit/cloudIntegrationService.test.ts > CloudIntegrationService > createIntegration > should create integration successfully 3ms
 âœ“ |unit| tests/unit/cloudIntegrationService.test.ts > CloudIntegrationService > syncFiles > should sync google drive files 6ms
 âœ“ |unit| tests/unit/cloudIntegrationService.test.ts > CloudIntegrationService > syncFiles > should handle inactive integration 2ms
stdout | tests/unit/encryptionService.test.ts > EncryptionService > encrypts and decrypts sensitive field
[32m2026-01-18T03:59:14.658Z [INFO] Data encrypted successfully with AES-256-GCM {"classification":"confidential","encryptionVersion":2}[0m

stdout | tests/unit/encryptionService.test.ts > EncryptionService > encrypts and decrypts sensitive field
[32m2026-01-18T03:59:14.662Z [INFO] Data decrypted successfully with AES-256-GCM {"encryptionVersion":2}[0m

stdout | tests/unit/encryptionService.test.ts > EncryptionService > detects when migration is not needed
[32m2026-01-18T03:59:14.664Z [INFO] Data encrypted successfully with AES-256-GCM {"classification":"public","encryptionVersion":2}[0m

stdout | tests/unit/encryptionService.test.ts > EncryptionService > encryptDataAtRest Helper > encrypts object fields matching criteria
[32m2026-01-18T03:59:14.667Z [INFO] Data encrypted successfully with AES-256-GCM {"classification":"restricted","encryptionVersion":2}[0m

 âœ“ |unit| tests/unit/dataRetentionService.test.ts > DataRetentionService > createPolicy > creates a new policy successfully 2ms
 âœ“ |unit| tests/unit/dataRetentionService.test.ts > DataRetentionService > shouldRetain > returns retain=true if no policy exists 1ms
 âœ“ |unit| tests/unit/dataRetentionService.test.ts > DataRetentionService > shouldRetain > returns retain=false if data is older than retention period 2ms
stdout | tests/unit/encryptionService.test.ts > EncryptionService > encryptDataAtRest Helper > decrypts object fields
[32m2026-01-18T03:59:14.667Z [INFO] Data encrypted successfully with AES-256-GCM {"classification":"restricted","encryptionVersion":2}[0m

stdout | tests/unit/encryptionService.test.ts > EncryptionService > encryptDataAtRest Helper > decrypts object fields
[32m2026-01-18T03:59:14.668Z [INFO] Data decrypted successfully with AES-256-GCM {"encryptionVersion":2}[0m

 âœ“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > encrypts and decrypts sensitive field 9ms
 âœ“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > generates unique encryption keys 1ms
 âœ“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > detects when migration is not needed 1ms
 âœ“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > hashes for indexing deterministically 2ms
 âœ“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > encryptDataAtRest Helper > encrypts object fields matching criteria 1ms
 âœ“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > encryptDataAtRest Helper > decrypts object fields 2ms
 â†“ |unit| tests/unit/encryptionService.test.ts > EncryptionService > throws error if ENCRYPTION_KEY is missing
stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return low risk for known context
[32m2026-01-18T03:59:14.689Z [INFO] Calculating session risk score {"userId":"u1","ipAddress":"[IP_REDACTED]"}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return low risk for known context
[32m2026-01-18T03:59:14.694Z [INFO] Risk score calculated {"userId":"u1","score":10,"level":"low","requiresMFA":false,"blockSession":false}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return high risk for new device + new location + impossible travel
[32m2026-01-18T03:59:14.695Z [INFO] Calculating session risk score {"userId":"u1","ipAddress":"[IP_REDACTED]"}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return high risk for new device + new location + impossible travel
[32m2026-01-18T03:59:14.696Z [INFO] Risk score calculated {"userId":"u1","score":75,"level":"high","requiresMFA":true,"blockSession":false}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should penalize recent failed logins
[32m2026-01-18T03:59:14.696Z [INFO] Calculating session risk score {"userId":"u1","ipAddress":"[IP_REDACTED]"}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should penalize recent failed logins
[32m2026-01-18T03:59:14.697Z [INFO] Risk score calculated {"userId":"u1","score":30,"level":"low","requiresMFA":false,"blockSession":false}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return critical risk for TOR network
[32m2026-01-18T03:59:14.697Z [INFO] Calculating session risk score {"userId":"u1","ipAddress":"[IP_REDACTED]"}[0m

stdout | tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return critical risk for TOR network
[32m2026-01-18T03:59:14.698Z [INFO] Risk score calculated {"userId":"u1","score":15,"level":"low","requiresMFA":false,"blockSession":false}[0m

 âœ“ |unit| tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return low risk for known context 7ms
 âœ“ |unit| tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return high risk for new device + new location + impossible travel 1ms
 âœ“ |unit| tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should penalize recent failed logins 1ms
 âœ“ |unit| tests/unit/sessionRiskScoringService.test.ts > SessionRiskScoringService > should return critical risk for TOR network 1ms
stderr | tests/integration/health.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return health status
[31m2026-01-18T03:59:15.007Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should include check results
[31m2026-01-18T03:59:15.030Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return health status 84ms
 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > GET /health > should include check results 13ms
stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return overall status based on checks
[31m2026-01-18T03:59:15.042Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > GET /ready > should return readiness status
[31m2026-01-18T03:59:15.051Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.116Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.117Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.119Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.120Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.121Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.122Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.123Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.124Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.126Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stderr | tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks
[31m2026-01-18T03:59:15.139Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > GET /health > should return overall status based on checks 9ms
 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > GET /ready > should return readiness status 9ms
 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > GET /live > should return liveness status 5ms
 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > GET /live > should have positive uptime 5ms
 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should respond consistently to multiple requests 11ms
 âœ“ |unit| tests/integration/health.test.ts > Health Check Endpoints > Health check reliability > should not crash on concurrent health checks 70ms
 âœ“ |unit| tests/unit/qualityScoringService.test.ts > QualityScoringService > analyzeDocumentQuality > should analyze quality successfully 2ms
 âœ“ |unit| tests/unit/qualityScoringService.test.ts > QualityScoringService > analyzeContentStructure > should analyze structure 0ms
 âœ“ |unit| tests/unit/qualityScoringService.test.ts > QualityScoringService > checkFrameworkAlignment > should check alignment 0ms
 âœ“ |unit| tests/unit/qualityScoringService.test.ts > QualityScoringService > trackQualityTrends > should track improving trend 0ms
 âœ“ |unit| tests/unit/qualityScoringService.test.ts > QualityScoringService > trackQualityTrends > should handle insufficient data 0ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should allow selecting FedRAMP level 1454ms
 âœ“ |unit| tests/unit/documentWorkflowService.test.ts > DocumentWorkflowService > executeTransition > should transition from draft to review 4ms
 âœ“ |unit| tests/unit/documentWorkflowService.test.ts > DocumentWorkflowService > executeTransition > should require approval to transition from review to approved 0ms
 âœ“ |unit| tests/unit/documentWorkflowService.test.ts > DocumentWorkflowService > executeTransition > should fail with invalid transition 0ms
 âœ“ |unit| tests/unit/documentWorkflowService.test.ts > DocumentWorkflowService > createApprovalRequest > should create approval request for document in review 0ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > createOrganizationSchema > validates valid input 2ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > createOrganizationSchema > fails on missing name 1ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > createOrganizationSchema > validates email format 0ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > analyzeQualitySchema > requires content and framework 0ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > generateComplianceDocsSchema > validates complex nested structure 0ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > generateComplianceDocsSchema > enforces array min length 0ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > chatMessageSchema > validates message length 0ms
 âœ“ |unit| tests/unit/requestSchemas.test.ts > requestSchemas > mfaSetupSchema > validates method enum 0ms
 âœ“ |unit| tests/unit/emailService.test.ts > EmailService > configuration > skips email if API key is missing 3ms
 âœ“ |unit| tests/unit/emailService.test.ts > EmailService > sendVerificationEmail > sends email successfully 4ms
 âœ“ |unit| tests/unit/emailService.test.ts > EmailService > sendVerificationEmail > handles API failure 1ms
 âœ“ |unit| tests/unit/emailService.test.ts > EmailService > sendVerificationEmail > handles network error 1ms
 âœ“ |unit| tests/unit/emailService.test.ts > EmailService > sendPasswordResetEmail > sends email successfully 1ms
 âœ“ |unit| tests/unit/aiModels.test.ts > AI Models Configuration > should have defined model configurations 2ms
 âœ“ |unit| tests/unit/aiModels.test.ts > AI Models Configuration > should have correct OPENAI configuration 0ms
 âœ“ |unit| tests/unit/aiModels.test.ts > AI Models Configuration > should have correct ANTHROPIC configuration 1ms
 âœ“ |unit| tests/unit/aiModels.test.ts > AI Models Configuration > should have correct GOOGLE configuration 0ms
 âœ“ |unit| tests/unit/aiModels.test.ts > Model Selection Strategy > should return correct strategy for COMPLIANCE_GENERATION 1ms
 âœ“ |unit| tests/unit/aiModels.test.ts > Model Selection Strategy > should return correct strategy for RISK_ANALYSIS 0ms
 âœ“ |unit| tests/unit/aiModels.test.ts > Model Selection Strategy > should return correct strategy for LARGE_CONTEXT 0ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeString > masks emails 2ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeString > masks IPv4 1ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeString > masks IPv6 0ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeString > masks credit cards 0ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeString > masks sensitive headers/tokens 0ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeObject > recursively sanitizes 0ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeObject > redacts sensitive keys 0ms
 âœ“ |unit| tests/unit/logSanitizer.test.ts > logSanitizer > sanitizeRequestForLogging > sanitizes request parts 0ms
stderr | tests/unit/storage.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |unit| tests/unit/auditService.test.ts > AuditService > should log an audit event successfully 3ms
 âœ“ |unit| tests/unit/auditService.test.ts > AuditService > should log high risk event with warning 3ms
 âœ“ |unit| tests/unit/auditService.test.ts > AuditService > should calculate risk level correctly via auditFromRequest 3ms
stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests
[32m2026-01-18T03:59:16.493Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests
[32m2026-01-18T03:59:16.502Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

 âœ“ |unit| tests/unit/storage.test.ts > Storage Layer Tests > User Operations > should create and retrieve users 3ms
 âœ“ |unit| tests/unit/storage.test.ts > Storage Layer Tests > User Operations > should find users by email 0ms
 âœ“ |unit| tests/unit/storage.test.ts > Storage Layer Tests > User Operations > should update user information 0ms
 âœ“ |unit| tests/unit/storage.test.ts > Storage Layer Tests > Organization Operations > should create and manage organizations 0ms
 âœ“ |unit| tests/unit/storage.test.ts > Storage Layer Tests > Organization Operations > should find organizations by slug 0ms
 âœ“ |unit| tests/unit/storage.test.ts > Storage Layer Tests > Company Profile Operations > should create company profiles with proper structure 0ms
 âœ“ |unit| tests/unit/errorHandler.test.ts > errorHandler > handleError handles explicit Error objects 7ms
 âœ“ |unit| tests/unit/errorHandler.test.ts > errorHandler > handleError handles unknown errors 1ms
 âœ“ |unit| tests/unit/errorHandler.test.ts > errorHandler > createErrorHandler returns a middleware function 1ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should require at least one framework 1234ms
 âœ“ |unit| tests/unit/keyRotationService.test.ts > KeyRotationService > rotateEncryptionKey > rotates encryption key and logs audit event 8ms
 âœ“ |unit| tests/unit/keyRotationService.test.ts > KeyRotationService > checkRotationDue > returns false if recently rotated 1ms
 âœ“ |unit| tests/unit/keyRotationService.test.ts > KeyRotationService > checkRotationDue > returns true if never rotated 0ms
 âœ“ |unit| tests/unit/keyRotationService.test.ts > KeyRotationService > performScheduledRotations > skips if not due 1ms
 âœ“ |unit| tests/unit/keyRotationService.test.ts > KeyRotationService > performScheduledRotations > rotates if due 0ms
stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis
{"type":"request_start","traceId":"d27387b2-552a-4629-8b4d-6ffa585d7104","spanId":"110551d5","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:16.974Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication for organization creation
{"type":"request_start","traceId":"221db128-0a71-48dd-ba46-4af86af77822","spanId":"c48619a8","method":"POST","path":"/api/organizations","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:16.974Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication for organization creation
[32m2026-01-18T03:59:16.977Z [INFO] POST /api/organizations {"method":"POST","url":"/api/organizations","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:16.977Z"}[0m
[32m2026-01-18T03:59:16.981Z [INFO] API route accessed {"path":"/api/organizations","method":"POST","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis
[33m2026-01-18T03:59:16.979Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis
[32m2026-01-18T03:59:16.976Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:16.976Z"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis
{"type":"request_end","traceId":"d27387b2-552a-4629-8b4d-6ffa585d7104","spanId":"110551d5","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":15,"timestamp":"2026-01-18T03:59:16.989Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication for organization creation
{"type":"request_end","traceId":"221db128-0a71-48dd-ba46-4af86af77822","spanId":"c48619a8","method":"POST","path":"/api/organizations","statusCode":401,"duration":16,"timestamp":"2026-01-18T03:59:16.990Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication to list organizations
{"type":"request_start","traceId":"7b9af0a0-59bc-4582-86f3-dc167f469ec3","spanId":"93686d3f","method":"GET","path":"/api/organizations","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:16.999Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication to list organizations
[32m2026-01-18T03:59:17.000Z [INFO] GET /api/organizations {"method":"GET","url":"/api/organizations","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.000Z"}[0m
[32m2026-01-18T03:59:17.000Z [INFO] API route accessed {"path":"/api/organizations","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication to list organizations
{"type":"request_end","traceId":"7b9af0a0-59bc-4582-86f3-dc167f469ec3","spanId":"93686d3f","method":"GET","path":"/api/organizations","statusCode":401,"duration":4,"timestamp":"2026-01-18T03:59:17.003Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication to update recommendations
{"type":"request_start","traceId":"bfc13ad7-c299-44aa-be93-4f060ca460f9","spanId":"1e846fe9","method":"PATCH","path":"/api/gap-analysis/recommendations/test-id","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.004Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication to update recommendations
[32m2026-01-18T03:59:17.004Z [INFO] PATCH /api/gap-analysis/recommendations/test-id {"method":"PATCH","url":"/api/gap-analysis/recommendations/test-id","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.004Z"}[0m
[32m2026-01-18T03:59:17.005Z [INFO] API route accessed {"path":"/api/gap-analysis/recommendations/test-id","method":"PATCH","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication to update recommendations
{"type":"request_end","traceId":"bfc13ad7-c299-44aa-be93-4f060ca460f9","spanId":"1e846fe9","method":"PATCH","path":"/api/gap-analysis/recommendations/test-id","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:17.007Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication for company profile creation
{"type":"request_start","traceId":"71a7e485-f746-4aeb-8911-846fb9983fb8","spanId":"3d77e51b","method":"POST","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.008Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication for company profile creation
[32m2026-01-18T03:59:17.008Z [INFO] POST /api/company-profiles {"method":"POST","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.008Z"}[0m
[32m2026-01-18T03:59:17.009Z [INFO] API route accessed {"path":"/api/company-profiles","method":"POST","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication for company profile creation
{"type":"request_end","traceId":"71a7e485-f746-4aeb-8911-846fb9983fb8","spanId":"3d77e51b","method":"POST","path":"/api/company-profiles","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.010Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Analysis Endpoint > should analyze compliance gaps
{"type":"request_start","traceId":"bbef08f5-8a9b-44b8-9144-0e9db18b01b1","spanId":"230813c4","method":"POST","path":"/api/analyze-compliance-gaps","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.011Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Analysis Endpoint > should analyze compliance gaps
[32m2026-01-18T03:59:17.011Z [INFO] POST /api/analyze-compliance-gaps {"method":"POST","url":"/api/analyze-compliance-gaps","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.011Z"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Analysis Endpoint > should analyze compliance gaps
[33m2026-01-18T03:59:17.012Z [WARN] Unknown API route accessed {"path":"/api/analyze-compliance-gaps","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Analysis Endpoint > should analyze compliance gaps
{"type":"request_end","traceId":"bbef08f5-8a9b-44b8-9144-0e9db18b01b1","spanId":"230813c4","method":"POST","path":"/api/analyze-compliance-gaps","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.013Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request
{"type":"request_start","traceId":"bcbe1c0c-c82f-4a7e-8e40-bdf1fb11629a","spanId":"29f9c58f","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.018Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication to get company profile
{"type":"request_start","traceId":"8443855a-24d2-4488-9da7-2eabd48e1abc","spanId":"ca0ecf63","method":"GET","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.019Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request
[32m2026-01-18T03:59:17.018Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.018Z"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request
[33m2026-01-18T03:59:17.019Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request
{"type":"request_end","traceId":"bcbe1c0c-c82f-4a7e-8e40-bdf1fb11629a","spanId":"29f9c58f","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.020Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication to get company profile
[32m2026-01-18T03:59:17.020Z [INFO] GET /api/company-profiles {"method":"GET","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.020Z"}[0m
[32m2026-01-18T03:59:17.020Z [INFO] API route accessed {"path":"/api/company-profiles","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication to get company profile
{"type":"request_end","traceId":"8443855a-24d2-4488-9da7-2eabd48e1abc","spanId":"ca0ecf63","method":"GET","path":"/api/company-profiles","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:17.022Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request
{"type":"request_start","traceId":"fb1fa46a-6ab7-40e3-a711-2d7e82dd6684","spanId":"dca3f576","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.023Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request
[33m2026-01-18T03:59:17.024Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request
[32m2026-01-18T03:59:17.023Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.023Z"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request
{"type":"request_end","traceId":"fb1fa46a-6ab7-40e3-a711-2d7e82dd6684","spanId":"dca3f576","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.025Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences
{"type":"request_start","traceId":"1bf5f1b1-abab-4b8a-901d-e5ec0e8f73b1","spanId":"84c7293e","method":"PATCH","path":"/api/company-profiles/1","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.025Z"}

 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication for gap analysis 74ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Creation > should require authentication to update recommendations 8ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Analysis Endpoint > should analyze compliance gaps 7ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle SOC2 framework gap analysis request 6ms
stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences
[33m2026-01-18T03:59:17.026Z [WARN] Unknown API route accessed {"path":"/api/company-profiles/1","method":"PATCH","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences
[32m2026-01-18T03:59:17.026Z [INFO] PATCH /api/company-profiles/1 {"method":"PATCH","url":"/api/company-profiles/1","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.026Z"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences
{"type":"request_end","traceId":"1bf5f1b1-abab-4b8a-901d-e5ec0e8f73b1","spanId":"84c7293e","method":"PATCH","path":"/api/company-profiles/1","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:17.028Z"}

 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication for organization creation 70ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Organization Setup > should require authentication to list organizations 9ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication for company profile creation 6ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Company Profile Creation > should require authentication to get company profile 11ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Onboarding Flow > Initial Framework Selection > should require authentication to update framework preferences 6ms
stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request
{"type":"request_start","traceId":"dafb7947-a9f3-4ed9-96da-0a9e3e288530","spanId":"18d3a44d","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.029Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request
[33m2026-01-18T03:59:17.030Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request
[32m2026-01-18T03:59:17.030Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.030Z"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request
{"type":"request_end","traceId":"dafb7947-a9f3-4ed9-96da-0a9e3e288530","spanId":"18d3a44d","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:17.032Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document generation
{"type":"request_start","traceId":"4dec4bf6-537b-493f-8eff-20f5264a062e","spanId":"fdfdff22","method":"POST","path":"/api/ai/generate-compliance-docs","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.032Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document generation
[32m2026-01-18T03:59:17.032Z [INFO] POST /api/ai/generate-compliance-docs {"method":"POST","url":"/api/ai/generate-compliance-docs","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.032Z"}[0m
[32m2026-01-18T03:59:17.033Z [INFO] API route accessed {"path":"/api/ai/generate-compliance-docs","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document generation
{"type":"request_end","traceId":"4dec4bf6-537b-493f-8eff-20f5264a062e","spanId":"fdfdff22","method":"POST","path":"/api/ai/generate-compliance-docs","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.034Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request
{"type":"request_start","traceId":"ec3d786e-fa8d-4b6c-8eeb-34218c73ff30","spanId":"51ffae9d","method":"POST","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.035Z"}

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request
[33m2026-01-18T03:59:17.036Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request
[32m2026-01-18T03:59:17.036Z [INFO] POST /api/gap-analysis {"method":"POST","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.036Z"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request
{"type":"request_end","traceId":"ec3d786e-fa8d-4b6c-8eeb-34218c73ff30","spanId":"51ffae9d","method":"POST","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.037Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document analysis
{"type":"request_start","traceId":"20bc9093-f048-48eb-bb18-83b6c8353b83","spanId":"7c46b91b","method":"POST","path":"/api/ai/analyze-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.038Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document analysis
[32m2026-01-18T03:59:17.038Z [INFO] POST /api/ai/analyze-document {"method":"POST","url":"/api/ai/analyze-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.038Z"}[0m
[32m2026-01-18T03:59:17.039Z [INFO] API route accessed {"path":"/api/ai/analyze-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document analysis
{"type":"request_end","traceId":"20bc9093-f048-48eb-bb18-83b6c8353b83","spanId":"7c46b91b","method":"POST","path":"/api/ai/analyze-document","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.040Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Document Quality for Compliance > should analyze document quality against framework
{"type":"request_start","traceId":"fd4d3174-69d2-46ab-98ec-f92688db40ab","spanId":"b9800e58","method":"POST","path":"/api/analyze-document-quality","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.042Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Document Quality for Compliance > should analyze document quality against framework
[32m2026-01-18T03:59:17.042Z [INFO] POST /api/analyze-document-quality {"method":"POST","url":"/api/analyze-document-quality","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.042Z"}[0m
[32m2026-01-18T03:59:17.042Z [INFO] API route accessed {"path":"/api/analyze-document-quality","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Document Quality for Compliance > should analyze document quality against framework
{"type":"request_end","traceId":"fd4d3174-69d2-46ab-98ec-f92688db40ab","spanId":"b9800e58","method":"POST","path":"/api/analyze-document-quality","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.044Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should return AI service health status
[32m2026-01-18T03:59:17.044Z [INFO] GET /api/ai/health {"method":"GET","url":"/api/ai/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.044Z"}[0m
[32m2026-01-18T03:59:17.044Z [INFO] API route accessed {"path":"/api/ai/health","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for report access
{"type":"request_start","traceId":"1cc925a0-2462-4836-bef3-9f755d281f3d","spanId":"b046a6d0","method":"GET","path":"/api/gap-analysis/reports","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.048Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for report access
[32m2026-01-18T03:59:17.048Z [INFO] GET /api/gap-analysis/reports {"method":"GET","url":"/api/gap-analysis/reports","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.048Z"}[0m
[32m2026-01-18T03:59:17.049Z [INFO] API route accessed {"path":"/api/gap-analysis/reports","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload
{"type":"request_start","traceId":"d2f96f2a-b90d-406a-9350-d43bb4abb36a","spanId":"58cb3815","method":"POST","path":"/api/evidence","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.051Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for report access
{"type":"request_end","traceId":"1cc925a0-2462-4836-bef3-9f755d281f3d","spanId":"b046a6d0","method":"GET","path":"/api/gap-analysis/reports","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:17.051Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload
[32m2026-01-18T03:59:17.051Z [INFO] POST /api/evidence {"method":"POST","url":"/api/evidence","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.051Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload
[33m2026-01-18T03:59:17.051Z [WARN] Unknown API route accessed {"path":"/api/evidence","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload
{"type":"request_end","traceId":"d2f96f2a-b90d-406a-9350-d43bb4abb36a","spanId":"58cb3815","method":"POST","path":"/api/evidence","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.053Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for specific report
{"type":"request_start","traceId":"78c6df83-7826-412d-9ec8-028f03e5b5a2","spanId":"e5e83ac7","method":"GET","path":"/api/gap-analysis/reports/test-report-id","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.055Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence
{"type":"request_start","traceId":"e150c524-08b9-475d-86f1-dc1bd752d887","spanId":"18fcc984","method":"GET","path":"/api/evidence","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.056Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for specific report
[32m2026-01-18T03:59:17.055Z [INFO] GET /api/gap-analysis/reports/test-report-id {"method":"GET","url":"/api/gap-analysis/reports/test-report-id","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.055Z"}[0m
[32m2026-01-18T03:59:17.055Z [INFO] API route accessed {"path":"/api/gap-analysis/reports/test-report-id","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for specific report
{"type":"request_end","traceId":"78c6df83-7826-412d-9ec8-028f03e5b5a2","spanId":"e5e83ac7","method":"GET","path":"/api/gap-analysis/reports/test-report-id","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.057Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence
[32m2026-01-18T03:59:17.056Z [INFO] GET /api/evidence {"method":"GET","url":"/api/evidence","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.056Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence
[33m2026-01-18T03:59:17.057Z [WARN] Unknown API route accessed {"path":"/api/evidence","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence
{"type":"request_end","traceId":"e150c524-08b9-475d-86f1-dc1bd752d887","spanId":"18fcc984","method":"GET","path":"/api/evidence","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.058Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Remediation Tracking > should require authentication for remediation updates
{"type":"request_start","traceId":"1bfb4ef5-5d84-4c7c-bb44-9edfcc542789","spanId":"03196056","method":"PATCH","path":"/api/gap-analysis/recommendations/test-rec-id","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.060Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals
{"type":"request_start","traceId":"b96fcf3f-11e1-46fd-97b1-18b2f9b10cae","spanId":"2a23a5a2","method":"GET","path":"/api/controls/approvals","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.061Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Remediation Tracking > should require authentication for remediation updates
[32m2026-01-18T03:59:17.061Z [INFO] PATCH /api/gap-analysis/recommendations/test-rec-id {"method":"PATCH","url":"/api/gap-analysis/recommendations/test-rec-id","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.061Z"}[0m
[32m2026-01-18T03:59:17.061Z [INFO] API route accessed {"path":"/api/gap-analysis/recommendations/test-rec-id","method":"PATCH","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Remediation Tracking > should require authentication for remediation updates
{"type":"request_end","traceId":"1bfb4ef5-5d84-4c7c-bb44-9edfcc542789","spanId":"03196056","method":"PATCH","path":"/api/gap-analysis/recommendations/test-rec-id","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.062Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals
[32m2026-01-18T03:59:17.061Z [INFO] GET /api/controls/approvals {"method":"GET","url":"/api/controls/approvals","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.061Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals
[33m2026-01-18T03:59:17.062Z [WARN] Unknown API route accessed {"path":"/api/controls/approvals","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals
{"type":"request_end","traceId":"b96fcf3f-11e1-46fd-97b1-18b2f9b10cae","spanId":"2a23a5a2","method":"GET","path":"/api/controls/approvals","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.063Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Risk Assessment > should handle risk assessment requests
{"type":"request_start","traceId":"d74cd3d9-3ce7-4685-adc6-56d29f03bedf","spanId":"0cbad768","method":"POST","path":"/api/risk-assessment","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.066Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control
{"type":"request_start","traceId":"28bbf96f-85e3-4a98-9130-6fccfb4de4b5","spanId":"6d18639b","method":"POST","path":"/api/controls/1/approve","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.066Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control
[32m2026-01-18T03:59:17.066Z [INFO] POST /api/controls/1/approve {"method":"POST","url":"/api/controls/1/approve","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.066Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control
[33m2026-01-18T03:59:17.067Z [WARN] Unknown API route accessed {"path":"/api/controls/1/approve","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Risk Assessment > should handle risk assessment requests
[32m2026-01-18T03:59:17.066Z [INFO] POST /api/risk-assessment {"method":"POST","url":"/api/risk-assessment","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.066Z"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Risk Assessment > should handle risk assessment requests
[33m2026-01-18T03:59:17.066Z [WARN] Unknown API route accessed {"path":"/api/risk-assessment","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Risk Assessment > should handle risk assessment requests
{"type":"request_end","traceId":"d74cd3d9-3ce7-4685-adc6-56d29f03bedf","spanId":"0cbad768","method":"POST","path":"/api/risk-assessment","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.068Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control
{"type":"request_end","traceId":"28bbf96f-85e3-4a98-9130-6fccfb4de4b5","spanId":"6d18639b","method":"POST","path":"/api/controls/1/approve","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.068Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail
{"type":"request_start","traceId":"cbe9fcf0-274a-4810-84ad-64bead925014","spanId":"9a5d1d5d","method":"GET","path":"/api/audit-trail","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.071Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Scoring > should calculate compliance score
{"type":"request_start","traceId":"d2d438af-97d0-4259-a5d3-d4d774986f15","spanId":"78635b59","method":"POST","path":"/api/analyze-compliance-gaps","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.071Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail
[32m2026-01-18T03:59:17.071Z [INFO] GET /api/audit-trail {"method":"GET","url":"/api/audit-trail","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.071Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail
[33m2026-01-18T03:59:17.072Z [WARN] Unknown API route accessed {"path":"/api/audit-trail","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stderr | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Scoring > should calculate compliance score
[33m2026-01-18T03:59:17.072Z [WARN] Unknown API route accessed {"path":"/api/analyze-compliance-gaps","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Scoring > should calculate compliance score
[32m2026-01-18T03:59:17.071Z [INFO] POST /api/analyze-compliance-gaps {"method":"POST","url":"/api/analyze-compliance-gaps","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.071Z"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Scoring > should calculate compliance score
{"type":"request_end","traceId":"d2d438af-97d0-4259-a5d3-d4d774986f15","spanId":"78635b59","method":"POST","path":"/api/analyze-compliance-gaps","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.073Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail
{"type":"request_end","traceId":"cbe9fcf0-274a-4810-84ad-64bead925014","spanId":"9a5d1d5d","method":"GET","path":"/api/audit-trail","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.073Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to get audit entry details
{"type":"request_start","traceId":"61e838b0-90e4-4ab3-b51a-3eea2d647c73","spanId":"5ce29a7a","method":"GET","path":"/api/audit-trail/1","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.076Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > AI-Powered Analysis > should require authentication for AI gap analysis
{"type":"request_start","traceId":"7ea0e266-25c4-444e-a5cf-b6b5fab5e770","spanId":"1cb7b1e3","method":"POST","path":"/api/ai/analyze-document","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.076Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to get audit entry details
[32m2026-01-18T03:59:17.076Z [INFO] GET /api/audit-trail/1 {"method":"GET","url":"/api/audit-trail/1","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.076Z"}[0m
[32m2026-01-18T03:59:17.077Z [INFO] API route accessed {"path":"/api/audit-trail/1","method":"GET","requiresAuth":true,"requiresMfa":true,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > AI-Powered Analysis > should require authentication for AI gap analysis
[32m2026-01-18T03:59:17.077Z [INFO] POST /api/ai/analyze-document {"method":"POST","url":"/api/ai/analyze-document","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.077Z"}[0m
[32m2026-01-18T03:59:17.077Z [INFO] API route accessed {"path":"/api/ai/analyze-document","method":"POST","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to get audit entry details
{"type":"request_end","traceId":"61e838b0-90e4-4ab3-b51a-3eea2d647c73","spanId":"5ce29a7a","method":"GET","path":"/api/audit-trail/1","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.078Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > AI-Powered Analysis > should require authentication for AI gap analysis
{"type":"request_end","traceId":"7ea0e266-25c4-444e-a5cf-b6b5fab5e770","spanId":"1cb7b1e3","method":"POST","path":"/api/ai/analyze-document","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:17.079Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access
{"type":"request_start","traceId":"4a138ec0-ddc5-4416-95d0-d8a93816b0c1","spanId":"491c2fe2","method":"GET","path":"/api/auditor/documents","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.082Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access
[32m2026-01-18T03:59:17.082Z [INFO] GET /api/auditor/documents {"method":"GET","url":"/api/auditor/documents","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.082Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access
[33m2026-01-18T03:59:17.082Z [WARN] Unknown API route accessed {"path":"/api/auditor/documents","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Framework Requirements > should return framework control requirements
{"type":"request_start","traceId":"8a160c7f-1a17-437a-97da-ba78c50c583e","spanId":"1a3809d3","method":"GET","path":"/api/frameworks/SOC2/required-templates","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.083Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access
{"type":"request_end","traceId":"4a138ec0-ddc5-4416-95d0-d8a93816b0c1","spanId":"491c2fe2","method":"GET","path":"/api/auditor/documents","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.084Z"}

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Framework Requirements > should return framework control requirements
[32m2026-01-18T03:59:17.084Z [INFO] GET /api/frameworks/SOC2/required-templates {"method":"GET","url":"/api/frameworks/SOC2/required-templates","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.084Z"}[0m
[32m2026-01-18T03:59:17.085Z [INFO] API route accessed {"path":"/api/frameworks/SOC2/required-templates","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Framework Requirements > should return framework control requirements
{"type":"request_end","traceId":"8a160c7f-1a17-437a-97da-ba78c50c583e","spanId":"1a3809d3","method":"GET","path":"/api/frameworks/SOC2/required-templates","statusCode":401,"duration":4,"timestamp":"2026-01-18T03:59:17.087Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview
{"type":"request_start","traceId":"6e4e1163-183b-4e44-9b8f-21c32e08335e","spanId":"80ec2738","method":"GET","path":"/api/auditor/overview","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.089Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview
[32m2026-01-18T03:59:17.089Z [INFO] GET /api/auditor/overview {"method":"GET","url":"/api/auditor/overview","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.089Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview
[33m2026-01-18T03:59:17.090Z [WARN] Unknown API route accessed {"path":"/api/auditor/overview","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview
{"type":"request_end","traceId":"6e4e1163-183b-4e44-9b8f-21c32e08335e","spanId":"80ec2738","method":"GET","path":"/api/auditor/overview","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.091Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports
{"type":"request_start","traceId":"d070e14c-1927-4196-a351-5e014f8b5801","spanId":"4f892a91","method":"GET","path":"/api/auditor/export","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.094Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports
[32m2026-01-18T03:59:17.094Z [INFO] GET /api/auditor/export {"method":"GET","url":"/api/auditor/export","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.094Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports
[33m2026-01-18T03:59:17.095Z [WARN] Unknown API route accessed {"path":"/api/auditor/export","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports
{"type":"request_end","traceId":"d070e14c-1927-4196-a351-5e014f8b5801","spanId":"4f892a91","method":"GET","path":"/api/auditor/export","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.096Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis
{"type":"request_start","traceId":"bf0a75f7-5465-475a-b9ae-f2c5df32da3c","spanId":"6708461f","method":"GET","path":"/api/gap-analysis","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.099Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis
[32m2026-01-18T03:59:17.099Z [INFO] GET /api/gap-analysis {"method":"GET","url":"/api/gap-analysis","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.099Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis
[33m2026-01-18T03:59:17.099Z [WARN] Unknown API route accessed {"path":"/api/gap-analysis","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis
{"type":"request_end","traceId":"bf0a75f7-5465-475a-b9ae-f2c5df32da3c","spanId":"6708461f","method":"GET","path":"/api/gap-analysis","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.101Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis by framework
{"type":"request_start","traceId":"20348a3a-07c1-485b-92c1-712e4fee502c","spanId":"7dbd86ef","method":"GET","path":"/api/gap-analysis/ISO27001","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.104Z"}

stderr | tests/integration/aiRoutes.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis by framework
[32m2026-01-18T03:59:17.104Z [INFO] GET /api/gap-analysis/ISO27001 {"method":"GET","url":"/api/gap-analysis/ISO27001","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.104Z"}[0m
[32m2026-01-18T03:59:17.105Z [INFO] API route accessed {"path":"/api/gap-analysis/ISO27001","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"high","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis by framework
{"type":"request_end","traceId":"20348a3a-07c1-485b-92c1-712e4fee502c","spanId":"7dbd86ef","method":"GET","path":"/api/gap-analysis/ISO27001","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.106Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Document to Audit Trail > should require authentication to track document changes
{"type":"request_start","traceId":"0b325bb4-0672-40aa-94e7-a46c3b5d1d68","spanId":"eb9b85b0","method":"GET","path":"/api/documents/1/history","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.109Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Document to Audit Trail > should require authentication to track document changes
[32m2026-01-18T03:59:17.109Z [INFO] GET /api/documents/1/history {"method":"GET","url":"/api/documents/1/history","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.109Z"}[0m
[32m2026-01-18T03:59:17.110Z [INFO] API route accessed {"path":"/api/documents/1/history","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Document to Audit Trail > should require authentication to track document changes
{"type":"request_end","traceId":"0b325bb4-0672-40aa-94e7-a46c3b5d1d68","spanId":"eb9b85b0","method":"GET","path":"/api/documents/1/history","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.111Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls
{"type":"request_start","traceId":"61000d94-a360-4d79-8aac-27d52a778f7c","spanId":"9c3242ae","method":"POST","path":"/api/evidence/1/controls","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.115Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls
[32m2026-01-18T03:59:17.115Z [INFO] POST /api/evidence/1/controls {"method":"POST","url":"/api/evidence/1/controls","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.115Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls
[33m2026-01-18T03:59:17.115Z [WARN] Unknown API route accessed {"path":"/api/evidence/1/controls","method":"POST","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls
{"type":"request_end","traceId":"61000d94-a360-4d79-8aac-27d52a778f7c","spanId":"9c3242ae","method":"POST","path":"/api/evidence/1/controls","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.117Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats
{"type":"request_start","traceId":"2377e7af-91a9-4b4d-a4dd-9f0038fc5a31","spanId":"39abb3ac","method":"GET","path":"/api/ai/stats","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:17.121Z"}

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats
[32m2026-01-18T03:59:17.121Z [INFO] GET /api/ai/stats {"method":"GET","url":"/api/ai/stats","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:17.121Z"}[0m

stderr | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats
[33m2026-01-18T03:59:17.121Z [WARN] Unknown API route accessed {"path":"/api/ai/stats","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats
{"type":"request_end","traceId":"2377e7af-91a9-4b4d-a4dd-9f0038fc5a31","spanId":"39abb3ac","method":"GET","path":"/api/ai/stats","statusCode":401,"duration":2,"timestamp":"2026-01-18T03:59:17.123Z"}

 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle ISO27001 framework gap analysis request 5ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle FedRAMP framework gap analysis request 6ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Frameworks > should handle NIST framework gap analysis request 6ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Document Quality for Compliance > should analyze document quality against framework 6ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for report access 7ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Gap Analysis Reports > should require authentication for specific report 6ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Remediation Tracking > should require authentication for remediation updates 5ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Risk Assessment > should handle risk assessment requests 5ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Compliance Scoring > should calculate compliance score 5ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > AI-Powered Analysis > should require authentication for AI gap analysis 7ms
 âœ“ |unit| tests/integration/gap-analysis.test.ts > Gap Analysis Integration Tests > Framework Requirements > should return framework control requirements 8ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document generation 7ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should require authentication for AI document analysis 6ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Document Generation > should return AI service health status 7ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication for evidence upload 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Evidence Upload > should require authentication to list evidence 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to list pending approvals 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > AI Generation Flow > Control Approvals > should require authentication to approve a control 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to view audit trail 4ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Audit Trail Access > should require authentication to get audit entry details 6ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication for auditor workspace access 7ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to view compliance overview 6ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Auditor Workspace > should require authentication to export audit reports 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Audit Flow > Gap Analysis > should require authentication for gap analysis by framework 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Document to Audit Trail > should require authentication to track document changes 5ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > Evidence to Control Mapping > should require authentication to map evidence to controls 6ms
 âœ“ |unit| tests/integration/e2e-flows.test.ts > E2E Flow Tests > Cross-Flow Integration > AI Hub Stats > should require authentication for AI stats 6ms
 âœ“ |unit| tests/integration/aiRoutes.test.ts > AI Routes > POST /api/ai/generate-compliance-docs > starts a generation job 63ms
 âœ“ |unit| tests/integration/aiRoutes.test.ts > AI Routes > GET /api/ai/generation-jobs/:id > returns job status 7ms
 âœ“ |unit| tests/integration/aiRoutes.test.ts > AI Routes > GET /api/ai/generation-jobs/:id > returns 404 for non-existent job 5ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 3: Framework Selection > should proceed to step 4 with valid data 1220ms
stderr | tests/integration/auth.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

stderr | tests/integration/api.test.ts
The `fetchConnectionCache` option is deprecated (now always `true`)

 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should display company information review 1092ms
stdout | tests/integration/auth.test.ts > Authentication Integration Tests
[32m2026-01-18T03:59:19.717Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Public Endpoints > should allow access to health check (may be degraded)
[32m2026-01-18T03:59:19.800Z [INFO] GET /health {"method":"GET","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.800Z"}[0m

stderr | tests/integration/auth.test.ts > Authentication Integration Tests > Public Endpoints > should allow access to health check (may be degraded)
[31m2026-01-18T03:59:19.838Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stdout | tests/integration/api.test.ts > API Integration Tests
[32m2026-01-18T03:59:19.846Z [INFO] API documentation disabled in production (set ENABLE_SWAGGER=true to enable)[0m

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Public Endpoints > should allow access to AI health endpoint
[32m2026-01-18T03:59:19.858Z [INFO] GET /api/ai/health {"method":"GET","url":"/api/ai/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.858Z"}[0m
[32m2026-01-18T03:59:19.860Z [INFO] API route accessed {"path":"/api/ai/health","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

 âœ“ |unit| tests/integration/auth.test.ts > Authentication Integration Tests > Public Endpoints > should allow access to health check (may be degraded) 62ms
 âœ“ |unit| tests/integration/auth.test.ts > Authentication Integration Tests > Public Endpoints > should allow access to AI health endpoint 16ms
stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/auth/user
{"type":"request_start","traceId":"1c62c054-1f96-4887-af92-246533058939","spanId":"742049e6","method":"GET","path":"/api/auth/user","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:19.866Z"}

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/auth/user
[32m2026-01-18T03:59:19.866Z [INFO] GET /api/auth/user {"method":"GET","url":"/api/auth/user","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.866Z"}[0m
[32m2026-01-18T03:59:19.867Z [INFO] API route accessed {"path":"/api/auth/user","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/auth/user
{"type":"request_end","traceId":"1c62c054-1f96-4887-af92-246533058939","spanId":"742049e6","method":"GET","path":"/api/auth/user","statusCode":401,"duration":9,"timestamp":"2026-01-18T03:59:19.875Z"}

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/company-profiles
{"type":"request_start","traceId":"b86b9e04-31ad-4701-b859-ff112737def6","spanId":"3248177a","method":"GET","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:19.878Z"}

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/company-profiles
[32m2026-01-18T03:59:19.879Z [INFO] GET /api/company-profiles {"method":"GET","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.879Z"}[0m
[32m2026-01-18T03:59:19.879Z [INFO] API route accessed {"path":"/api/company-profiles","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/company-profiles
{"type":"request_end","traceId":"b86b9e04-31ad-4701-b859-ff112737def6","spanId":"3248177a","method":"GET","path":"/api/company-profiles","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:19.881Z"}

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/documents
{"type":"request_start","traceId":"12d46ae2-511f-4285-b64a-839fe9de4a74","spanId":"c3da299d","method":"GET","path":"/api/documents","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:19.884Z"}

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/documents
[32m2026-01-18T03:59:19.885Z [INFO] GET /api/documents {"method":"GET","url":"/api/documents","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.885Z"}[0m
[32m2026-01-18T03:59:19.885Z [INFO] API route accessed {"path":"/api/documents","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/documents
{"type":"request_end","traceId":"12d46ae2-511f-4285-b64a-839fe9de4a74","spanId":"c3da299d","method":"GET","path":"/api/documents","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:19.887Z"}

stdout | tests/integration/auth.test.ts > Authentication Integration Tests > API Security > should reject requests with invalid methods
[32m2026-01-18T03:59:19.890Z [INFO] PUT /health {"method":"PUT","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.890Z"}[0m

stdout | tests/integration/api.test.ts > API Integration Tests > Health Endpoints > should return system health status (may be degraded in test)
[32m2026-01-18T03:59:19.931Z [INFO] GET /health {"method":"GET","url":"/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.931Z"}[0m

 âœ“ |unit| tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/auth/user 12ms
 âœ“ |unit| tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/company-profiles 6ms
 âœ“ |unit| tests/integration/auth.test.ts > Authentication Integration Tests > Protected Endpoints > should require authentication for /api/documents 5ms
 âœ“ |unit| tests/integration/auth.test.ts > Authentication Integration Tests > API Security > should reject requests with invalid methods 4ms
stderr | tests/integration/api.test.ts > API Integration Tests > Health Endpoints > should return system health status (may be degraded in test)
[31m2026-01-18T03:59:19.972Z [ERROR] Database health check failed {"error":"Unknown error"}[0m

stdout | tests/integration/api.test.ts > API Integration Tests > Health Endpoints > should return AI health status
[32m2026-01-18T03:59:19.987Z [INFO] GET /api/ai/health {"method":"GET","url":"/api/ai/health","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:19.987Z"}[0m
[32m2026-01-18T03:59:19.989Z [INFO] API route accessed {"path":"/api/ai/health","method":"GET","requiresAuth":false,"requiresMfa":false,"rateLimitTier":"low","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

 âœ“ |unit| tests/integration/api.test.ts > API Integration Tests > Health Endpoints > should return system health status (may be degraded in test) 67ms
 âœ“ |unit| tests/integration/api.test.ts > API Integration Tests > Health Endpoints > should return AI health status 11ms
stdout | tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for user profile
{"type":"request_start","traceId":"70c379f3-b987-405d-a2bc-ec71d13f4e82","spanId":"fbec84df","method":"GET","path":"/api/auth/user","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:20.003Z"}

stdout | tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for user profile
[32m2026-01-18T03:59:20.003Z [INFO] GET /api/auth/user {"method":"GET","url":"/api/auth/user","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:20.003Z"}[0m
[32m2026-01-18T03:59:20.004Z [INFO] API route accessed {"path":"/api/auth/user","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for user profile
{"type":"request_end","traceId":"70c379f3-b987-405d-a2bc-ec71d13f4e82","spanId":"fbec84df","method":"GET","path":"/api/auth/user","statusCode":401,"duration":8,"timestamp":"2026-01-18T03:59:20.011Z"}

stdout | tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for company profiles
{"type":"request_start","traceId":"246b9d56-0c35-4ba3-865b-c3de3fc5e789","spanId":"8ec69a81","method":"GET","path":"/api/company-profiles","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:20.015Z"}

stdout | tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for company profiles
[32m2026-01-18T03:59:20.016Z [INFO] GET /api/company-profiles {"method":"GET","url":"/api/company-profiles","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:20.016Z"}[0m
[32m2026-01-18T03:59:20.016Z [INFO] API route accessed {"path":"/api/company-profiles","method":"GET","requiresAuth":true,"requiresMfa":false,"rateLimitTier":"medium","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for company profiles
{"type":"request_end","traceId":"246b9d56-0c35-4ba3-865b-c3de3fc5e789","spanId":"8ec69a81","method":"GET","path":"/api/company-profiles","statusCode":401,"duration":3,"timestamp":"2026-01-18T03:59:20.018Z"}

stdout | tests/integration/api.test.ts > API Integration Tests > API Error Handling > should return 404 for non-existent endpoints
{"type":"request_start","traceId":"c81c8fa9-fb61-431f-96d3-a6e0cb92d7e5","spanId":"032f7bd8","method":"GET","path":"/api/non-existent-route","ip":"::ffff:127.0.0.1","timestamp":"2026-01-18T03:59:20.022Z"}

stdout | tests/integration/api.test.ts > API Integration Tests > API Error Handling > should return 404 for non-existent endpoints
[32m2026-01-18T03:59:20.022Z [INFO] GET /api/non-existent-route {"method":"GET","url":"/api/non-existent-route","ip":"[IP_REDACTED]:[IP_REDACTED]","timestamp":"2026-01-18T03:59:20.022Z"}[0m

stderr | tests/integration/api.test.ts > API Integration Tests > API Error Handling > should return 404 for non-existent endpoints
[33m2026-01-18T03:59:20.022Z [WARN] Unknown API route accessed {"path":"/api/non-existent-route","method":"GET","ip":"[IP_REDACTED]:[IP_REDACTED]"}[0m

stdout | tests/integration/api.test.ts > API Integration Tests > API Error Handling > should return 404 for non-existent endpoints
{"type":"request_end","traceId":"c81c8fa9-fb61-431f-96d3-a6e0cb92d7e5","spanId":"032f7bd8","method":"GET","path":"/api/non-existent-route","statusCode":404,"duration":3,"timestamp":"2026-01-18T03:59:20.024Z"}

 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should display infrastructure review 1092ms
 âœ“ |unit| tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for user profile 20ms
 âœ“ |unit| tests/integration/api.test.ts > API Integration Tests > Authentication Required Endpoints > should require authentication for company profiles 6ms
 âœ“ |unit| tests/integration/api.test.ts > API Integration Tests > API Error Handling > should return 404 for non-existent endpoints 5ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should display selected frameworks 1112ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should show estimated document count 1109ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should render generate button 1118ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should only show previous button, not next 1120ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 4: Review & Generate > should allow going back to step 3 1162ms
stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show loading state during generation
Not implemented: HTMLFormElement's requestSubmit() method

 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show loading state during generation 1164ms
stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show error state on generation failure
Not implemented: HTMLFormElement's requestSubmit() method

 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show error state on generation failure 1165ms
stderr | tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show completed state with generated documents
Not implemented: HTMLFormElement's requestSubmit() method

 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Step 5: Generation Results > should show completed state with generated documents 1160ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Form Validation > should validate company name length 123ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Form Validation > should validate headquarters is required 72ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Form Validation > should validate business applications minimum length 975ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Navigation > should maintain form data when navigating back and forth 713ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Accessibility > should have proper form labels 49ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Accessibility > should have accessible buttons 67ms
 âœ“ |components| tests/components/ai-doc-generator.test.tsx > AI Document Generator Page > Accessibility > should show validation errors with proper messaging 73ms

 Test Files  79 passed (79)
      Tests  794 passed | 3 skipped (797)
   Start at  03:58:44
   Duration  46.48s (transform 13.23s, setup 59.06s, collect 109.39s, tests 71.73s, environment 157.76s, prepare 33.87s)

 % Coverage report from v8
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |   44.26 |    65.71 |   42.77 |   44.26 |                   
 cyberdocgen       |       0 |       25 |      25 |       0 |                   
  .eslintrc.cjs    |       0 |        0 |       0 |       0 | 1-36              
  ...zle.config.ts |       0 |        0 |       0 |       0 | 1-14              
  eslint.config.js |       0 |        0 |       0 |       0 | 1-73              
  ...css.config.js |       0 |        0 |       0 |       0 | 1-6               
  ...ier.config.js |       0 |        0 |       0 |       0 | 1-15              
  ...ind.config.ts |       0 |      100 |     100 |       0 | 2-99              
  vite.config.ts   |       0 |        0 |       0 |       0 | 1-104             
  vitest.config.ts |       0 |      100 |     100 |       0 | 2-88              
 ...gen/.storybook |       0 |    66.66 |   66.66 |       0 |                   
  main.ts          |       0 |      100 |     100 |       0 | 3-17              
  preview.ts       |       0 |      100 |     100 |       0 | 3-21              
  vitest.setup.ts  |       0 |        0 |       0 |       0 | 1-7               
 ...archive/legacy |       0 |      100 |     100 |       0 |                   
  ...ai_routes.cjs |       0 |      100 |     100 |       0 | 2-311             
 ...esting-reports |       0 |        0 |       0 |       0 |                   
  ...i-services.js |       0 |        0 |       0 |       0 | 1-95              
  ...-ai-simple.js |       0 |        0 |       0 |       0 | 1-126             
  ...-endpoints.js |       0 |        0 |       0 |       0 | 1-198             
  ...i-services.js |       0 |        0 |       0 |       0 | 1-172             
 ...docgen/scripts |       0 |    92.85 |   92.85 |       0 |                   
  ...sting-data.ts |       0 |      100 |     100 |       0 | 9-193             
  ...validation.ts |       0 |      100 |     100 |       0 | 9-428             
  ...yption-key.ts |       0 |      100 |     100 |       0 | 9-72              
  generate-sbom.ts |       0 |      100 |     100 |       0 | 9-417             
  ...completion.ts |       0 |      100 |     100 |       0 | 3-164             
  ...completion.ts |       0 |      100 |     100 |       0 | 3-162             
  ...completion.ts |       0 |      100 |     100 |       0 | 8-321             
  ...completion.ts |       0 |      100 |     100 |       0 | 8-286             
  ...completion.ts |       0 |      100 |     100 |       0 | 8-215             
  ...uild-check.ts |       0 |      100 |     100 |       0 | 4-233             
  ...ment-check.ts |       0 |      100 |     100 |       0 | 8-198             
  ...on-startup.ts |       0 |      100 |     100 |       0 | 2-49              
  ...ta-testers.ts |       0 |        0 |       0 |       0 | 1-94              
  ...compliance.ts |       0 |      100 |     100 |       0 | 9-332             
 ...rdocgen/server |   31.77 |    61.81 |   21.22 |   31.77 |                   
  db.ts            |    23.8 |        0 |       0 |    23.8 | ...4,44-57,63-115 
  index.ts         |       0 |        0 |       0 |       0 | 1-134             
  replitAuth.ts    |   24.17 |       25 |   30.76 |   24.17 | ...93-410,413-415 
  routes.ts        |   52.29 |    33.33 |     100 |   52.29 | ...36-444,473-507 
  storage.ts       |   32.44 |    74.39 |   20.75 |   32.44 | ...1923,1926-1930 
  vite.ts          |       0 |        0 |       0 |       0 | 1-87              
 .../server/config |   91.91 |        0 |       0 |   91.91 |                   
  index.ts         |       0 |        0 |       0 |       0 | 1-34              
  swagger.ts       |   99.73 |        0 |     100 |   99.73 | 87                
 ...gen/server/mcp |     4.5 |      100 |   20.68 |     4.5 |                   
  agentClient.ts   |    7.69 |      100 |    7.69 |    7.69 | ...71-372,378-379 
  index.ts         |       0 |      100 |     100 |       0 | 6-18              
  initialize.ts    |       0 |      100 |     100 |       0 | 6-303             
  integration.ts   |       0 |      100 |     100 |       0 | 6-372             
  server.ts        |    5.73 |      100 |     100 |    5.73 | ...82-310,317-359 
  toolRegistry.ts  |   11.33 |      100 |    8.33 |   11.33 | ...91-203,209-218 
  types.ts         |       0 |      100 |     100 |       0 | 6-100             
 ...rver/mcp/tools |       0 |      100 |     100 |       0 |                   
  advanced.ts      |       0 |      100 |     100 |       0 | 6-707             
  external.ts      |       0 |      100 |     100 |       0 | 6-417             
  internal.ts      |       0 |      100 |     100 |       0 | 6-460             
 ...ver/middleware |   33.33 |    59.15 |   25.75 |   33.33 |                   
  egressControl.ts |   36.77 |       50 |    12.5 |   36.77 | ...41-246,253-254 
  mfa.ts           |    3.89 |      100 |       0 |    3.89 | ...31-180,186-230 
  multiTenant.ts   |   12.58 |    33.33 |   14.28 |   12.58 | ...73-129,132-195 
  production.ts    |   13.75 |    66.66 |   14.28 |   13.75 | ...82-199,203-214 
  rateLimiter.ts   |   47.74 |      100 |      20 |   47.74 | ...00-101,116-189 
  ...Validation.ts |   44.18 |    91.66 |      50 |   44.18 | ...80-107,193-200 
  security.ts      |   39.78 |     37.5 |   38.88 |   39.78 | ...74-596,612-619 
  tracing.ts       |   68.96 |     90.9 |      40 |   68.96 | ...34-140,146-162 
 ...ver/monitoring |   35.33 |       75 |   22.22 |   35.33 |                   
  metrics.ts       |   39.55 |    85.71 |      25 |   39.55 | ...52-179,183-191 
  telemetry.ts     |       0 |        0 |       0 |       0 | 1-20              
 .../server/routes |   21.39 |       80 |   24.74 |   21.39 |                   
  admin.ts         |   16.47 |      100 |       0 |   16.47 | ...85-308,318-365 
  aiSessions.ts    |   13.71 |      100 |     100 |   13.71 | ...45-172,176-210 
  analytics.ts     |       9 |      100 |     100 |       9 | ...93-238,242-290 
  approvals.ts     |   20.68 |      100 |      20 |   20.68 | ...7,71-92,96-117 
  auditTrail.ts    |   17.39 |      100 |     100 |   17.39 | 13-44,48-54,58-85 
  auditor.ts       |   11.72 |      100 |     100 |   11.72 | ...90-147,165-222 
  clientErrors.ts  |   63.15 |      100 |     100 |   63.15 | 28-43             
  ...ntegration.ts |   41.79 |      100 |     100 |   41.79 | ...97,104,111,118 
  ...nyProfiles.ts |   19.01 |      100 |     100 |   19.01 | ...42-159,163-179 
  controls.ts      |   23.33 |      100 |     100 |   23.33 | 26-46,70-103      
  dashboard.ts     |   13.28 |      100 |     100 |   13.28 | ...38-166,184-206 
  documents.ts     |   29.71 |       60 |      25 |   29.71 | ...27-476,500-545 
  ...rpriseAuth.ts |   23.36 |      100 |       0 |   23.36 | ...73-427,434-454 
  evidence.ts      |    8.08 |      100 |   33.33 |    8.08 | ...44-195,202-294 
  export.ts        |   11.01 |      100 |      25 |   11.01 | ...84-127,134-198 
  ...olStatuses.ts |   47.24 |    82.35 |   33.33 |   47.24 | ...45-261,268-318 
  gapAnalysis.ts   |    9.09 |      100 |   16.66 |    9.09 | ...04-145,152-295 
  ...rationJobs.ts |    15.7 |      100 |      40 |    15.7 | ...1,48-61,70-159 
  mfa.ts           |   17.98 |      100 |       0 |   17.98 | ...69-294,302-329 
  notifications.ts |   38.46 |      100 |   16.66 |   38.46 | ...44,51-53,60-68 
  organizations.ts |   26.19 |      100 |     100 |   26.19 | 17-28,35-61       
  projects.ts      |   19.61 |      100 |       0 |   19.61 | ...97-320,327-358 
  roles.ts         |   35.88 |      100 |       0 |   35.88 | ...15-248,255-274 
  storage.ts       |      11 |      100 |   33.33 |      11 | ...60-382,389-414 
  templates.ts     |   31.38 |      100 |   28.57 |   31.38 | ...41-159,166-196 
  userProfile.ts   |   37.71 |      100 |       0 |   37.71 | ...14-130,137-153 
 ...rver/routes/ai |   23.47 |       80 |     100 |   23.47 |                   
  analysis.ts      |   13.67 |      100 |     100 |   13.67 | ...12-153,161-180 
  chat.ts          |     9.2 |      100 |     100 |     9.2 | ...2,80-86,94-220 
  fineTuning.ts    |   15.27 |      100 |     100 |   15.27 | ...0,58-82,90-110 
  generation.ts    |   55.37 |       60 |     100 |   55.37 | ...05-126,152-153 
  index.ts         |     100 |      100 |     100 |     100 |                   
  industry.ts      |   29.16 |      100 |     100 |   29.16 | 18-25,33-44       
  models.ts        |   54.54 |      100 |     100 |   54.54 | 12-16             
  quality.ts       |   11.39 |      100 |     100 |   11.39 | 28-74,82-117      
  risk.ts          |   16.12 |      100 |     100 |   16.12 | 27-64,72-95       
  shared.ts        |     100 |      100 |     100 |     100 |                   
  stats.ts         |   13.33 |      100 |     100 |   13.33 | 20-80             
  vision.ts        |   11.66 |      100 |     100 |   11.66 | 29-93             
 ...server/scripts |       0 |      100 |     100 |       0 |                   
  migrate.ts       |       0 |      100 |     100 |       0 | 2-25              
 ...erver/services |   55.16 |     63.1 |   57.88 |   55.16 |                   
  aiClients.ts     |   28.57 |      100 |       0 |   28.57 | ...41,44-45,48-49 
  ...ingService.ts |   95.83 |    72.41 |     100 |   95.83 | ...44-345,366-367 
  ...ilsService.ts |   86.76 |     73.8 |     100 |   86.76 | ...33-534,547-554 
  aiModels.ts      |     100 |      100 |     100 |     100 |                   
  ...chestrator.ts |   54.34 |    31.03 |      50 |   54.34 | ...59-560,593-618 
  ...ingService.ts |   45.67 |    83.33 |   33.33 |   45.67 | ...90-196,199-207 
  anthropic.ts     |    87.2 |    28.57 |     100 |    87.2 | 95-99,150,210-219 
  auditService.ts  |   32.67 |       56 |   23.07 |   32.67 | ...46-459,465-474 
  ...ingService.ts |       0 |      100 |     100 |       0 | 6-492             
  chatbot.ts       |   90.49 |    78.12 |    87.5 |   90.49 | ...84-286,295-296 
  ...ionService.ts |   58.85 |    41.93 |   46.15 |   58.85 | ...08,515,517,526 
  ...ionService.ts |    5.43 |      100 |       0 |    5.43 | ...85-315,318-334 
  ...ineService.ts |   45.07 |    47.05 |      40 |   45.07 | ...53,465,480-481 
  ...apAnalysis.ts |     100 |    71.92 |     100 |     100 | ...20-421,480-481 
  ...ncyService.ts |   47.27 |    91.66 |   28.57 |   47.27 | ...11-225,231-246 
  ...Automation.ts |   86.28 |     80.7 |   92.85 |   86.28 | ...35,367-368,423 
  ...ionService.ts |    21.7 |     62.5 |   33.33 |    21.7 | ...43-462,468-481 
  ...ntAnalysis.ts |    9.33 |      100 |       0 |    9.33 | ...44-264,270-275 
  ...tTemplates.ts |   36.84 |    55.17 |   31.25 |   36.84 | ...79-381,387-401 
  ...lowService.ts |    54.7 |    60.86 |      50 |    54.7 | ...49-451,470-471 
  emailService.ts  |     100 |       90 |     100 |     100 | 49                
  encryption.ts    |   76.88 |    72.97 |    87.5 |   76.88 | ...58-266,278-279 
  ...uthService.ts |   41.17 |    42.85 |   61.53 |   41.17 | ...98-599,634-639 
  ...eetService.ts |   97.99 |    46.55 |     100 |   97.99 | ...44,270,400-401 
  geminiVision.ts  |     100 |    97.29 |     100 |     100 | 92                
  ...ionService.ts |   52.58 |       72 |      55 |   52.58 | ...00-501,516-519 
  mfaService.ts    |   85.95 |    78.94 |     100 |   85.95 | ...91-392,460-461 
  ...ncyService.ts |       0 |      100 |     100 |       0 | 6-415             
  ...ageService.ts |    7.84 |      100 |    5.26 |    7.84 | ...21-444,450-476 
  openai.ts        |   90.14 |       50 |     100 |   90.14 | ...00-101,110-113 
  ...ityService.ts |    68.6 |       50 |      80 |    68.6 | ...85-391,399-401 
  ...nceService.ts |    36.7 |       70 |   27.77 |    36.7 | ...33-242,245-253 
  ...ityScoring.ts |   79.09 |    57.14 |    90.9 |   79.09 | ...96,423-427,430 
  ...Assessment.ts |   92.82 |    57.14 |     100 |   92.82 | ...85-187,241-248 
  ...ingService.ts |   88.04 |    52.05 |   82.35 |   88.04 | ...45-446,452-453 
  ...figService.ts |    6.06 |      100 |       0 |    6.06 | ...51-289,295-339 
  ...ionService.ts |   95.02 |    89.74 |   73.33 |   95.02 | ...07,210-213,233 
  types.ts         |       0 |        0 |       0 |       0 |                   
  ...ionService.ts |    7.53 |      100 |       0 |    7.53 | ...49-268,271-304 
 ...umentTemplates |       0 |        0 |       0 |       0 |                   
  types.ts         |       0 |        0 |       0 |       0 |                   
 ...plates/fedramp |     100 |      100 |     100 |     100 |                   
  baselines.ts     |     100 |      100 |     100 |     100 |                   
  index.ts         |     100 |      100 |     100 |     100 |                   
  plans.ts         |     100 |      100 |     100 |     100 |                   
  standards.ts     |     100 |      100 |     100 |     100 |                   
 ...mp/attachments |     100 |      100 |     100 |     100 |                   
  assessments.ts   |     100 |      100 |     100 |     100 |                   
  index.ts         |     100 |      100 |     100 |     100 |                   
  plans.ts         |     100 |      100 |     100 |     100 |                   
  policies.ts      |     100 |      100 |     100 |     100 |                   
  workbooks.ts     |     100 |      100 |     100 |     100 |                   
 ...lates/iso27001 |     100 |      100 |     100 |     100 |                   
  assessment.ts    |     100 |      100 |     100 |     100 |                   
  extended.ts      |     100 |      100 |     100 |     100 |                   
  index.ts         |     100 |      100 |     100 |     100 |                   
  management.ts    |     100 |      100 |     100 |     100 |                   
 ...Templates/nist |     100 |      100 |     100 |     100 |                   
  core.ts          |     100 |      100 |     100 |     100 |                   
  families_1.ts    |     100 |      100 |     100 |     100 |                   
  families_2.ts    |     100 |      100 |     100 |     100 |                   
  families_3.ts    |     100 |      100 |     100 |     100 |                   
  index.ts         |     100 |      100 |     100 |     100 |                   
 ...es/operational |     100 |      100 |     100 |     100 |                   
  ...ifications.ts |     100 |      100 |     100 |     100 |                   
  core.ts          |     100 |      100 |     100 |     100 |                   
  index.ts         |     100 |      100 |     100 |     100 |                   
  notices.ts       |     100 |      100 |     100 |     100 |                   
 ...Templates/soc2 |     100 |      100 |     100 |     100 |                   
  core.ts          |     100 |      100 |     100 |     100 |                   
  extended.ts      |     100 |      100 |     100 |     100 |                   
  index.ts         |     100 |      100 |     100 |     100 |                   
  operational.ts   |     100 |      100 |     100 |     100 |                   
 ...n/server/utils |   61.89 |    69.69 |   55.07 |   61.89 |                   
  ...uitBreaker.ts |   36.93 |      100 |    9.09 |   36.93 | ...12-218,270-276 
  errorHandler.ts  |     100 |    83.33 |     100 |     100 | 11                
  errorHandling.ts |   47.53 |       50 |      25 |   47.53 | ...75-376,384-385 
  health.ts        |   64.51 |    37.93 |     100 |   64.51 | ...11-216,223-228 
  logSanitizer.ts  |   77.84 |       72 |      75 |   77.84 | ...32,182-213,241 
  logger.ts        |   84.04 |    82.75 |   91.66 |   84.04 | ...43-244,247-248 
  routeHelpers.ts  |    73.8 |    57.14 |   66.66 |    73.8 | 41-42,65-70,78-80 
  validation.ts    |   58.26 |       90 |   44.44 |   58.26 | ...35-246,264-277 
 ...ver/validation |   82.69 |      100 |      25 |   82.69 |                   
  ...estSchemas.ts |     100 |      100 |     100 |     100 |                   
  schemas.ts       |       0 |      100 |     100 |       0 | 11                
  ...ateSchemas.ts |   51.03 |      100 |       0 |   51.03 | ...52-182,185-187 
 ...rdocgen/shared |     100 |      100 |       0 |     100 |                   
  schema.ts        |     100 |      100 |       0 |     100 |                   
 ...n/shared/types |       0 |        0 |       0 |       0 |                   
  framework.ts     |       0 |        0 |       0 |       0 |                   
 ...docgen/stories |   56.47 |      100 |     100 |   56.47 |                   
  ...on.stories.ts |       0 |      100 |     100 |       0 | 3-54              
  Button.tsx       |     100 |      100 |     100 |     100 |                   
  ...er.stories.ts |       0 |      100 |     100 |       0 | 3-34              
  Header.tsx       |     100 |      100 |     100 |     100 |                   
  Page.stories.ts  |       0 |      100 |     100 |       0 | 3-33              
  Page.tsx         |     100 |      100 |     100 |     100 |                   
-------------------|---------|----------|---------|---------|-------------------
ERROR: Coverage for lines (44.26%) does not meet global threshold (80%)
ERROR: Coverage for functions (42.77%) does not meet global threshold (80%)
ERROR: Coverage for statements (44.26%) does not meet global threshold (80%)
ERROR: Coverage for branches (65.71%) does not meet global threshold (75%)
